(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b21c8"],{"235f":function(e,i,t){"use strict";t.r(i);var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"app-container"},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-table",{staticStyle:{"margin-top":"40px"},attrs:{data:e.disposeTypeList,border:"","highlight-current-row":""},on:{"current-change":e.disposeTypeCurrentRowChange}},[t("el-table-column",{attrs:{type:"index",label:"No",align:"center"}}),t("el-table-column",{attrs:{label:"公用代码",width:"80",align:"center",prop:"global_no"}}),t("el-table-column",{attrs:{label:"处理类型",align:"center",prop:"global_name"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.row;return[t("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleUpdateType(s)}}},[e._v("编辑")])]}}])})],1)],1),t("el-col",{attrs:{span:12}},[t("el-button",{staticStyle:{float:"right"},attrs:{disabled:!e.disposeTypeCurrentRow},on:{click:e.handleNewOpinion}},[e._v("新增")]),t("el-table",{attrs:{border:"",data:e.opinionsList}},[t("el-table-column",{attrs:{type:"index",label:"No",align:"center"}}),t("el-table-column",{attrs:{label:"处理意见",prop:"suggestion_desc",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.row;return[t("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleUpdateOpinion(s)}}},[e._v("编辑")])]}}])})],1)],1)],1),t("el-dialog",{attrs:{title:e.textMap[e.dialogDisposeStatus]+"处理类型",visible:e.dialogDisposeTypeVisible,"append-to-body":!0},on:{"update:visible":function(i){e.dialogDisposeTypeVisible=i}}},[t("el-form",{ref:"disposeTypeForm",attrs:{model:e.disposeTypeForm,rules:e.disposeTypeRules}},[t("el-form-item",{attrs:{label:"处理类型","label-width":"110px",prop:"global_name"}},[t("el-input",{model:{value:e.disposeTypeForm.global_name,callback:function(i){e.$set(e.disposeTypeForm,"global_name",i)},expression:"disposeTypeForm.global_name"}})],1),t("el-form-item",{attrs:{label:"公用代码编号","label-width":"110px",prop:"global_no"}},[t("el-input",{attrs:{disabled:"update"===e.dialogDisposeStatus},model:{value:e.disposeTypeForm.global_no,callback:function(i){e.$set(e.disposeTypeForm,"global_no",i)},expression:"disposeTypeForm.global_no"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(i){e.dialogDisposeTypeVisible=!1}}},[e._v(" 取消 ")]),t("el-button",{attrs:{type:"primary"},on:{click:function(i){"create"===e.dialogDisposeStatus?e.createDisposeType():e.updateDisposeType()}}},[e._v(" 确定 ")])],1)],1),t("el-dialog",{attrs:{title:e.textMap[e.disposeOpinionStatus]+"处理意见",visible:e.dialogOpinionVisible,"append-to-body":!0},on:{"update:visible":function(i){e.dialogOpinionVisible=i}}},[t("el-form",{ref:"disposeOpinionForm",attrs:{model:e.disposeOpinionForm,rules:e.disposeOpinionRules}},[t("el-form-item",{attrs:{label:"处理意见","label-width":"110px",prop:"suggestion_desc"}},[t("el-input",{model:{value:e.disposeOpinionForm.suggestion_desc,callback:function(i){e.$set(e.disposeOpinionForm,"suggestion_desc",i)},expression:"disposeOpinionForm.suggestion_desc"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(i){e.dialogOpinionVisible=!1}}},[e._v(" 取消 ")]),t("el-button",{attrs:{type:"primary"},on:{click:function(i){"create"===e.disposeOpinionStatus?e.createOpinion():e.updateOpinion()}}},[e._v(" 确定 ")])],1)],1)],1)},o=[],n=t("5530"),a=(t("96cf"),t("1da1")),l=t("b775"),p=t("99b1");function r(){return Object(l["a"])({url:p["a"].GlobalTypesUrl,method:"get",params:{type_name:"处理类型"}})}function d(){return Object(l["a"])({url:p["a"].DisposeTypeUrl,method:"get",params:{all:1,type_no:14}})}function u(e,i,t){var s={url:i?p["a"].DisposeTypeUrl+i+"/":p["a"].DisposeTypeUrl,method:e,data:t};return Object(l["a"])(s)}function c(e){return Object(l["a"])({url:p["a"].DealSuggestionUrl,method:"get",params:{deal_type:e}})}function g(e,i,t){var s={url:i?p["a"].DealSuggestionUrl+i+"/":p["a"].DealSuggestionUrl,method:e,data:t};return Object(l["a"])(s)}var b={data:function(){return{globalType:null,disposeTypeList:[],dialogDisposeTypeVisible:!1,dialogOpinionVisible:!1,disposeTypeForm:{global_name:"",global_no:""},textMap:{update:"编辑",create:"创建"},dialogDisposeStatus:"",disposeTypeRules:{global_name:[{required:!0,message:"该字段不能为空",trigger:"blur"}],global_no:[{required:!0,message:"该字段不能为空",trigger:"blur"}]},disposeTypeCurrentRow:null,opinionsList:[],disposeOpinionStatus:"",disposeOpinionForm:{suggestion_desc:""},disposeOpinionRules:{suggestion_desc:[{required:!0,message:"该字段不能为空",trigger:"blur"}]}}},created:function(){this.getDisposeTypeGlobalType(),this.getDisposeTypes()},methods:{disposeTypeCurrentRowChange:function(e){var i=this;this.disposeTypeCurrentRow=e,this.opinionsList=[],e&&c(e.id).then((function(e){i.opinionsList=e.results}))},getDisposeTypeGlobalType:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var t;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,r();case 3:t=i.sent,e.globalType=t.results[0].id,i.next=9;break;case 7:i.prev=7,i.t0=i["catch"](0);case 9:case"end":return i.stop()}}),i,null,[[0,7]])})))()},getDisposeTypes:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var t;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,d();case 3:t=i.sent,e.disposeTypeList=t.results,i.next=9;break;case 7:i.prev=7,i.t0=i["catch"](0);case 9:case"end":return i.stop()}}),i,null,[[0,7]])})))()},handleNewType:function(){var e=this;this.disposeTypeForm={global_name:"",global_no:""},this.dialogDisposeStatus="create",this.dialogDisposeTypeVisible=!0,this.$nextTick((function(){e.$refs["disposeTypeForm"].clearValidate()}))},handleUpdateType:function(e){var i=this;this.disposeTypeForm=Object.assign({},e),this.dialogDisposeStatus="update",this.dialogDisposeTypeVisible=!0,this.$nextTick((function(){i.$refs["disposeTypeForm"].clearValidate()}))},createDisposeType:function(){var e=this;this.$refs["disposeTypeForm"].validate((function(i){i&&u("post",null,Object(n["a"])(Object(n["a"])({},e.disposeTypeForm),{},{global_type:e.globalType})).then((function(){e.dialogDisposeTypeVisible=!1,e.getDisposeTypes(),e.$notify({title:"成功",message:"".concat(e.disposeTypeForm.global_name,"创建成功"),type:"success",duration:2e3})}))}))},updateDisposeType:function(){var e=this;this.$refs["disposeTypeForm"].validate((function(i){i&&u("patch",e.disposeTypeForm.id,{global_name:e.disposeTypeForm.global_name}).then((function(){e.dialogDisposeTypeVisible=!1,e.getDisposeTypes(),e.$notify({title:"成功",message:"".concat(e.disposeTypeForm.global_name,"修改成功"),type:"success",duration:2e3})}))}))},handleNewOpinion:function(){var e=this;this.disposeOpinionForm={suggestion_desc:""},this.disposeOpinionStatus="create",this.dialogOpinionVisible=!0,this.$nextTick((function(){e.$refs["disposeOpinionForm"].clearValidate()}))},createOpinion:function(){var e=this;this.$refs["disposeOpinionForm"].validate((function(i){i&&g("post",null,Object(n["a"])({deal_type:e.disposeTypeCurrentRow.id},e.disposeOpinionForm)).then((function(){e.dialogOpinionVisible=!1,e.disposeTypeCurrentRowChange(e.disposeTypeCurrentRow),e.$notify({title:"成功",message:"".concat(e.disposeOpinionForm.suggestion_desc,"创建成功"),type:"success",duration:2e3})}))}))},handleUpdateOpinion:function(e){var i=this;this.disposeOpinionForm=Object.assign({},e),this.disposeOpinionStatus="update",this.dialogOpinionVisible=!0,this.$nextTick((function(){i.$refs["disposeOpinionForm"].clearValidate()}))},updateOpinion:function(){var e=this;this.$refs["disposeOpinionForm"].validate((function(i){i&&g("patch",e.disposeOpinionForm.id,{suggestion_desc:e.disposeOpinionForm.suggestion_desc}).then((function(){e.dialogOpinionVisible=!1,e.disposeTypeCurrentRowChange(e.disposeTypeCurrentRow),e.$notify({title:"成功",message:"".concat(e.disposeOpinionForm.suggestion_desc,"修改成功"),type:"success",duration:2e3})}))}))}}},m=b,y=t("2877"),f=Object(y["a"])(m,s,o,!1,null,null,null);i["default"]=f.exports}}]);