(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42fb3c0d"],{"084b":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return i}));var r=a("b775"),o=a("99b1");function n(e){return Object(r["a"])({url:o["a"].SparepartsSpareType,method:"get",params:e})}function l(e){return Object(r["a"])({url:o["a"].SparepartsSpareType,method:"post",data:e})}function s(e,t){return Object(r["a"])({url:o["a"].SparepartsSpareType+t+"/",method:"put",data:e})}function i(e){return Object(r["a"])({url:o["a"].SparepartsSpareType+e+"/",method:"delete"})}},"228d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"物料编码"}},[a("el-input",{on:{input:e.changSelect},model:{value:e.getParams.no,callback:function(t){e.$set(e.getParams,"no",t)},expression:"getParams.no"}})],1),a("el-form-item",{attrs:{label:"物料名称"}},[a("el-input",{on:{input:e.changSelect},model:{value:e.getParams.name,callback:function(t){e.$set(e.getParams,"name",t)},expression:"getParams.name"}})],1),a("el-form-item",{attrs:{label:"物料类型"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:e.getTableData,"visible-change":e.visibleChange},model:{value:e.getParams.type_name,callback:function(t){e.$set(e.getParams,"type_name",t)},expression:"getParams.type_name"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["spare_info","add"],expression:"['spare_info', 'add']"}],on:{click:e.showCreateDialog}},[e._v("新建")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"No",width:"50"}}),a("el-table-column",{attrs:{prop:"type_name",label:"物料类型"}}),a("el-table-column",{attrs:{prop:"no",label:"物料编码"}}),a("el-table-column",{attrs:{prop:"name",label:"物料名称"}}),a("el-table-column",{attrs:{prop:"cost",label:"单价（元）"}}),a("el-table-column",{attrs:{prop:"lower",label:"安全库存下限"}}),a("el-table-column",{attrs:{prop:"upper",label:"安全库存上限"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["spare_info","change"],expression:"['spare_info', 'change']"}],attrs:{size:"mini"},on:{click:function(a){return e.showEditDialog(t.row)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["spare_info","delete"],expression:"['spare_info', 'delete']"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除 ")])],1)]}}])})],1),a("page",{attrs:{"old-page":!1,total:e.total,"current-page":e.getParams.page},on:{currentChange:e.currentChange}}),a("el-dialog",{attrs:{title:"添加备品备件信息",visible:e.dialogCreateVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("el-form",{ref:"createForm",attrs:{rules:e.rules,model:e.spareForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"物料类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.spareForm.type,callback:function(t){e.$set(e.spareForm,"type",t)},expression:"spareForm.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id,disabled:e.delete_flag}})})),1)],1),a("el-form-item",{attrs:{label:"物料编码",prop:"no"}},[a("el-input",{model:{value:e.spareForm.no,callback:function(t){e.$set(e.spareForm,"no",t)},expression:"spareForm.no"}})],1),a("el-form-item",{attrs:{label:"物料名称",prop:"name"}},[a("el-input",{model:{value:e.spareForm.name,callback:function(t){e.$set(e.spareForm,"name",t)},expression:"spareForm.name"}})],1),a("el-form-item",{attrs:{label:"单价（元）",prop:"cost"}},[a("el-input",{model:{value:e.spareForm.cost,callback:function(t){e.$set(e.spareForm,"cost",t)},expression:"spareForm.cost"}})],1),a("el-form-item",{attrs:{label:"安全库存下限",prop:"lower"}},[a("el-input",{model:{value:e.spareForm.lower,callback:function(t){e.$set(e.spareForm,"lower",t)},expression:"spareForm.lower"}})],1),a("el-form-item",{attrs:{label:"安全库存上限",prop:"upper"}},[a("el-input",{model:{value:e.spareForm.upper,callback:function(t){e.$set(e.spareForm,"upper",t)},expression:"spareForm.upper"}})],1),a("el-form-item",{attrs:{label:"单位",prop:"unit"}},[a("el-input",{model:{value:e.spareForm.unit,callback:function(t){e.$set(e.spareForm,"unit",t)},expression:"spareForm.unit"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑备品备件信息",visible:e.dialogEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("el-form",{ref:"editForm",attrs:{rules:e.rules,model:e.spareForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"物料类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.spareForm.type,callback:function(t){e.$set(e.spareForm,"type",t)},expression:"spareForm.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id,disabled:e.delete_flag}})})),1)],1),a("el-form-item",{attrs:{label:"物料编码",prop:"no"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.spareForm.no,callback:function(t){e.$set(e.spareForm,"no",t)},expression:"spareForm.no"}})],1),a("el-form-item",{attrs:{label:"物料名称",prop:"name"}},[a("el-input",{model:{value:e.spareForm.name,callback:function(t){e.$set(e.spareForm,"name",t)},expression:"spareForm.name"}})],1),a("el-form-item",{attrs:{label:"单价（元）",prop:"cost"}},[a("el-input",{model:{value:e.spareForm.cost,callback:function(t){e.$set(e.spareForm,"cost",t)},expression:"spareForm.cost"}})],1),a("el-form-item",{attrs:{label:"安全库存下限",prop:"lower"}},[a("el-input",{model:{value:e.spareForm.lower,callback:function(t){e.$set(e.spareForm,"lower",t)},expression:"spareForm.lower"}})],1),a("el-form-item",{attrs:{label:"安全库存上限",prop:"upper"}},[a("el-input",{model:{value:e.spareForm.upper,callback:function(t){e.$set(e.spareForm,"upper",t)},expression:"spareForm.upper"}})],1),a("el-form-item",{attrs:{label:"单位",prop:"unit"}},[a("el-input",{model:{value:e.spareForm.unit,callback:function(t){e.$set(e.spareForm,"unit",t)},expression:"spareForm.unit"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEditVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("确 定")])],1)],1)],1)},o=[],n=(a("053b"),a("e18c"),a("96db"),a("af86"),a("f1a9"),a("b775")),l=a("99b1");function s(e){return Object(n["a"])({url:l["a"].SparepartsSpare,method:"get",params:e})}function i(e){return Object(n["a"])({url:l["a"].SparepartsSpare,method:"post",data:e})}function p(e,t){return Object(n["a"])({url:l["a"].SparepartsSpare+t+"/",method:"put",data:e})}function c(e){return Object(n["a"])({url:l["a"].SparepartsSpare+e+"/",method:"delete"})}function u(e){return Object(n["a"])({url:l["a"].SpareImportExport,method:"get",params:e,responseType:"blob"})}function m(e){return Object(n["a"])({url:l["a"].SpareImportExport,method:"post",data:e})}var d=a("3e51"),b=a("084b"),f={components:{page:d["a"]},data:function(){return{tableData:[],typeOptions:[],dialogCreateVisible:!1,dialogEditVisible:!1,spareForm:{type:"",name:"",no:"",cost:"",lower:"",upper:"",unit:""},rules:{type:[{required:!1,message:"不能为空",trigger:"blur"}],name:[{required:!0,message:"不能为空",trigger:"blur"}],no:[{required:!0,message:"不能为空",trigger:"blur"}],cost:[{required:!0,message:"不能为空",trigger:"blur"}],lower:[{required:!0,message:"不能为空",trigger:"blur"}],upper:[{required:!0,message:"不能为空",trigger:"blur"}],unit:[{required:!0,message:"不能为空",trigger:"blur"}]},getParams:{page:1,type_name:"",no:"",name:""},currentPage:1,total:1}},created:function(){this.getTableData()},methods:{getTableData:function(){var e=this;s(this.getParams).then((function(t){e.tableData=t.results,e.total=t.count}))},getTypeOptions:function(){var e=this;Object(b["b"])({all:1}).then((function(t){e.typeOptions=t.results}))},visibleChange:function(e){e&&this.getTypeOptions()},changSelect:function(){this.getParams.page=1,this.getTableData()},showCreateDialog:function(){var e=this;this.getTypeOptions(),this.spareForm={type:"",name:"",no:"",cost:"",lower:"",upper:"",unit:""},this.dialogCreateVisible=!0,this.$nextTick((function(){e.$refs.createForm.clearValidate()}))},handleCreate:function(){var e=this;this.$refs.createForm.validate((function(t){t&&i(e.spareForm).then((function(t){e.dialogCreateVisible=!1,e.$message(e.spareForm.name+"创建成功"),e.getTableData()}))}))},showEditDialog:function(e){var t=this;this.getTypeOptions(),this.spareForm=Object.assign({},e),this.dialogEditVisible=!0,this.$nextTick((function(){t.$refs.editForm.clearValidate()}))},handleEdit:function(){var e=this;this.$refs.editForm.validate((function(t){t&&p(e.spareForm,e.spareForm.id).then((function(t){e.dialogEditVisible=!1,e.$message(e.spareForm.name+"修改成功"),e.getTableData()}))}))},handleDelete:function(e){var t=this;this.$confirm("是否确定删除"+e.name+"信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c(e.id).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getParams.page=1,t.getTableData()}))}))},templateDownload:function(){u().then((function(e){var t=document.createElement("a"),a=new Blob([e],{type:"application/vnd.ms-excel"});t.style.display="none",t.href=URL.createObjectURL(a),t.download="备品备件基本信息模板.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))},Upload:function(e){var t=this,a=new FormData;a.append("file",e.file),m(a).then((function(e){t.$message({type:"success",message:"导入成功!"}),t.getParams.page=1,t.getTableData()}))},currentChange:function(e,t){this.getParams.page=e,this.getParams.page_size=t,this.getTableData()}}},g=f,h=a("9ca4"),v=Object(h["a"])(g,r,o,!1,null,null,null);t["default"]=v.exports},"96db":function(e,t,a){"use strict";var r=a("f62c").charAt,o=a("b702"),n=a("99ee"),l="String Iterator",s=o.set,i=o.getterFor(l);n(String,"String",(function(e){s(this,{type:l,string:String(e),index:0})}),(function(){var e,t=i(this),a=t.string,o=t.index;return o>=a.length?{value:void 0,done:!0}:(e=r(a,o),t.index+=e.length,{value:e,done:!1})}))},f62c:function(e,t,a){var r=a("3da3"),o=a("2732"),n=function(e){return function(t,a){var n,l,s=String(o(t)),i=r(a),p=s.length;return i<0||i>=p?e?"":void 0:(n=s.charCodeAt(i),n<55296||n>56319||i+1===p||(l=s.charCodeAt(i+1))<56320||l>57343?e?s.charAt(i):n:e?s.slice(i,i+2):l-56320+(n-55296<<10)+65536)}};e.exports={codeAt:n(!1),charAt:n(!0)}}}]);