(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55fcf19c"],{4921:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},on:{change:t.getTableData,"visible-change":t.visibleChange},model:{value:t.getParams.type_name,callback:function(e){t.$set(t.getParams,"type_name",e)},expression:"getParams.type_name"}},t._l(t.typeOptions,(function(t){return n("el-option",{key:t.global_name,attrs:{label:t.global_name,value:t.global_name}})})),1)],1),n("el-form-item",{attrs:{label:"库存位"}},[n("inventoryPosition",{on:{changSelect:t.changSelect}})],1),n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["location","add"],expression:"['location', 'add']"}],on:{click:t.showCreateDialog}},[t._v("新建")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",type:"index",label:"No",width:"50"}}),n("el-table-column",{attrs:{prop:"type_name",label:"类型"}}),n("el-table-column",{attrs:{prop:"name",label:"库存位"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button-group",[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["location","change"],expression:"['location', 'change']"}],attrs:{size:"mini"},on:{click:function(n){return t.showEditDialog(e.row)}}},[t._v("编辑")]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["location","delete"],expression:"['location', 'delete']"}],attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.row)}}},[t._v(t._s(e.row.used_flag?"停用":"启用")+" ")])],1)]}}])})],1),n("page",{attrs:{"old-page":!1,total:t.total,"current-page":t.getParams.page},on:{currentChange:t.currentChange}}),n("el-dialog",{attrs:{title:"添加位置点",visible:t.dialogCreateVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogCreateVisible=e}}},[n("el-form",{ref:"createForm",attrs:{rules:t.rules,model:t.locationForm}},[n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.locationForm.type,callback:function(e){t.$set(t.locationForm,"type",e)},expression:"locationForm.type"}},t._l(t.typeOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.global_name,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"位置点",prop:"name"}},[n("el-input",{model:{value:t.locationForm.name,callback:function(e){t.$set(t.locationForm,"name",e)},expression:"locationForm.name"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogCreateVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"编辑位置点",visible:t.dialogEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogEditVisible=e}}},[n("el-form",{ref:"editForm",attrs:{rules:t.rules,model:t.locationForm}},[n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.locationForm.type,callback:function(e){t.$set(t.locationForm,"type",e)},expression:"locationForm.type"}},t._l(t.typeOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.global_name,value:t.id}})})),1)],1),n("el-form-item",{attrs:{label:"位置点",prop:"name"}},[n("el-input",{model:{value:t.locationForm.name,callback:function(e){t.$set(t.locationForm,"name",e)},expression:"locationForm.name"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogEditVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleEdit}},[t._v("确 定")])],1)],1)],1)},o=[],r=(n("b0c0"),n("b775")),i=n("99b1");function l(t){return Object(r["a"])({url:i["a"].Location,method:"get",params:t})}function c(t){return Object(r["a"])({url:i["a"].Location,method:"post",data:t})}function s(t,e){return Object(r["a"])({url:i["a"].Location+e+"/",method:"put",data:t})}function u(t){return Object(r["a"])({url:i["a"].Location+t+"/",method:"delete"})}var d=n("8041"),m=n("3e51"),p=n("6336"),b={components:{inventoryPosition:d["a"],page:m["a"]},data:function(){return{formLabelWidth:"auto",tableData:[],typeOptions:[],types:[],dialogCreateVisible:!1,dialogEditVisible:!1,locationForm:{type:"",name:""},rules:{name:[{required:!0,message:"不能为空",trigger:"blur"}]},getParams:{page:1,type_name:[],name:""},currentPage:1,total:1}},created:function(){this.getTableData()},methods:{getTableData:function(){var t=this;l(this.getParams).then((function(e){t.tableData=e.results,t.total=e.count}))},changSelect:function(t){this.getParams.name=t?t.name:"",this.getParams.page=1,this.getTableData()},getTypeOptions:function(){var t=this;Object(p["c"])({all:1,class_name:"备品备件类型"}).then((function(e){t.typeOptions=e.results}))},visibleChange:function(t){t&&this.getTypeOptions()},showCreateDialog:function(){var t=this;this.getTypeOptions(),this.locationForm={type:"",name:""},this.dialogCreateVisible=!0,this.$nextTick((function(){t.$refs.createForm.clearValidate()}))},handleCreate:function(){var t=this;this.$refs.createForm.validate((function(e){e&&c(t.locationForm).then((function(e){t.dialogCreateVisible=!1,t.$message(t.locationForm.name+"创建成功"),t.getTableData()}))}))},showEditDialog:function(t){var e=this;this.getTypeOptions(),this.locationForm=Object.assign({},t),this.dialogEditVisible=!0,this.$nextTick((function(){e.$refs.editForm.clearValidate()}))},handleEdit:function(){var t=this;this.$refs.editForm.validate((function(e){e&&s(t.locationForm,t.locationForm.id).then((function(e){t.dialogEditVisible=!1,t.$message(t.locationForm.name+"修改成功"),t.getTableData()}))}))},handleDelete:function(t){var e=this,n=t.used_flag?"停用":"启用";this.$confirm("此操作将"+n+t.name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u(t.id).then((function(t){e.$message({type:"success",message:"操作成功!"}),e.getTableData()}))}))},currentChange:function(t,e){this.getParams.page=t,this.getParams.page_size=e,this.getTableData()}}},f=b,g=n("2877"),h=Object(g["a"])(f,a,o,!1,null,null,null);e["default"]=h.exports},6336:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"h",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"e",(function(){return u})),n.d(e,"g",(function(){return d})),n.d(e,"a",(function(){return m}));var a=n("b775"),o=n("99b1");function r(t){return Object(a["a"])({url:o["a"].GlobalTypesUrl,method:"get",params:t})}function i(t){return Object(a["a"])({url:o["a"].GlobalTypesUrl,method:"post",data:t})}function l(t,e){return Object(a["a"])({url:o["a"].GlobalTypesUrl+e+"/",method:"put",data:t})}function c(t){return Object(a["a"])({url:o["a"].GlobalTypesUrl+t+"/",method:"delete"})}function s(t){return Object(a["a"])({url:o["a"].GlobalCodesUrl,method:"get",params:t})}function u(t){return Object(a["a"])({url:o["a"].GlobalCodesUrl,method:"post",data:t})}function d(t,e){return Object(a["a"])({url:o["a"].GlobalCodesUrl+e+"/",method:"put",data:t})}function m(t){return Object(a["a"])({url:o["a"].GlobalCodesUrl+t+"/",method:"delete"})}},"6dfa":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return c}));var a=n("b775"),o=n("99b1");function r(t){return Object(a["a"])({url:o["a"].MaterialLocationBinding,method:"get",params:t})}function i(t){return Object(a["a"])({url:o["a"].MaterialLocationBinding,method:"post",data:t})}function l(t,e){return Object(a["a"])({url:o["a"].MaterialLocationBinding+e+"/",method:"put",data:t})}function c(t){return Object(a["a"])({url:o["a"].MaterialLocationBinding+t+"/",method:"delete"})}},d585:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"h",(function(){return i})),n.d(e,"j",(function(){return l})),n.d(e,"f",(function(){return c})),n.d(e,"i",(function(){return s})),n.d(e,"e",(function(){return u})),n.d(e,"l",(function(){return d})),n.d(e,"k",(function(){return m})),n.d(e,"g",(function(){return p})),n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return g}));var a=n("b775"),o=n("99b1");function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:e?o["a"].LocationNameList+e+"/":o["a"].LocationNameList,method:t};return Object.assign(r,n),Object(a["a"])(r)}function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:e?o["a"].SpareInventory+e+"/":o["a"].SpareInventory,method:t};return Object.assign(r,n),Object(a["a"])(r)}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:(e?o["a"].SpareInventory+e+"/":o["a"].SpareInventory)+"check_storage/",method:t};return Object.assign(r,n),Object(a["a"])(r)}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:(e?o["a"].SpareInventory+e+"/":o["a"].SpareInventory)+"put_storage/",method:t};return Object.assign(r,n),Object(a["a"])(r)}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:e?o["a"].SpareInventoryLog+e+"/":o["a"].SpareInventoryLog,method:t};return Object.assign(r,n),Object(a["a"])(r)}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:(e?o["a"].SpareInventory+e+"/":o["a"].SpareInventory)+"out_storage/",method:t};return Object.assign(r,n),Object(a["a"])(r)}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:e?o["a"].SparepartsSpareType+e+"/":o["a"].SparepartsSpareType,method:t};return Object.assign(r,n),Object(a["a"])(r)}function m(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:e?o["a"].SparepartsSpare+e+"/":o["a"].SparepartsSpare,method:t};return Object.assign(r,n),Object(a["a"])(r)}function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:(e?o["a"].SpareInventoryLog+e+"/":o["a"].SpareInventoryLog)+"revocation_log/",method:t};return Object.assign(r,n),Object(a["a"])(r)}function b(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:e?o["a"].InventoryNow+e+"/":o["a"].InventoryNow,method:t};return Object.assign(r,n),Object(a["a"])(r)}function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:e?o["a"].InventoryToday+e+"/":o["a"].InventoryToday,method:t};return Object.assign(r,n),Object(a["a"])(r)}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:e?o["a"].MixGumOutInventoryLog+e+"/":o["a"].MixGumOutInventoryLog,method:t};return Object.assign(r,n),Object(a["a"])(r)}}}]);