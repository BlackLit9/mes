(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d4e3efd"],{"1f6c":function(e,t,a){"use strict";a.d(t,"m",(function(){return i})),a.d(t,"W",(function(){return s})),a.d(t,"G",(function(){return l})),a.d(t,"F",(function(){return o})),a.d(t,"B",(function(){return c})),a.d(t,"K",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"l",(function(){return h})),a.d(t,"M",(function(){return g})),a.d(t,"o",(function(){return f})),a.d(t,"d",(function(){return m})),a.d(t,"D",(function(){return b})),a.d(t,"S",(function(){return v})),a.d(t,"j",(function(){return p})),a.d(t,"I",(function(){return _})),a.d(t,"H",(function(){return O})),a.d(t,"J",(function(){return S})),a.d(t,"n",(function(){return j})),a.d(t,"O",(function(){return M})),a.d(t,"P",(function(){return C})),a.d(t,"A",(function(){return F})),a.d(t,"v",(function(){return k})),a.d(t,"z",(function(){return P})),a.d(t,"i",(function(){return w})),a.d(t,"Q",(function(){return y})),a.d(t,"b",(function(){return U})),a.d(t,"x",(function(){return L})),a.d(t,"u",(function(){return T})),a.d(t,"w",(function(){return x})),a.d(t,"t",(function(){return E})),a.d(t,"c",(function(){return $})),a.d(t,"e",(function(){return I})),a.d(t,"k",(function(){return W})),a.d(t,"h",(function(){return D})),a.d(t,"N",(function(){return N})),a.d(t,"L",(function(){return V})),a.d(t,"y",(function(){return B})),a.d(t,"q",(function(){return H})),a.d(t,"E",(function(){return q})),a.d(t,"s",(function(){return J})),a.d(t,"r",(function(){return z})),a.d(t,"U",(function(){return A})),a.d(t,"T",(function(){return R})),a.d(t,"p",(function(){return G})),a.d(t,"R",(function(){return K})),a.d(t,"V",(function(){return Q})),a.d(t,"C",(function(){return Y})),a.d(t,"g",(function(){return X})),a.d(t,"a",(function(){return Z}));var n=a("b775"),r=a("99b1");function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:r["a"].GlobalCodesUrl,method:e};return Object.assign(a,t),Object(n["a"])(a)}function s(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].WorkSchedulesUrl+t+"/":r["a"].WorkSchedulesUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].PlanSchedulesUrl+t+"/":r["a"].PlanSchedulesUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].PlanScheduleUrl+t+"/":r["a"].PlanScheduleUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function c(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MaterialsUrl+t+"/":r["a"].MaterialsUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ProductInfosUrl+t+"/":r["a"].ProductInfosUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:r["a"].CopyProductInfosUrl,method:e};return Object.assign(a,t),Object(n["a"])(a)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:r["a"].EquipUrl,method:e};return Object.assign(a,t),Object(n["a"])(a)}function g(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].RubberMaterialUrl+t+"/":r["a"].RubberMaterialUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function f(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].InternalMixerUrl+t+"/":r["a"].InternalMixerUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function m(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ClassesListUrl+t+"/":r["a"].ClassesListUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function b(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].PalletFeedBacksUrl+t+"/":r["a"].PalletFeedBacksUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function v(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].TrainsFeedbacksUrl+t+"/":r["a"].TrainsFeedbacksUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function p(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].EchartsListUrl+t+"/":r["a"].EchartsListUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function _(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ProductClassesPlanUrl+t+"/":r["a"].ProductClassesPlanUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function O(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ProductClassesPlanPanycreateUrl+t+"/":r["a"].ProductClassesPlanPanycreateUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function S(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ProductDayPlanNotice+t+"/":r["a"].ProductDayPlanNotice,method:e};return Object.assign(i,a),Object(n["a"])(i)}function j(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].HomePageUrl+t+"/":r["a"].HomePageUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function M(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].TestIndicators+t+"/":r["a"].TestIndicators,method:e};return Object.assign(i,a),Object(n["a"])(i)}function C(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].TestSubTypes+t+"/":r["a"].TestSubTypes,method:e};return Object.assign(i,a),Object(n["a"])(i)}function F(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MaterialTestOrders+t+"/":r["a"].MaterialTestOrders,method:e};return Object.assign(i,a),Object(n["a"])(i)}function k(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MatIndicatorTab+t+"/":r["a"].MatIndicatorTab,method:e};return Object.assign(i,a),Object(n["a"])(i)}function P(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MaterialDataPoints+t+"/":r["a"].MaterialDataPoints,method:e};return Object.assign(i,a),Object(n["a"])(i)}function w(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].DataPoints+t+"/":r["a"].DataPoints,method:e};return Object.assign(i,a),Object(n["a"])(i)}function y(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].TestTypes+t+"/":r["a"].TestTypes,method:e};return Object.assign(i,a),Object(n["a"])(i)}function U(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].BatchingMaterials+t+"/":r["a"].BatchingMaterials,method:e};return Object.assign(i,a),Object(n["a"])(i)}function L(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MatTestMethods+t+"/":r["a"].MatTestMethods,method:e};return Object.assign(i,a),Object(n["a"])(i)}function T(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MatDataPointIndicators+t+"/":r["a"].MatDataPointIndicators,method:e};return Object.assign(i,a),Object(n["a"])(i)}function x(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MatTestIndicatorMethods+t+"/":r["a"].MatTestIndicatorMethods,method:e};return Object.assign(i,a),Object(n["a"])(i)}function E(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].LevelResult+t+"/":r["a"].LevelResult,method:e};return Object.assign(i,a),Object(n["a"])(i)}function $(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].ClassesBanburySummary+t+"/":r["a"].ClassesBanburySummary,method:e};return Object.assign(i,a),Object(n["a"])(i)}function I(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].CollectTrainsFeed+t+"/":r["a"].CollectTrainsFeed,method:e};return Object.assign(i,a),Object(n["a"])(i)}function W(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].EquipBanburySummary+t+"/":r["a"].EquipBanburySummary,method:e};return Object.assign(i,a),Object(n["a"])(i)}function D(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].CutTimeCollect+t+"/":r["a"].CutTimeCollect,method:e};return Object.assign(i,a),Object(n["a"])(i)}function N(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].SumSollectTrains+t+"/":r["a"].SumSollectTrains,method:e};return Object.assign(i,a),Object(n["a"])(i)}function V(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].PutPlanManagement+t+"/":r["a"].PutPlanManagement,method:e};return Object.assign(i,a),Object(n["a"])(i)}function B(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MaterialCount+t+"/":r["a"].MaterialCount,method:e};return Object.assign(i,a),Object(n["a"])(i)}function H(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].InventoryLog+t+"/":r["a"].InventoryLog,method:e};return Object.assign(i,a),Object(n["a"])(i)}function q(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].PalletTrainsFeedbacks+t+"/":r["a"].PalletTrainsFeedbacks,method:e};return Object.assign(i,a),Object(n["a"])(i)}function J(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].LbPlanManagement+t+"/":r["a"].LbPlanManagement,method:e};return Object.assign(i,a),Object(n["a"])(i)}function z(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].LabelPrint+t+"/":r["a"].LabelPrint,method:e};return Object.assign(i,a),Object(n["a"])(i)}function A(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].UnqualifiedTrains+t+"/":r["a"].UnqualifiedTrains,method:e};return Object.assign(i,a),Object(n["a"])(i)}function R(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].UnqualifiedDealOrders+t+"/":r["a"].UnqualifiedDealOrders,method:e};return Object.assign(i,a),Object(n["a"])(i)}function G(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].IntervalOutputStatistics+t+"/":r["a"].IntervalOutputStatistics,method:e};return Object.assign(i,a),Object(n["a"])(i)}function K(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].TrainsFeedbacksApiview+t+"/":r["a"].TrainsFeedbacksApiview,method:e};return Object.assign(i,a),Object(n["a"])(i)}function Q(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].WeighInformationUrl+t+"/":r["a"].WeighInformationUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function Y(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].MixerInformationUrl+t+"/":r["a"].MixerInformationUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function X(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].CurveInformationUrl+t+"/":r["a"].CurveInformationUrl,method:e};return Object.assign(i,a),Object(n["a"])(i)}function Z(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={url:t?r["a"].AlarmLogList+t+"/":r["a"].AlarmLogList,method:e};return Object.assign(i,a),Object(n["a"])(i)}},2936:function(e,t,a){},"3e51":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-pagination",{attrs:{layout:"total,prev,pager,next",total:e.total,"page-size":e.pageSize,"current-page":e._currentPage},on:{"update:currentPage":function(t){e._currentPage=t},"update:current-page":function(t){e._currentPage=t},"current-change":e.currentChange}})],1)},r=[],i=(a("a9e3"),{props:{total:{type:Number,default:0},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},data:function(){return{}},computed:{_currentPage:{get:function(){return this.currentPage},set:function(){return 1}}},methods:{currentChange:function(e){this.$emit("currentChange",e)}}}),s=i,l=a("2877"),o=Object(l["a"])(s,n,r,!1,null,null,null);t["a"]=o.exports},cf45:function(e,t,a){"use strict";t["a"]={formLabelWidth:"120px",statusList:[{id:1,name:"完成"},{id:2,name:"执行中"},{id:3,name:"失败"},{id:4,name:"新建"},{id:5,name:"关闭"}]}},d3da:function(e,t,a){"use strict";var n=a("2936"),r=a.n(n);r.a},ef46:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-form",{attrs:{inline:!0}},[e.permissionObj.workschedule.indexOf("add")>-1?a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{on:{click:e.showDialogCreateChangeShiftsManage}},[e._v("新建")])],1):e._e()],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.workSchedules}},[a("el-table-column",{attrs:{prop:"schedule_no",label:"倒班代码",width:"80px"}}),a("el-table-column",{attrs:{prop:"schedule_name",label:"倒班名"}}),a("el-table-column",{attrs:{prop:"period",label:"周期天数",width:"60px"}}),e._l(e.classes,(function(t,n){return a("el-table-column",{key:n,attrs:{label:t.global_name}},[a("el-table-column",{attrs:{label:"开始"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(e.getTimeCell(a.row,t.id,"start_time"))+" ")]}}],null,!0)}),a("el-table-column",{attrs:{label:"结束"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(e.getTimeCell(a.row,t.id,"end_time"))+" ")]}}],null,!0)}),a("el-table-column",{attrs:{label:"总时间"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(e.getSum(a.row,t.id))+" ")]}}],null,!0)})],1)})),a("el-table-column",{attrs:{align:"center",formatter:e.formatter,prop:"used_flag",label:"使用与否",width:"60px"}}),a("el-table-column",{attrs:{width:"150",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[e.permissionObj.workschedule.indexOf("change")>-1?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.showEditChangeShiftsManageDialog(t.row)}}},[e._v("编辑 ")]):e._e(),e.permissionObj.workschedule.indexOf("delete")>-1?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDeleteChangeShiftsManage(t.row)}}},[e._v(e._s(t.row.use_flag?"停用":"启用")+" ")]):e._e()],1)]}}])})],2),a("pagination",{attrs:{total:e.total,"current-page":e.getParams.page},on:{currentChange:e.currentChange}}),a("el-dialog",{attrs:{title:"添加倒班时间",visible:e.dialogCreateChangeShiftsManageVisible},on:{"update:visible":function(t){e.dialogCreateChangeShiftsManageVisible=t}}},[a("el-form",{ref:"shiftsManageForm",attrs:{model:e.changeShiftsManageForm,rules:e.rules}},[a("el-form-item",{attrs:{error:e.changeShiftsManageFormError.schedule_no,label:"倒班代码","label-width":e.formLabelWidth,prop:"schedule_no"}},[a("el-input",{model:{value:e.changeShiftsManageForm.schedule_no,callback:function(t){e.$set(e.changeShiftsManageForm,"schedule_no",t)},expression:"changeShiftsManageForm.schedule_no"}})],1),a("el-form-item",{attrs:{error:e.changeShiftsManageFormError.schedule_name,label:"倒班名","label-width":e.formLabelWidth,prop:"schedule_name"}},[a("el-input",{model:{value:e.changeShiftsManageForm.schedule_name,callback:function(t){e.$set(e.changeShiftsManageForm,"schedule_name",t)},expression:"changeShiftsManageForm.schedule_name"}})],1),a("el-form-item",{attrs:{error:e.changeShiftsManageFormError.description,label:"描述","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.changeShiftsManageForm.description,callback:function(t){e.$set(e.changeShiftsManageForm,"description",t)},expression:"changeShiftsManageForm.description"}})],1),a("el-form-item",{attrs:{label:"周期天数","label-width":e.formLabelWidth}},[a("el-input-number",{attrs:{min:1,max:30},on:{blur:function(t){return e.period_change(e.changeShiftsManageForm,e.changeShiftsManageForm.period)}},model:{value:e.changeShiftsManageForm.period,callback:function(t){e.$set(e.changeShiftsManageForm,"period",t)},expression:"changeShiftsManageForm.period"}})],1),e._l(e.changeShiftsManageForm.classesdetail_set,(function(t,n){return a("div",{key:n},[a("el-divider",[e._v(e._s(t.classes_name))]),a("el-form-item",{attrs:{label:"时间范围","label-width":e.formLabelWidth}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"开始时间"},model:{value:t.start_time,callback:function(a){e.$set(t,"start_time",a)},expression:"classesdetail.start_time"}}),a("span",[e._v("至")]),a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"结束时间"},model:{value:t.end_time,callback:function(a){e.$set(t,"end_time",a)},expression:"classesdetail.end_time"}})],1),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"classesdetail.description"}})],1)],1)}))],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateChangeShiftsManageVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreateChangeShifts}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑倒班时间",visible:e.dialogEditChangeShiftsManageVisible},on:{"update:visible":function(t){e.dialogEditChangeShiftsManageVisible=t}}},[a("el-form",{ref:"shiftsManageEditForm",attrs:{model:e.changeShiftsManageForm,rules:e.rules}},[a("el-form-item",{attrs:{error:e.changeShiftsManageFormError.schedule_no,label:"倒班代码","label-width":e.formLabelWidth,prop:"schedule_no"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.changeShiftsManageForm.schedule_no,callback:function(t){e.$set(e.changeShiftsManageForm,"schedule_no",t)},expression:"changeShiftsManageForm.schedule_no"}})],1),a("el-form-item",{attrs:{error:e.changeShiftsManageFormError.schedule_name,label:"倒班名","label-width":e.formLabelWidth,prop:"schedule_name"}},[a("el-input",{model:{value:e.changeShiftsManageForm.schedule_name,callback:function(t){e.$set(e.changeShiftsManageForm,"schedule_name",t)},expression:"changeShiftsManageForm.schedule_name"}})],1),a("el-form-item",{attrs:{error:e.changeShiftsManageFormError.description,label:"描述","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.changeShiftsManageForm.description,callback:function(t){e.$set(e.changeShiftsManageForm,"description",t)},expression:"changeShiftsManageForm.description"}})],1),a("el-form-item",{attrs:{label:"周期天数","label-width":e.formLabelWidth}},[a("el-input-number",{attrs:{min:1,max:30},on:{blur:function(t){return e.period_change(e.changeShiftsManageForm,e.changeShiftsManageForm.period)}},model:{value:e.changeShiftsManageForm.period,callback:function(t){e.$set(e.changeShiftsManageForm,"period",e._n(t))},expression:"changeShiftsManageForm.period"}})],1),e._l(e.changeShiftsManageForm.classesdetail_set,(function(t,n){return a("div",{key:n},[a("el-divider",[e._v(e._s(t.classes_name))]),a("el-form-item",{attrs:{label:"时间范围","label-width":e.formLabelWidth}},[a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"开始时间"},model:{value:t.start_time,callback:function(a){e.$set(t,"start_time",a)},expression:"classesdetail.start_time"}}),a("span",[e._v("至")]),a("el-time-picker",{attrs:{"value-format":"HH:mm:ss",placeholder:"结束时间"},model:{value:t.end_time,callback:function(a){e.$set(t,"end_time",a)},expression:"classesdetail.end_time"}})],1),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"classesdetail.description"}})],1)],1)}))],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEditChangeShiftsManageVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleEditChangeShifts}},[e._v("确 定")])],1)],1)],1)},r=[],i=(a("4de4"),a("7db0"),a("a434"),a("a9e3"),a("b680"),a("ac1f"),a("1276"),a("5530")),s=a("5a0c"),l=a.n(s),o=a("1f6c"),c=a("3e51"),u=a("cf45"),d=a("2f62"),h={components:{pagination:c["a"]},data:function(){return{loading:!0,formLabelWidth:u["a"].formLabelWidth,tableData:[],total:0,getParams:{page:1},workSchedules:[],dialogCreateChangeShiftsManageVisible:!1,dialogEditChangeShiftsManageVisible:!1,changeShiftsManageForm:{schedule_no:"",schedule_name:"",description:"",period:0,classesdetail_set:[{start_time:null,end_time:null,description:"",classes_name:"",classes:null}]},changeShiftsManageFormError:{schedule_no:"",schedule_name:"",description:""},classes:[],rules:{schedule_no:[{required:!0,message:"请输入倒班代码",trigger:"blur"}],schedule_name:[{required:!0,message:"请输入倒班名",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}]}}},computed:Object(i["a"])({},Object(d["b"])(["permission"])),created:function(){this.permissionObj=this.permission;var e=this;Object(o["m"])("get",{params:{class_name:"班次"}}).then((function(t){e.classes=t.results})).catch((function(e){})),this.getList()},methods:{getList:function(){this.loading=!0;var e=this;Object(o["W"])("get",null,{params:this.getParams}).then((function(t){e.loading=!1,e.total=t.count,e.tableData=t.results,e.afterGetData()})).catch((function(){e.loading=!1}))},currentChange:function(e){this.getParams.page=e,this.getList()},initChangeShiftsManageForm:function(){this.changeShiftsManageForm={schedule_no:"",schedule_name:"",description:"",period:0,classesdetail_set:[]};for(var e=0;e<this.classes.length;++e)this.changeShiftsManageForm.classesdetail_set.push({start_time:null,end_time:null,description:"",classes_name:this.classes[e].global_name,classes:this.classes[e].id})},clearChangeShiftsManageFormError:function(){this.changeShiftsManageFormError={schedule_no:"",schedule_name:"",description:""}},afterGetData:function(){this.workSchedules=this.tableData},showDialogCreateChangeShiftsManage:function(){this.initChangeShiftsManageForm(),this.dialogCreateChangeShiftsManageVisible=!0},handleCreateChangeShifts:function(){var e=this,t=JSON.parse(JSON.stringify(this.changeShiftsManageForm));this.$refs["shiftsManageForm"].validate((function(a){if(!a)return!1;e.clearChangeShiftsManageFormError();for(var n=0;n<t.classesdetail_set.length;++n)t.classesdetail_set[n].start_time&&t.classesdetail_set[n].end_time||(t.classesdetail_set.splice(n,1),--n);0!==t.classesdetail_set.length?Object(o["W"])("post",null,{data:t}).then((function(t){e.dialogCreateChangeShiftsManageVisible=!1,e.$message.success(e.changeShiftsManageForm.schedule_name+"创建成功"),e.getList()})).catch((function(e){})):e.$message("请填写班次")}))},showEditChangeShiftsManageDialog:function(e){this.clearChangeShiftsManageFormError(),this.changeShiftsManageForm=JSON.parse(JSON.stringify(e)),this.dialogEditChangeShiftsManageVisible=!0},handleEditChangeShifts:function(){this.clearChangeShiftsManageFormError();var e=this,t=JSON.parse(JSON.stringify(this.changeShiftsManageForm));this.$refs["shiftsManageEditForm"].validate((function(a){if(!a)return!1;for(var n=0;n<t.classesdetail_set.length;++n)t.classesdetail_set[n].start_time&&t.classesdetail_set[n].end_time||(t.classesdetail_set.splice(n,1),--n);Object(o["W"])("put",t.id,{data:t}).then((function(a){e.dialogEditChangeShiftsManageVisible=!1,e.$message(t.schedule_name+"修改成功"),e.getList()})).catch((function(e){}))}))},handleDeleteChangeShiftsManage:function(e){var t=this,a=e.use_flag?"停用":"启用";this.$confirm("此操作将"+a+e.schedule_name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["W"])("delete",e.id).then((function(e){t.$message({type:"success",message:"操作成功!"}),t.getList()})).catch((function(e){t.$message.error(e)}))})).catch((function(){}))},getCellText:function(e,t,a){var n="夜班";switch(t){case 0:n="早班";break;case 1:n="中班";break}var r=e.classesdetail_set.find((function(e){return e.classes_name===n}));if(r)return r[a]},getSum:function(e,t){var a=e.classesdetail_set.filter((function(e){return Number(e.classes)===Number(t)}));if(a[0]){var n=a[0].start_time.split(":"),r=a[0].end_time.split(":"),i=l()().set("hour",n[0]).set("minute",n[1]).set("second",n[2]),s=l()().set("hour",r[0]).set("minute",r[1]).set("second",r[2]),o=s.diff(i,"minute");return o<0&&(o=-o),(o/60).toFixed(2)}},getTimeCell:function(e,t,a){var n=e.classesdetail_set.filter((function(e){return Number(e.classes)===Number(t)}));return n[0]?n[0][a]:""},formatter:function(e,t){return e.use_flag?"Y":"N"},period_change:function(e,t){t||(e.period=1)}}},g=h,f=(a("d3da"),a("2877")),m=Object(f["a"])(g,n,r,!1,null,"9e9fb59a",null);t["default"]=m.exports}}]);