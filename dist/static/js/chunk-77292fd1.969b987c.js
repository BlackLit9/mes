(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77292fd1"],{1:function(t,e){},"1f6c":function(t,e,n){"use strict";n.d(e,"n",(function(){return l})),n.d(e,"Z",(function(){return i})),n.d(e,"J",(function(){return o})),n.d(e,"I",(function(){return s})),n.d(e,"E",(function(){return u})),n.d(e,"N",(function(){return c})),n.d(e,"f",(function(){return d})),n.d(e,"l",(function(){return f})),n.d(e,"P",(function(){return m})),n.d(e,"r",(function(){return b})),n.d(e,"d",(function(){return g})),n.d(e,"G",(function(){return h})),n.d(e,"V",(function(){return p})),n.d(e,"j",(function(){return v})),n.d(e,"L",(function(){return _})),n.d(e,"K",(function(){return O})),n.d(e,"M",(function(){return j})),n.d(e,"o",(function(){return y})),n.d(e,"R",(function(){return w})),n.d(e,"S",(function(){return P})),n.d(e,"D",(function(){return x})),n.d(e,"y",(function(){return T})),n.d(e,"C",(function(){return S})),n.d(e,"i",(function(){return k})),n.d(e,"T",(function(){return U})),n.d(e,"b",(function(){return M})),n.d(e,"A",(function(){return L})),n.d(e,"x",(function(){return C})),n.d(e,"z",(function(){return D})),n.d(e,"w",(function(){return I})),n.d(e,"c",(function(){return q})),n.d(e,"e",(function(){return R})),n.d(e,"k",(function(){return A})),n.d(e,"h",(function(){return F})),n.d(e,"Q",(function(){return $})),n.d(e,"O",(function(){return N})),n.d(e,"m",(function(){return B})),n.d(e,"B",(function(){return E})),n.d(e,"t",(function(){return V})),n.d(e,"H",(function(){return z})),n.d(e,"v",(function(){return J})),n.d(e,"u",(function(){return Q})),n.d(e,"X",(function(){return W})),n.d(e,"W",(function(){return Y})),n.d(e,"s",(function(){return G})),n.d(e,"U",(function(){return H})),n.d(e,"Y",(function(){return K})),n.d(e,"F",(function(){return X})),n.d(e,"g",(function(){return Z})),n.d(e,"a",(function(){return tt})),n.d(e,"p",(function(){return et})),n.d(e,"q",(function(){return nt}));var a=n("b775"),r=n("99b1");function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].GlobalCodesUrl,method:t};return Object.assign(n,e),Object(a["a"])(n)}function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].WorkSchedulesUrl+e+"/":r["a"].WorkSchedulesUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].PlanSchedulesUrl+e+"/":r["a"].PlanSchedulesUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].PlanScheduleUrl+e+"/":r["a"].PlanScheduleUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].MaterialsUrl+e+"/":r["a"].MaterialsUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].ProductInfosUrl+e+"/":r["a"].ProductInfosUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].CopyProductInfosUrl,method:t};return Object.assign(n,e),Object(a["a"])(n)}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].EquipUrl,method:t};return Object.assign(n,e),Object(a["a"])(n)}function m(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].RubberMaterialUrl+e+"/":r["a"].RubberMaterialUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function b(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].InternalMixerUrl+e+"/":r["a"].InternalMixerUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].ClassesListUrl+e+"/":r["a"].ClassesListUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function h(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].PalletFeedBacksUrl+e+"/":r["a"].PalletFeedBacksUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].TrainsFeedbacksUrl+e+"/":r["a"].TrainsFeedbacksUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].EchartsListUrl+e+"/":r["a"].EchartsListUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function _(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].ProductClassesPlanUrl+e+"/":r["a"].ProductClassesPlanUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function O(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].ProductClassesPlanPanycreateUrl+e+"/":r["a"].ProductClassesPlanPanycreateUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function j(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].ProductDayPlanNotice+e+"/":r["a"].ProductDayPlanNotice,method:t};return Object.assign(l,n),Object(a["a"])(l)}function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].HomePageUrl+e+"/":r["a"].HomePageUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].TestIndicators+e+"/":r["a"].TestIndicators,method:t};return Object.assign(l,n),Object(a["a"])(l)}function P(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].TestSubTypes+e+"/":r["a"].TestSubTypes,method:t};return Object.assign(l,n),Object(a["a"])(l)}function x(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].MaterialTestOrders+e+"/":r["a"].MaterialTestOrders,method:t};return Object.assign(l,n),Object(a["a"])(l)}function T(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].MatIndicatorTab+e+"/":r["a"].MatIndicatorTab,method:t};return Object.assign(l,n),Object(a["a"])(l)}function S(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].MaterialDataPoints+e+"/":r["a"].MaterialDataPoints,method:t};return Object.assign(l,n),Object(a["a"])(l)}function k(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].DataPoints+e+"/":r["a"].DataPoints,method:t};return Object.assign(l,n),Object(a["a"])(l)}function U(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].TestTypes+e+"/":r["a"].TestTypes,method:t};return Object.assign(l,n),Object(a["a"])(l)}function M(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].BatchingMaterials+e+"/":r["a"].BatchingMaterials,method:t};return Object.assign(l,n),Object(a["a"])(l)}function L(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].MatTestMethods+e+"/":r["a"].MatTestMethods,method:t};return Object.assign(l,n),Object(a["a"])(l)}function C(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].MatDataPointIndicators+e+"/":r["a"].MatDataPointIndicators,method:t};return Object.assign(l,n),Object(a["a"])(l)}function D(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].MatTestIndicatorMethods+e+"/":r["a"].MatTestIndicatorMethods,method:t};return Object.assign(l,n),Object(a["a"])(l)}function I(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].LevelResult+e+"/":r["a"].LevelResult,method:t};return Object.assign(l,n),Object(a["a"])(l)}function q(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].ClassesBanburySummary+e+"/":r["a"].ClassesBanburySummary,method:t};return Object.assign(l,n),Object(a["a"])(l)}function R(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].CollectTrainsFeed+e+"/":r["a"].CollectTrainsFeed,method:t};return Object.assign(l,n),Object(a["a"])(l)}function A(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].EquipBanburySummary+e+"/":r["a"].EquipBanburySummary,method:t};return Object.assign(l,n),Object(a["a"])(l)}function F(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].CutTimeCollect+e+"/":r["a"].CutTimeCollect,method:t};return Object.assign(l,n),Object(a["a"])(l)}function $(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].SumSollectTrains+e+"/":r["a"].SumSollectTrains,method:t};return Object.assign(l,n),Object(a["a"])(l)}function N(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].PutPlanManagement+e+"/":r["a"].PutPlanManagement,method:t};return Object.assign(l,n),Object(a["a"])(l)}function B(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].FinalPlanManagement+e+"/":r["a"].FinalPlanManagement,method:t};return Object.assign(l,n),Object(a["a"])(l)}function E(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].MaterialCount+e+"/":r["a"].MaterialCount,method:t};return Object.assign(l,n),Object(a["a"])(l)}function V(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].InventoryLog+e+"/":r["a"].InventoryLog,method:t};return Object.assign(l,n),Object(a["a"])(l)}function z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].PalletTrainsFeedbacks+e+"/":r["a"].PalletTrainsFeedbacks,method:t};return Object.assign(l,n),Object(a["a"])(l)}function J(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].LbPlanManagement+e+"/":r["a"].LbPlanManagement,method:t};return Object.assign(l,n),Object(a["a"])(l)}function Q(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].LabelPrint+e+"/":r["a"].LabelPrint,method:t};return Object.assign(l,n),Object(a["a"])(l)}function W(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].UnqualifiedTrains+e+"/":r["a"].UnqualifiedTrains,method:t};return Object.assign(l,n),Object(a["a"])(l)}function Y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].UnqualifiedDealOrders+e+"/":r["a"].UnqualifiedDealOrders,method:t};return Object.assign(l,n),Object(a["a"])(l)}function G(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].IntervalOutputStatistics+e+"/":r["a"].IntervalOutputStatistics,method:t};return Object.assign(l,n),Object(a["a"])(l)}function H(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].TrainsFeedbacksApiview+e+"/":r["a"].TrainsFeedbacksApiview,method:t};return Object.assign(l,n),Object(a["a"])(l)}function K(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].WeighInformationUrl+e+"/":r["a"].WeighInformationUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function X(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].MixerInformationUrl+e+"/":r["a"].MixerInformationUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].CurveInformationUrl+e+"/":r["a"].CurveInformationUrl,method:t};return Object.assign(l,n),Object(a["a"])(l)}function tt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={url:e?r["a"].AlarmLogList+e+"/":r["a"].AlarmLogList,method:t};return Object.assign(l,n),Object(a["a"])(l)}function et(t){return Object(a["a"])({url:r["a"].ImportMaterialMestMrders,method:"post",data:t})}function nt(t){return Object(a["a"])({url:r["a"].ImportMaterialMestMrders,method:"get",params:t,responseType:"blob"})}},2:function(t,e){},3:function(t,e){},"4b5b":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container details_style"},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"日期"}},[n("el-date-picker",{attrs:{clearable:!1,type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:t.dayTimeChanged},model:{value:t.getParams.day_time,callback:function(e){t.$set(t.getParams,"day_time",e)},expression:"getParams.day_time"}})],1),n("el-form-item",{attrs:{label:"机台"}},[n("equip-select",{attrs:{equip_no_props:t.getParams.equip_no},on:{"update:equip_no_props":function(e){return t.$set(t.getParams,"equip_no",e)},changeSearch:t.equipSelected}})],1),n("el-form-item",{attrs:{label:"胶料"}},[n("all-product-no-select",{on:{productBatchingChanged:t.productBatchingChanged}})],1),n("el-form-item",{attrs:{label:"班次"}},[n("class-select",{on:{classSelected:t.classSelected}})],1),n("el-form-item",{attrs:{label:"段次"}},[n("stage-select",{on:{change:t.stageChange},model:{value:t.getParams.stage,callback:function(e){t.$set(t.getParams,"stage",e)},expression:"getParams.stage"}})],1),n("el-form-item",{attrs:{label:"综合检测结果"}},[n("el-select",{attrs:{placeholder:"请选择",clearable:""},on:{change:t.valueResultFun},model:{value:t.getParams.is_qualified,callback:function(e){t.$set(t.getParams,"is_qualified",e)},expression:"getParams.is_qualified"}},t._l(t.options,(function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t.bool}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.clickQuery}},[t._v("查询")])],1),n("br"),n("el-form-item",[n("el-button",{on:{click:function(e){t.filterDialogVisible=!0}}},[t._v(" 显示过滤界面 ")])],1),n("el-form-item",[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["result_info","export"],expression:"['result_info','export']"}],on:{click:t.exportExcel}},[t._v(" 导出 ")])],1)],1),n("u-table",{directives:[{name:"el-table-infinite-scroll",rawName:"v-el-table-infinite-scroll",value:t.infiniteScroll,expression:"infiniteScroll"}],staticStyle:{height:"auto"},attrs:{data:t.testOrders,"fixed-columns-roll":"",border:"",fit:"","row-id":"id","use-virtual":"","max-height":"600",size:"mini","tree-config":{children:"children",expandAll:!1,lazy:!0,load:t.load,hasChildren:"hasChildren"},"data-changes-scroll-top":!1,"row-class-name":t.tableRowClassName}},[n("u-table-column",{attrs:{label:"生产信息",align:"center"}},[n("u-table-column",{attrs:{label:"工厂日期","min-width":"90px",prop:"production_factory_date",align:"center","tree-node":!0},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return n.production_factory_date?[t._v(" "+t._s(n.production_factory_date.split(" ")[0])+" ")]:void 0}}],null,!0)}),n("u-table-column",{attrs:{label:"生产班次/班组",prop:"class_group","min-width":"55px"}}),n("u-table-column",{attrs:{align:"center",label:"生产机台","min-width":"50px",prop:"production_equip_no"}}),n("u-table-column",{attrs:{label:"胶料编码","min-width":"105px",align:"center",prop:"product_no"}}),n("u-table-column",{attrs:{label:"车次",align:"center","min-width":"35px",prop:"actual_trains"}}),n("u-table-column",{attrs:{label:"检测状态","min-width":"35px",prop:"test_status",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("div",{class:"复检"===a.test_status?"test_type_name_style":""},[t._v(" "+t._s(a.test_status)+" ")])]}}])})],1),t._l(t.testTypeList.filter((function(t){return t.show})),(function(e){return n("u-table-column",{key:e.test_type_name,attrs:{align:"center",label:e.test_type_name}},[t._l(e.data_indicator_detail.filter((function(t){return t.show})),(function(a){return n("u-table-column",{key:e.test_type_name+a.detail,attrs:{"min-width":"55px",label:a.detail,align:"center"},scopedSlots:t._u([{key:"default",fn:function(r){var l=r.row;return[n("div",{class:1!==t.getDataPoint(e.test_type_name,a.detail,l.order_results,"level")&&""!==t.getDataPoint(e.test_type_name,a.detail,l.order_results,"level")?"test_type_name_style":""},[t._v(" "+t._s(t.getDataPoint(e.test_type_name,a.detail,l.order_results,"value"))+" ")])]}}],null,!0)})})),"门尼"===e.test_type_name||"流变"===e.test_type_name?n("u-table-column",{attrs:{label:"检测机台","min-width":"50px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(" "+t._s(t.getDataPoint(e.test_type_name,"maxLevelItem",a.order_results,"machine_name"))+" ")]}}],null,!0)}):t._e(),n("u-table-column",{attrs:{"min-width":"50px",label:"合格区间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(" "+t._s(t.getDataPoint(e.test_type_name,"maxLevelItem",a.order_results,"upper_lower"))+" ")]}}],null,!0)}),n("u-table-column",{attrs:{"min-width":"35px",label:"等级",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(" "+t._s(t.getDataPoint(e.test_type_name,"maxLevelItem",a.order_results,"level"))+" ")]}}],null,!0)})],2)})),n("u-table-column",{attrs:{label:"综合等级","min-width":"35px",prop:"level",align:"center"}}),n("u-table-column",{attrs:{label:"综合检测结果","min-width":"60px",prop:"mes_result",align:"center"}})],2),n("el-dialog",{attrs:{title:"选择过滤",visible:t.filterDialogVisible},on:{"update:visible":function(e){t.filterDialogVisible=e}}},[n("el-table",{attrs:{border:"",data:t.testTypeList}},[n("el-table-column",{attrs:{label:"选择","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-checkbox",{model:{value:a.show,callback:function(e){t.$set(a,"show",e)},expression:"row.show"}})]}}])}),n("el-table-column",{attrs:{label:"实验方法","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.test_type_name))])]}}])}),n("el-table-column",{attrs:{label:"检测项"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._l(a.data_indicator_detail,(function(e){return[n("el-checkbox",{key:e.detail,model:{value:e.show,callback:function(n){t.$set(e,"show",n)},expression:"item.show"}},[t._v(t._s(e.detail))])]}))]}}])})],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.filterDialogVisible=!1}}},[t._v("关闭")])],1)],1),n("el-dialog",{attrs:{title:"胶料信息卡",width:"80%",visible:t.testCardDialogVisible},on:{"update:visible":function(e){t.testCardDialogVisible=e}}},[n("test-card",{ref:"testCard"})],1),n("DetailsUTable",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"out-table","test-orders":t.ALLData,"test-type-list":t.testTypeList}})],1)},r=[],l=(n("99af"),n("d81d"),n("a9e3"),n("2909")),i=n("5530"),o=(n("96cf"),n("1da1")),s=n("5a0c"),u=n.n(s),c=n("4090"),d=n("cfc4"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-select",{attrs:{value:t.id,clearable:"",placeholder:"请选择"},on:{change:function(e){return t.$emit("change",e)},"visible-change":t.visibleChange}},t._l(t.stageOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.global_name,value:t.global_name}})})),1)},m=[],b=n("daa1"),g={model:{prop:"id",event:"change"},props:{id:{type:[Number,String],required:!1,default:void 0}},data:function(){return{stageOptions:[]}},created:function(){this.getStageOptions()},methods:{getStageOptions:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["i"])("get");case 2:n=e.sent,t.stageOptions=n.results;case 4:case"end":return e.stop()}}),e)})))()},visibleChange:function(t){t&&this.getStageOptions()}}},h=g,p=n("2877"),v=Object(p["a"])(h,f,m,!1,null,null,null),_=v.exports,O=n("5dce"),j=n("89c6"),y=n("521e"),w=n("21a6"),P=n.n(w),x=n("1146"),T=n.n(x),S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("u-table",{staticStyle:{height:"auto"},attrs:{id:"out-table",data:t.testOrders,"fixed-columns-roll":"",border:"",fit:"","row-id":"id","max-height":"600",size:"mini","tree-config":{children:"children",expandAll:!1,lazy:!0,hasChildren:"hasChildren"},"data-changes-scroll-top":!1}},[n("u-table-column",{attrs:{label:"生产信息",align:"center"}},[n("u-table-column",{attrs:{label:"工厂日期","min-width":"90px",prop:"production_factory_date",align:"center","tree-node":!0},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return n.production_factory_date?[t._v(" "+t._s(n.production_factory_date.split(" ")[0])+" ")]:void 0}}],null,!0)}),n("u-table-column",{attrs:{label:"生产班次/班组",prop:"class_group","min-width":"75px"}}),n("u-table-column",{attrs:{align:"center",label:"生产机台","min-width":"50px",prop:"production_equip_no"}}),n("u-table-column",{attrs:{label:"胶料编码","min-width":"105px",align:"center",prop:"product_no"}}),n("u-table-column",{attrs:{label:"车次",align:"center","min-width":"35px",prop:"actual_trains"}}),n("u-table-column",{attrs:{label:"检测状态","min-width":"35px",prop:"test_status",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("div",{class:"复检"===a.test_status?"test_type_name_style":""},[t._v(" "+t._s(a.test_status)+" ")])]}}])})],1),t._l(t.testTypeList.filter((function(t){return t.show})),(function(e){return n("u-table-column",{key:e.test_type_name,attrs:{align:"center",label:e.test_type_name}},[t._l(e.data_indicator_detail.filter((function(t){return t.show})),(function(a){return n("u-table-column",{key:e.test_type_name+a.detail,attrs:{"min-width":"55px",label:a.detail,align:"center"},scopedSlots:t._u([{key:"default",fn:function(r){var l=r.row;return[n("div",{class:1!==t.getDataPoint(e.test_type_name,a.detail,l.order_results,"level")&&""!==t.getDataPoint(e.test_type_name,a.detail,l.order_results,"level")?"test_type_name_style":""},[t._v(" "+t._s(t.getDataPoint(e.test_type_name,a.detail,l.order_results,"value"))+" ")])]}}],null,!0)})})),"门尼"===e.test_type_name||"流变"===e.test_type_name?n("u-table-column",{attrs:{label:"检测机台","min-width":"50px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(" "+t._s(t.getDataPoint(e.test_type_name,"maxLevelItem",a.order_results,"machine_name"))+" ")]}}],null,!0)}):t._e(),n("u-table-column",{attrs:{"min-width":"50px",label:"合格区间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(" "+t._s(t.getDataPoint(e.test_type_name,"maxLevelItem",a.order_results,"upper_lower"))+" ")]}}],null,!0)}),n("u-table-column",{attrs:{"min-width":"35px",label:"等级",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(" "+t._s(t.getDataPoint(e.test_type_name,"maxLevelItem",a.order_results,"level"))+" ")]}}],null,!0)})],2)})),n("u-table-column",{attrs:{label:"综合等级","min-width":"35px",prop:"level",align:"center"}}),n("u-table-column",{attrs:{label:"综合检测结果","min-width":"60px",prop:"mes_result",align:"center"}})],2)],1)},k=[],U={props:{testOrders:{type:Array,default:function(){return[]}},testTypeList:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{getDataPoint:function(t,e,n,a){var r=n[t]&&n[t][e]?n[t][e]:null;return r?r[a]:""}}},M=U,L=Object(p["a"])(M,S,k,!1,null,null,null),C=L.exports,D={directives:{"el-table-infinite-scroll":y["a"]},components:{EquipSelect:c["a"],DetailsUTable:C,allProductNoSelect:O["a"],ClassSelect:d["a"],StageSelect:_},data:function(){return{count:0,allPage:0,getParams:{day_time:u()().format("YYYY-MM-DD"),equip_no:null,classes:null,product_no:null,stage:null,page:1},listLoading:!0,filterDialogVisible:!1,testCardDialogVisible:!1,testTypeList:[{test_type_id:null,test_type_name:"",show:!1,data_indicator_detail:[{detail:"",show:!1}]}],testOrders:[],testOrdersAll:[],index:1,recordList:[],isMoreLoad:!0,definePafeSize:10,valueResult:"",ALLData:[],options:[{name:"一等品",bool:!0},{name:"三等品",bool:!1}]}},created:function(){this.getTestTypes()},mounted:function(){},beforeUpdata:function(){},methods:{dayTimeChanged:function(){},clearList:function(){this.getParams.page=1,this.allPage=0,this.testOrders=[],this.testOrdersAll=[]},titleInfo:function(t,e){if(!t&&0!==t)throw this.$message.info(e),new Error(e)},equipSelected:function(t){},stageChange:function(){},classSelected:function(t){this.getParams.classes=t||null},productBatchingChanged:function(t){this.getParams.product_no=t?t.material_no:null},load:function(t,e){var n=this,a=[];Object(j["e"])(t.id).then((function(r){for(var l in r){var i=JSON.parse(JSON.stringify(t));for(var o in i.test_status="正常",i.index=n.index++,i.hasChildren=!1,i.order_results=r[l],i.level=0,i.mes_result="未检测",i.order_results){var s=i.order_results[o],u=0;for(var c in s){var d=s[c];d.test_times>1&&(i.test_status="复检"),d.level>u&&(u=d.level,s["maxLevelItem"]=d)}u>i.level&&(i.level=u,i.mes_result=1===i.level?"一等品":"三等品")}a.push(i)}e(a)}))},valueResultFun:function(t){},clickQuery:function(){this.getParams.page=1,this.testOrdersAll=[],this.getMaterialTestOrders(),this.getALLData()},getALLData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getMaterialTestOrders(!0);case 3:n=e.sent,t.ALLData=n||[],e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getMaterialTestOrders:function(){var t=arguments,e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,r,o,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.length>0&&void 0!==t[0]&&t[0],e.listLoading=!0,n.prev=2,o=JSON.parse(JSON.stringify(e.getParams)),o.page_size=a?99999999:10,n.next=7,Object(j["b"])(o);case 7:if(s=n.sent,u=s.results,u=u.map((function(t){for(var n in t.level=0,t.mes_result="未检测",t.order_results){var a=t.order_results[n],r=0;for(var l in a){var o=a[l];o.test_times>1?(e.$set(t,"test_status","复检"),e.$set(t,"hasChildren",!0)):(e.$set(t,"test_status","正常"),e.$set(t,"hasChildren",!1)),o.level>r&&(r=o.level,a["maxLevelItem"]=o)}r>t.level&&(t.level=r,t.mes_result=1===t.level?"一等品":"三等品")}return Object(i["a"])(Object(i["a"])({},t),{},{index:e.index++,class_group:"".concat(t.production_class,"/").concat(t.production_group)})})),!a){n.next=12;break}return n.abrupt("return",u);case 12:e.listLoading=!1,e.allPage=s.count,(r=e.testOrdersAll).push.apply(r,Object(l["a"])(u)),e.testOrders=e.testOrdersAll,n.next=21;break;case 18:n.prev=18,n.t0=n["catch"](2),e.listLoading=!1;case 21:case"end":return n.stop()}}),n,null,[[2,18]])})))()},infiniteScroll:function(){Number(this.allPage-this.getParams.page*this.definePafeSize)<=0||(this.getParams.page=this.getParams.page+1,this.getMaterialTestOrders())},getTestTypes:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.testTypeList=[],e.next=4,Object(j["f"])();case 4:n=e.sent,t.testTypeList=n.map((function(t){return t.data_indicator_detail=t.data_indicator_detail.map((function(t){return{detail:t,show:!0}})),Object(i["a"])(Object(i["a"])({},t),{},{show:!0})})),t.listLoading=!1,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.listLoading=!1;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},showCard:function(t){var e=this;this.testCardDialogVisible=!0,this.$nextTick((function(){e.$refs["testCard"].setTestData(t)}))},getDataPoint:function(t,e,n,a){var r=n[t]&&n[t][e]?n[t][e]:null;return r?r[a]:""},tableRowClassName:function(t){var e=t.row;t.rowIndex;return"一等品"!==e.mes_result?"warning-row":""},exportExcel:function(){var t=T.a.utils.table_to_book(document.querySelector("#out-table")),e=T.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{P.a.saveAs(new Blob([e],{type:"application/octet-stream"}),"胶料快检详细信息.xlsx")}catch(n){"undefined"!==typeof console&&console.log(n,e)}return e}}},I=D,q=(n("f080"),Object(p["a"])(I,a,r,!1,null,null,null));e["default"]=q.exports},"89c6":function(t,e,n){"use strict";n.d(e,"f",(function(){return l})),n.d(e,"b",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return c}));var a=n("b775"),r=n("99b1");function l(){return Object(a["a"])({url:r["a"].TestTypeDataUrl,method:"get"})}function i(t){return Object(a["a"])({url:r["a"].MaterialTestOrdersUrl,method:"get",params:t})}function o(t){return Object(a["a"])({url:r["a"].testResultHistoryUrl,method:"get",params:{test_order_id:t}})}function s(t){return Object(a["a"])({url:r["a"].PalletFeedTestUrl,method:"get",params:t})}function u(t,e){return Object(a["a"])({url:r["a"].MaterialValidTimeUrl,method:"post",data:{id:t,valid_time:e}})}function c(t,e){return Object(a["a"])({url:r["a"].QualityPalletFeedTest+t+"/",method:"get",params:e})}},"9dad":function(t,e,n){},daa1:function(t,e,n){"use strict";n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"i",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return m}));var a=n("b775"),r=n("99b1");function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialQuantityDemandedUrl,method:t};return Object.assign(n,e),Object(a["a"])(n)}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].ClassArrangelUrl,method:t};return Object.assign(n,e),Object(a["a"])(n)}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].BanburyPlanUrl,method:t};return Object.assign(n,e),Object(a["a"])(n)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialRepertoryUrl,method:t};return Object.assign(n,e),Object(a["a"])(n)}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialTypelUrl,method:t};return Object.assign(n,e),Object(a["a"])(n)}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].RubberRepertoryUrl,method:t};return Object.assign(n,e),Object(a["a"])(n)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].StageGlobalUrl,method:t};return Object.assign(n,e),Object(a["a"])(n)}function f(t){return Object(a["a"])({url:r["a"].EquipUrl,method:"get",params:t})}function m(){return Object(a["a"])({url:r["a"].GlobalCodesUrl,method:"get",params:{all:1,class_name:"工序"}})}},f080:function(t,e,n){"use strict";var a=n("9dad"),r=n.n(a);r.a}}]);