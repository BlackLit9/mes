(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fc23f17"],{"3e51":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-pagination",{attrs:{layout:"total,prev,pager,next",total:e.total,"page-size":e.pageSize,"current-page":e._currentPage},on:{"update:currentPage":function(t){e._currentPage=t},"update:current-page":function(t){e._currentPage=t},"current-change":e.currentChange}})],1)},i=[],l=(a("a9e3"),{props:{total:{type:Number,default:0},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},data:function(){return{}},computed:{_currentPage:{get:function(){return this.currentPage},set:function(){return 1}}},methods:{currentChange:function(e){this.$emit("currentChange",e)}}}),n=l,c=a("2877"),o=Object(c["a"])(n,r,i,!1,null,null,null);t["a"]=o.exports},7156:function(e,t,a){var r=a("861d"),i=a("d2bb");e.exports=function(e,t,a){var l,n;return i&&"function"==typeof(l=t.constructor)&&l!==a&&r(n=l.prototype)&&n!==a.prototype&&i(e,n),e}},"7db0":function(e,t,a){"use strict";var r=a("23e7"),i=a("b727").find,l=a("44d2"),n=a("ae40"),c="find",o=!0,s=n(c);c in[]&&Array(1)[c]((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),l(c)},a434:function(e,t,a){"use strict";var r=a("23e7"),i=a("23cb"),l=a("a691"),n=a("50c4"),c=a("7b0b"),o=a("65f0"),s=a("8418"),u=a("1dde"),_=a("ae40"),p=u("splice"),b=_("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,d=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p||!b},{splice:function(e,t){var a,r,u,_,p,b,f=c(this),v=n(f.length),w=i(e,v),y=arguments.length;if(0===y?a=r=0:1===y?(a=0,r=v-w):(a=y-2,r=d(m(l(t),0),v-w)),v+a-r>h)throw TypeError(g);for(u=o(f,r),_=0;_<r;_++)p=w+_,p in f&&s(u,_,f[p]);if(u.length=r,a<r){for(_=w;_<v-r;_++)p=_+r,b=_+a,p in f?f[b]=f[p]:delete f[b];for(_=v;_>v-r+a;_--)delete f[_-1]}else if(a>r)for(_=v-r;_>w;_--)p=_+r-1,b=_+a-1,p in f?f[b]=f[p]:delete f[b];for(_=0;_<a;_++)f[_+w]=arguments[_+2];return f.length=v-r+a,u}})},a9e3:function(e,t,a){"use strict";var r=a("83ab"),i=a("da84"),l=a("94ca"),n=a("6eeb"),c=a("5135"),o=a("c6b6"),s=a("7156"),u=a("c04e"),_=a("d039"),p=a("7c73"),b=a("241c").f,m=a("06cf").f,d=a("9bf2").f,h=a("58a8").trim,g="Number",f=i[g],v=f.prototype,w=o(p(v))==g,y=function(e){var t,a,r,i,l,n,c,o,s=u(e,!1);if("string"==typeof s&&s.length>2)if(s=h(s),t=s.charCodeAt(0),43===t||45===t){if(a=s.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(s.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+s}for(l=s.slice(2),n=l.length,c=0;c<n;c++)if(o=l.charCodeAt(c),o<48||o>i)return NaN;return parseInt(l,r)}return+s};if(l(g,!f(" 0o1")||!f("0b1")||f("+0x1"))){for(var x,R=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof R&&(w?_((function(){v.valueOf.call(a)})):o(a)!=g)?s(new f(y(t)),a,R):y(t)},S=r?b(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),M=0;S.length>M;M++)c(f,x=S[M])&&!c(R,x)&&d(R,x,m(f,x));R.prototype=v,v.constructor=R,n(i,g,R)}},e153:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中..."}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请选择"},on:{change:e.changeSearch},model:{value:e.RubberState,callback:function(t){e.RubberState=t},expression:"RubberState"}},e._l(e.RubberStateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"SITE"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请选择"},on:{"visible-change":e.RubberSiteChange,change:e.changeSearch},model:{value:e.RubberSite,callback:function(t){e.RubberSite=t},expression:"RubberSite"}},e._l(e.PopupRubberSITEOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"段次"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",placeholder:"请选择"},on:{"visible-change":e.RubberStageChange,change:e.changeSearch},model:{value:e.RubberStage,callback:function(t){e.RubberStage=t},expression:"RubberStage"}},e._l(e.RubberStageOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"胶料编码"}},[a("el-input",{staticStyle:{width:"200px"},on:{input:e.changeSearch},model:{value:e.stage_product_batch_no,callback:function(t){e.stage_product_batch_no=t},expression:"stage_product_batch_no"}})],1),a("el-form-item",{staticStyle:{float:"right"}},[e.permissionObj.productbatching&&e.permissionObj.productbatching.indexOf("add")>-1?a("el-button",{on:{click:function(t){return e.newRubberClicked()}}},[e._v("新建")]):e._e()],1),a("el-form-item",{staticStyle:{float:"right"}},[e.permissionObj.productbatching&&e.permissionObj.productbatching.indexOf("change")>-1?a("el-button",{attrs:{disabled:1!==e.currentRow.used_type},on:{click:e.showPutRubberMaterialDialog}},[e._v("配料")]):e._e()],1),a("el-form-item",{staticStyle:{float:"right"}},[e.permissionObj.productbatching&&e.permissionObj.productbatching.indexOf("add")>-1?a("el-button",{attrs:{disabled:!e.currentRow.id},on:{click:e.copyClicked}},[e._v("复制")]):e._e()],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.tableData,border:""},on:{"row-click":e.handleCurrentChange}},[a("el-table-column",{attrs:{align:"center",type:"index",width:"50",label:"No"}}),a("el-table-column",{attrs:{align:"center",width:"160%",prop:"stage_product_batch_no",label:"胶料配方编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){return e.showGridTable(t.row.id)}}},[e._v(e._s(t.row.stage_product_batch_no))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"product_name",label:"胶料名称"}}),a("el-table-column",{attrs:{align:"center",prop:"site_name",label:"site",width:"50px"}}),a("el-table-column",{attrs:{align:"center",prop:"stage_name",label:"段次",width:"60px"}}),a("el-table-column",{attrs:{align:"center",width:"100px",prop:"dev_type_name",label:"炼胶机类型"}}),a("el-table-column",{attrs:{align:"center",prop:"batching_weight",label:"配料重量"}}),a("el-table-column",{attrs:{align:"center",prop:"production_time_interval",label:"炼胶时间"}}),a("el-table-column",{attrs:{align:"center",prop:"used_type",label:"状态",formatter:e.usedTypeFormatter,width:"60px"}}),a("el-table-column",{attrs:{align:"center",width:"148",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[5===t.row.used_type&&e.permissionObj.productbatching.indexOf("abandon")>-1?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.status_true(t.row)}}},[e._v("编辑")]):e._e(),1===t.row.used_type&&e.permissionObj.productbatching.indexOf("submit")>-1?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.status_true(t.row)}}},[e._v("提交")]):e._e(),2===t.row.used_type&&e.permissionObj.productbatching.indexOf("check")>-1?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.status_true(t.row)}}},[e._v("校对")]):e._e(),3===t.row.used_type&&e.permissionObj.productbatching.indexOf("use")>-1?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.status_true(t.row)}}},[e._v("启用")]):e._e(),(2===t.row.used_type&&e.permissionObj.productbatching.indexOf("check")>-1)|(3===t.row.used_type&&e.permissionObj.productbatching.indexOf("use")>-1)?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.status_false(t.row)}}},[e._v("驳回")]):e._e(),(5===t.row.used_type&&e.permissionObj.productbatching.indexOf("abandon")>-1)|(4===t.row.used_type&&e.permissionObj.productbatching.indexOf("abandon")>-1)?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.status_false(t.row)}}},[e._v("废弃")]):e._e()],1)]}}])}),a("el-table-column",{attrs:{align:"center",width:"80px",label:"发送到上辅机"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[4===t.row.used_type&&e.permissionObj.productbatching.indexOf("send")>-1?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.send_auxiliary(t.row)}}},[e._v("发送")]):e._e()],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"created_username",label:"创建者"}}),a("el-table-column",{attrs:{align:"center",prop:"submit_username",label:"提交者"}}),a("el-table-column",{attrs:{align:"center",prop:"check_username",label:"校对者"}}),a("el-table-column",{attrs:{align:"center",prop:"used_username",label:"启用者"}}),a("el-table-column",{attrs:{align:"center",prop:"reject_username",label:"驳回者"}}),a("el-table-column",{attrs:{align:"center",prop:"obsolete_username",label:"废弃者"}}),a("el-table-column",{attrs:{align:"center",width:"160%",prop:"created_date",label:"创建时间"}})],1),a("page",{attrs:{total:e.total},on:{currentChange:e.currentChange}}),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,title:e.copyRecipe?"复制胶料配方":"新建胶料配方",visible:e.dialogAddRubberMaterial},on:{"update:visible":function(t){e.dialogAddRubberMaterial=t}}},[a("el-form",{ref:"rubberMaterialForm",attrs:{model:e.rubberMaterialForm,rules:e.rules}},[a("el-form-item",[a("el-radio",{attrs:{label:!0,disabled:e.copyRecipe},on:{change:e.receipeTypeChange},model:{value:e.normalReceipe,callback:function(t){e.normalReceipe=t},expression:"normalReceipe"}},[e._v("常规配方")]),a("el-radio",{attrs:{label:!1,disabled:e.copyRecipe},on:{change:e.receipeTypeChange},model:{value:e.normalReceipe,callback:function(t){e.normalReceipe=t},expression:"normalReceipe"}},[e._v("特殊配方")])],1),a("el-form-item",{attrs:{label:"工厂",prop:"factory"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择",disabled:!e.normalReceipe},model:{value:e.rubberMaterialForm.factory,callback:function(t){e.$set(e.rubberMaterialForm,"factory",t)},expression:"rubberMaterialForm.factory"}},e._l(e.RubberSiteOptions,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.global_name}})})),1)],1),a("el-form-item",{attrs:{label:"SITE",prop:"SITE"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择",disabled:!e.normalReceipe},on:{change:e.GenerateRubberMaterialNOChanged},model:{value:e.rubberMaterialForm.SITE,callback:function(t){e.$set(e.rubberMaterialForm,"SITE",t)},expression:"rubberMaterialForm.SITE"}},e._l(e.PopupRubberSITEOptions,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.global_name}})})),1)],1),a("el-form-item",{attrs:{label:"段次",prop:"stage"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择",disabled:!e.normalReceipe},on:{change:e.GenerateRubberMaterialNOChanged},model:{value:e.rubberMaterialForm.stage,callback:function(t){e.$set(e.rubberMaterialForm,"stage",t)},expression:"rubberMaterialForm.stage"}},e._l(e.RubberStageOptions,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.global_name}})})),1)],1),a("el-form-item",{attrs:{label:"胶料编码",prop:"select_product_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:!0,size:"mini",placeholder:"请选择",disabled:!e.normalReceipe},on:{change:e.GenerateRubberMaterialNOChanged},model:{value:e.rubberMaterialForm.select_product_id,callback:function(t){e.$set(e.rubberMaterialForm,"select_product_id",t)},expression:"rubberMaterialForm.select_product_id"}},e._l(e.ProductBatchNoOptions,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.product_no}})})),1)],1),a("el-form-item",{attrs:{label:"版本",prop:"version"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"版本",disabled:!e.normalReceipe},on:{input:e.GenerateRubberMaterialNOChanged},model:{value:e.rubberMaterialForm.version,callback:function(t){e.$set(e.rubberMaterialForm,"version",t)},expression:"rubberMaterialForm.version"}})],1),a("el-form-item",{attrs:{label:"方案"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"方案",disabled:!e.normalReceipe},model:{value:e.rubberMaterialForm.scheme,callback:function(t){e.$set(e.rubberMaterialForm,"scheme",t)},expression:"rubberMaterialForm.scheme"}})],1),a("el-form-item",{attrs:{prop:"generate_material_no",label:"胶料配方编码"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"mini",disabled:e.normalReceipe},model:{value:e.rubberMaterialForm.generate_material_no,callback:function(t){e.$set(e.rubberMaterialForm,"generate_material_no",t)},expression:"rubberMaterialForm.generate_material_no"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.NewAddMaterial("rubberMaterialForm")}}},[e._v("配料")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.NewhandleAddRubberMaterial("rubberMaterialForm")}}},[e._v("生成")])],1)],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,width:"90%",title:"胶料配料标准",visible:e.NewdialogChoiceMaterials},on:{"update:visible":function(t){e.NewdialogChoiceMaterials=t}}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{on:{click:e.NewsaveMaterialClicked}},[e._v("保存")])],1)],1),e._v(" 胶料编码: "),a("el-input",{staticStyle:{width:"20%"},attrs:{size:"mini",disabled:!0},model:{value:e.select_stage_product_batch_no,callback:function(t){e.select_stage_product_batch_no=t},expression:"select_stage_product_batch_no"}}),e._v(" 胶料名称: "),a("el-input",{staticStyle:{width:"10%"},attrs:{size:"mini",disabled:!0},model:{value:e.select_product_name,callback:function(t){e.select_product_name=t},expression:"select_product_name"}}),e._v(" 状态: "),a("el-input",{staticStyle:{width:"10%"},attrs:{size:"mini",disabled:!0},model:{value:e.select_status,callback:function(t){e.select_status=t},expression:"select_status"}}),a("br"),a("br"),e._v(" 炼胶机类型: "),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择"},model:{value:e.select_dev_type,callback:function(t){e.select_dev_type=t},expression:"select_dev_type"}},e._l(e.DevTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.category_name,value:e.id}})})),1),e._v(" 配料重量: "),a("el-input",{staticStyle:{width:"10%"},attrs:{size:"mini",disabled:!0},model:{value:e.select_material_weight,callback:function(t){e.select_material_weight=t},expression:"select_material_weight"}}),e._v(" 炼胶时间: "),a("el-input-number",{attrs:{step:1,"step-strictly":"",min:0,size:"mini","controls-position":"right"},on:{blur:function(){e.select_rm_time_interval||(e.select_rm_time_interval=0)}},model:{value:e.select_rm_time_interval,callback:function(t){e.select_rm_time_interval=e._n(t)},expression:"select_rm_time_interval"}}),a("br"),a("br"),a("table",{staticClass:"table table-bordered",staticStyle:{width:"100%",color:"#909399","font-size":"14px","border-collapse":"collapse"},attrs:{border:"1",bordercolor:"#ebeef4"}},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("No")]),a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("类别")]),a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("自动与否")]),a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("原材料")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("实际重量")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("误差")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("操作")])])]),a("tbody",{staticStyle:{color:"#606266"}},[a("tr",{staticStyle:{background:"rgba(189,198,210,0.73)"}},[a("td",{staticStyle:{"text-align":"center",height:"48px"},attrs:{colspan:"4"}},[e._v("配方结果")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(e.practicalWeightSum))]),a("td"),a("td")]),e._l(e.NewRowMaterial,(function(t,r){return a("tr",{key:r},[a("td",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(t.material))]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(r+1)+" ")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(t.material_type))]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[[a("el-radio",{attrs:{label:1},model:{value:t.auto_flag,callback:function(a){e.$set(t,"auto_flag",a)},expression:"new_material_ele.auto_flag"}},[e._v("自动")]),a("el-radio",{attrs:{label:2},model:{value:t.auto_flag,callback:function(a){e.$set(t,"auto_flag",a)},expression:"new_material_ele.auto_flag"}},[e._v("手动")]),a("el-radio",{attrs:{label:0},model:{value:t.auto_flag,callback:function(a){e.$set(t,"auto_flag",a)},expression:"new_material_ele.auto_flag"}},[e._v("其他")])]],2),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"70%"},attrs:{size:"mini",disabled:!0},model:{value:t.material_name,callback:function(a){e.$set(t,"material_name",a)},expression:"new_material_ele.material_name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.pop_up_raw_material(!0,r)}},slot:"append"})],1)],1),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-input-number",{attrs:{min:0,size:"mini","controls-position":"right"},on:{change:function(a){return e.NewPracticalWeightChanged(t)}},model:{value:t.actual_weight,callback:function(a){e.$set(t,"actual_weight",e._n(a))},expression:"new_material_ele.actual_weight"}})],1),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:t.standard_error,callback:function(a){e.$set(t,"standard_error",e._n(a))},expression:"new_material_ele.standard_error"}})],1),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.del_raw_material_row(t,r)}}},[e._v("删除")])],1)])}))],2)]),a("el-form",[a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:e.insert_NewPracticalWeightChanged}},[e._v("插入一行")])],1)],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,width:"90%",title:"胶料配料标准",visible:e.dialogRubberMaterialStandard},on:{"update:visible":function(t){e.dialogRubberMaterialStandard=t}}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{on:{click:e.PutNewsaveMaterialClicked}},[e._v("保存")])],1)],1),e._v(" 胶料编码: "),a("el-input",{staticStyle:{width:"20%"},attrs:{size:"mini",disabled:!0},model:{value:e.put_select_stage_product_batch_no,callback:function(t){e.put_select_stage_product_batch_no=t},expression:"put_select_stage_product_batch_no"}}),e._v(" 胶料名称: "),a("el-input",{staticStyle:{width:"10%"},attrs:{size:"mini",disabled:!0},model:{value:e.put_select_product_name,callback:function(t){e.put_select_product_name=t},expression:"put_select_product_name"}}),e._v(" 状态: "),a("el-input",{staticStyle:{width:"10%"},attrs:{size:"mini",disabled:!0},model:{value:e.put_select_status,callback:function(t){e.put_select_status=t},expression:"put_select_status"}}),a("br"),a("br"),e._v(" 炼胶机类型: "),a("el-select",{attrs:{size:"mini",clearable:"",placeholder:"请选择"},model:{value:e.put_select_dev_type,callback:function(t){e.put_select_dev_type=t},expression:"put_select_dev_type"}},e._l(e.DevTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.category_name,value:e.id}})})),1),e._v(" 配料重量: "),a("el-input",{staticStyle:{width:"10%"},attrs:{size:"mini",disabled:!0},model:{value:e.put_select_material_weight,callback:function(t){e.put_select_material_weight=t},expression:"put_select_material_weight"}}),e._v(" 炼胶时间: "),a("el-input-number",{attrs:{step:1,"step-strictly":"",min:0,size:"mini","controls-position":"right"},on:{blur:function(){e.put_select_rm_time_interval||(e.put_select_rm_time_interval=0)}},model:{value:e.put_select_rm_time_interval,callback:function(t){e.put_select_rm_time_interval=e._n(t)},expression:"put_select_rm_time_interval"}}),a("br"),a("br"),a("table",{staticClass:"table table-bordered",staticStyle:{width:"100%",color:"#909399","font-size":"14px","border-collapse":"collapse"},attrs:{border:"1",bordercolor:"#ebeef4"}},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("No")]),a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("类别")]),a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("自动与否")]),a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("原材料")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("实际重量")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("误差")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("操作")])])]),a("tbody",{staticStyle:{color:"#606266"}},[a("tr",{staticStyle:{background:"rgba(189,198,210,0.73)"}},[a("td",{staticStyle:{"text-align":"center",height:"48px"},attrs:{colspan:"4"}},[e._v("配方结果")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(e.put_practicalWeightSum))]),a("td"),a("td")]),e._l(e.PutProductRecipe,(function(t,r){return a("tr",{key:r},[a("td",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(t.material))]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(r+1))]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(t.material_type))]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[[a("el-radio",{attrs:{label:1},model:{value:t.auto_flag,callback:function(a){e.$set(t,"auto_flag",a)},expression:"new_material_ele.auto_flag"}},[e._v("自动")]),a("el-radio",{attrs:{label:2},model:{value:t.auto_flag,callback:function(a){e.$set(t,"auto_flag",a)},expression:"new_material_ele.auto_flag"}},[e._v("手动")]),a("el-radio",{attrs:{label:0},model:{value:t.auto_flag,callback:function(a){e.$set(t,"auto_flag",a)},expression:"new_material_ele.auto_flag"}},[e._v("其他")])]],2),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"70%"},attrs:{size:"mini",disabled:!0},model:{value:t.material_name,callback:function(a){e.$set(t,"material_name",a)},expression:"new_material_ele.material_name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.pop_up_raw_material(!1,r)}},slot:"append"})],1)],1),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-input-number",{attrs:{size:"mini",min:0,"controls-position":"right"},on:{change:function(a){return e.PutNewPracticalWeightChanged(t)}},model:{value:t.actual_weight,callback:function(a){e.$set(t,"actual_weight",e._n(a))},expression:"new_material_ele.actual_weight"}})],1),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-input-number",{attrs:{size:"mini","controls-position":"right"},model:{value:t.standard_error,callback:function(a){e.$set(t,"standard_error",e._n(a))},expression:"new_material_ele.standard_error"}})],1),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.del_mod_raw_material_row(t,r)}}},[e._v("删除")])],1)])}))],2)]),a("el-form",[a("el-form-item",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-button",{on:{click:e.insert_PutNewPracticalWeightChanged}},[e._v("插入一行")])],1)],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,width:"70%",title:"原材料选择",visible:e.dialogRawMaterialSync},on:{"update:visible":function(t){e.dialogRawMaterialSync=t}}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"原材料类别"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.materialTypeChange},model:{value:e.materialType,callback:function(t){e.materialType=t},expression:"materialType"}},e._l(e.materialTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.global_name,value:e.id}})})),1)],1),e._v(" 原材料编号: "),a("el-input",{staticStyle:{width:"20%"},on:{input:e.search_material_no_Change},model:{value:e.search_material_no,callback:function(t){e.search_material_no=t},expression:"search_material_no"}}),e._v(" 原材料名称: "),a("el-input",{staticStyle:{width:"20%"},on:{input:e.search_material_name_Change},model:{value:e.search_material_name,callback:function(t){e.search_material_name=t},expression:"search_material_name"}})],1),a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.tableRawMaterialData,border:""}},[a("el-table-column",{attrs:{align:"center",label:"S",width:"30"}}),a("el-table-column",{attrs:{align:"center",prop:"material_no",label:"原材料代码"}}),a("el-table-column",{attrs:{align:"center",prop:"material_name",label:"原材料名称"}}),a("el-table-column",{attrs:{align:"center",prop:"material_type_name",label:"原材料类别"}}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleMaterialSelect(t.row)}}},[e._v("选中 ")])],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.raw_material_pageSize,total:e.raw_material_tableDataTotal,layout:"total, prev, pager, next"},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.raw_material_handleCurrentChange}})],1),a("el-dialog",{attrs:{width:"90%",title:"胶料配料标准",visible:e.gridTable},on:{"update:visible":function(t){e.gridTable=t}}},[e._v(" 胶料编码: "),a("el-input",{staticStyle:{width:"20%"},attrs:{size:"mini",disabled:!0},model:{value:e.put_select_stage_product_batch_no,callback:function(t){e.put_select_stage_product_batch_no=t},expression:"put_select_stage_product_batch_no"}}),e._v(" 胶料名称: "),a("el-input",{staticStyle:{width:"10%"},attrs:{size:"mini",disabled:!0},model:{value:e.put_select_product_name,callback:function(t){e.put_select_product_name=t},expression:"put_select_product_name"}}),e._v(" 状态: "),a("el-input",{staticStyle:{width:"10%"},attrs:{size:"mini",disabled:!0},model:{value:e.put_select_status,callback:function(t){e.put_select_status=t},expression:"put_select_status"}}),a("br"),a("br"),e._v(" 炼胶机类型: "),a("el-select",{attrs:{size:"mini",disabled:!0,clearable:"",placeholder:"请选择"},model:{value:e.put_select_dev_type,callback:function(t){e.put_select_dev_type=t},expression:"put_select_dev_type"}},e._l(e.DevTypeOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.category_name,value:e.id}})})),1),e._v(" 配料重量: "),a("el-input",{staticStyle:{width:"10%"},attrs:{size:"mini",disabled:!0},model:{value:e.put_select_material_weight,callback:function(t){e.put_select_material_weight=t},expression:"put_select_material_weight"}}),e._v(" 炼胶时间: "),a("el-input-number",{attrs:{size:"mini",disabled:!0,"controls-position":"right"},model:{value:e.put_select_rm_time_interval,callback:function(t){e.put_select_rm_time_interval=e._n(t)},expression:"put_select_rm_time_interval"}}),a("br"),a("br"),a("table",{staticClass:"table table-bordered",staticStyle:{width:"100%",color:"#909399","font-size":"14px","border-collapse":"collapse"},attrs:{border:"1",bordercolor:"#ebeef4"}},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("No")]),a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("类别")]),a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("自动与否")]),a("th",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("原材料")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("实际重量")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v("误差")])])]),a("tbody",{staticStyle:{color:"#606266"}},[a("tr",{staticStyle:{background:"rgba(189,198,210,0.73)"}},[a("td",{staticStyle:{"text-align":"center",height:"48px"},attrs:{colspan:"4"}},[e._v("配方结果")]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(e.put_practicalWeightSum))]),a("td"),a("td")]),e._l(e.PutProductRecipe,(function(t,r){return a("tr",{key:r},[a("td",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(e._s(t.material))]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(r+1))]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[e._v(e._s(t.material_type))]),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[[a("el-radio",{attrs:{label:1,disabled:!0},model:{value:t.auto_flag,callback:function(a){e.$set(t,"auto_flag",a)},expression:"new_material_ele.auto_flag"}},[e._v("自动")]),a("el-radio",{attrs:{label:2,disabled:!0},model:{value:t.auto_flag,callback:function(a){e.$set(t,"auto_flag",a)},expression:"new_material_ele.auto_flag"}},[e._v("手动")]),a("el-radio",{attrs:{label:0,disabled:!0},model:{value:t.auto_flag,callback:function(a){e.$set(t,"auto_flag",a)},expression:"new_material_ele.auto_flag"}},[e._v("其他")])]],2),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"70%"},attrs:{size:"mini",disabled:!0},model:{value:t.material_name,callback:function(a){e.$set(t,"material_name",a)},expression:"new_material_ele.material_name"}})],1),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-input-number",{attrs:{size:"mini",disabled:!0,"controls-position":"right"},model:{value:t.actual_weight,callback:function(a){e.$set(t,"actual_weight",e._n(a))},expression:"new_material_ele.actual_weight"}})],1),a("td",{staticStyle:{"text-align":"center",height:"48px"}},[a("el-input-number",{attrs:{size:"mini",disabled:!0,"controls-position":"right"},model:{value:t.standard_error,callback:function(a){e.$set(t,"standard_error",e._n(a))},expression:"new_material_ele.standard_error"}})],1)])}))],2)])],1)],1)},i=[],l=(a("4de4"),a("7db0"),a("c975"),a("a434"),a("96cf"),a("1da1")),n=a("5530"),c=a("3e51"),o=a("b775"),s=a("99b1");function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="";r=t?s["a"].RubberMaterialUrl+t+"/":s["a"].RubberMaterialUrl;var i={url:r,method:e};return Object.assign(i,a),Object(o["a"])(i)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:s["a"].SendAuxiliaryUrl,method:e};return Object.assign(a,t),Object(o["a"])(a)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:s["a"].SITEGlobalUrl,method:e};return Object.assign(a,t),Object(o["a"])(a)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:s["a"].StageGlobalUrl,method:e};return Object.assign(a,t),Object(o["a"])(a)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:s["a"].SiteGlobalUrl,method:e};return Object.assign(a,t),Object(o["a"])(a)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:s["a"].ProductInfosUrl,method:e};return Object.assign(a,t),Object(o["a"])(a)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:s["a"].ValidateVersionsUrl,method:e};return Object.assign(a,t),Object(o["a"])(a)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:s["a"].EquipCategoryUrl,method:e};return Object.assign(a,t),Object(o["a"])(a)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:s["a"].MaterialsUrl,method:e};return Object.assign(a,t),Object(o["a"])(a)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={url:s["a"].MaterialTypelUrl,method:e};return Object.assign(a,t),Object(o["a"])(a)}var w=a("2f62"),y={components:{page:c["a"]},data:function(){return{loading:null,tableData:[],gridTable:!1,gridData:[],total:0,getParams:{page:1},getMaterialParams:{},currentPage:1,raw_material_pageSize:10,raw_material_tableDataTotal:0,currentRow:{used_type:-1},raw_material_currentRow:{},tableRawMaterialData:[],RubberState:"",RubberStateOptions:[{value:1,label:"编辑"},{value:2,label:"提交"},{value:3,label:"校对"},{value:4,label:"启用"},{value:5,label:"驳回"},{value:6,label:"废弃"}],RubberSite:"",RubberSiteOptions:[],RubberStage:"",RubberStageOptions:[],factory:"",PopupRubberSITEOptions:[],stage_product_batch_no:"",ProductBatchNoOptions:[],materialTypeOptions:[],stage:"",StageOptions:[],dev_type_name:"",DevTypeOptions:[],RawMaterialOptions:[],NewRowMaterial:[{material_type:null,material_name:null,auto_flag_radio:0,practical_weight:null,standard_error:null}],PutProductRecipe:[{sn:null,material_type:null,material_name:null,actual_weight:null,standard_error:null}],PopupRubberSITE:[],DevType:[],ProductBatchNo:[],Stage:[],generate_material_no:"",select_rm_flag:!1,select_rm_time_interval:"",select_stage_product_batch_no:null,select_product_name:null,select_status:"编辑",select_dev_type:null,select_material_weight:null,select_material_volume:null,select_rubber_proportion:null,auto_flag_radio:0,auto_flag:0,ratioSum:null,ratioVolumeSum:null,calculateVolumeSum:null,calculateWeightSum:null,practicalWeightSum:null,practicalVolumeSum:null,pre_ratioVolume:null,pre_calculateVolume:null,pre_calculateWeight:null,pre_practical_weight:null,pre_practicalVolumeSum:null,put_select_stage_product_batch_no:null,put_select_product_name:null,put_select_status:null,put_select_dev_type:null,put_select_material_weight:null,put_select_material_volume:null,put_select_rubber_proportion:null,put_select_rm_flag:null,put_select_rm_time_interval:null,put_discharge_time_material:null,put_ratioSum:null,put_ratioVolumeSum:null,put_calculateVolumeSum:null,put_calculateWeightSum:null,put_practicalWeightSum:null,put_practicalVolumeSum:null,selectedPreMaterials:[],ProductRecipe:[],pre_time_material:"",time_material:"",discharge_time_material:"",dialogAddRubberMaterial:!1,dialogRubberMaterialStandard:!1,dialogChoiceMaterials:!1,NewdialogChoiceMaterials:!1,dialogRawMaterialSync:!1,sn:null,material:null,material_type:null,material_name:null,material_type_name:null,rubberMaterialForm:{select_product_id:null,factory:"",SITE:"",stage_product_batch_no:"",rubber_no:"",version:"",stage:"",scheme:"",dev_type_name:"",generate_material_no:""},rules:{factory:[{required:!0,message:"请选择产地",trigger:"blur"}],SITE:[{required:!0,message:"请选择SITE",trigger:"blur"}],select_product_id:[{required:!0,message:"请选择胶料编码",trigger:"blur"}],stage:[{required:!0,message:"请选择段次",trigger:"blur"}],version:[{required:!0,message:"请选择版本",trigger:"blur"}],generate_material_no:[{required:!0,message:"该字段不能为空",trigger:"blur"}]},rubberMaterialFormError:{factory:"",SITE:"",rubber_no:"",stage:"",version:""},pop_up_raw_material_type:"",pop_up_raw_material_no:"",pop_up_raw_material_name:"",raw_material_index:null,put_raw_material_index:null,materialType:null,search_material_no:null,search_material_name:null,select_product_id:null,normalReceipe:!0,copyRecipe:!1}},computed:Object(n["a"])({},Object(w["b"])(["permission"])),created:function(){this.permissionObj=this.permission,this.rubber_material_list()},methods:{copyClicked:function(){this.copyRecipe=!0,this.normalReceipe=!!this.currentRow.product_no,this.showAddRubberMaterialDialog()},clearRubberMaterialForm:function(){this.rubberMaterialForm.factory=void 0,this.rubberMaterialForm.SITE=void 0,this.rubberMaterialForm.stage=void 0,this.rubberMaterialForm.rubber_no=void 0,this.rubberMaterialForm.select_product_id=void 0,this.rubberMaterialForm.version=void 0,this.rubberMaterialForm.scheme=void 0,this.rubberMaterialForm.generate_material_no="",this.$refs["rubberMaterialForm"]&&this.$refs["rubberMaterialForm"].clearValidate()},receipeTypeChange:function(){this.clearRubberMaterialForm()},rubber_material_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,u("get",null,{params:e.getParams});case 4:return a=t.sent,e.tableData=a.results,e.total=a.count,e.loading=!1,e.currentRow.used_type=-1,e.currentRow.id=null,t.abrupt("return",a);case 13:throw t.prev=13,t.t0=t["catch"](0),e.loading=!1,new Error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},rubber_material_ele:function(){var e=arguments;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:null,t.prev=1,t.next=4,u("get",a,{params:{}});case 4:return r=t.sent,t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t["catch"](1),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},rubber_material_post:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u("post",null,e);case 3:return a=t.sent,t.abrupt("return",a);case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},rubber_material_put:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u("put",e,t);case 3:return r=a.sent,a.abrupt("return",r);case 7:throw a.prev=7,a.t0=a["catch"](0),new Error(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},get_raw_material:function(){var e=arguments,t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,a.prev=1,t.getMaterialParams["page"]=r,t.getMaterialParams["use_flag"]=!0,t.getMaterialParams["material_type_id"]=t.materialType?t.materialType:"",t.getMaterialParams["material_no"]=t.search_material_no?t.search_material_no:"",t.getMaterialParams["material_name"]=t.search_material_name?t.search_material_name:"",a.next=9,f("get",{params:t.getMaterialParams});case 9:i=a.sent,t.RawMaterialOptions=i.results,t.tableRawMaterialData=i.results,t.raw_material_tableDataTotal=i.count,a.next=18;break;case 15:throw a.prev=15,a.t0=a["catch"](1),new Error(a.t0);case 18:case"end":return a.stop()}}),a,null,[[1,15]])})))()},site_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m("get",{params:{}});case 3:a=t.sent,e.RubberSiteOptions=a.results,t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},SITE_global_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p("get",{params:{}});case 3:a=t.sent,0!==a.results.length&&(e.PopupRubberSITEOptions=a.results),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},stage_global_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b("get",{params:{}});case 3:a=t.sent,0!==a.results.length&&(e.RubberStageOptions=a.results),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},product_info_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d("get",{params:{all:1}});case 3:a=t.sent,e.ProductBatchNoOptions=a.results,t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},equip_category_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g("get",{params:{all:1,equip_type_name:"密炼设备"}});case 3:a=t.sent,e.DevTypeOptions=a.results,t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},materials_type_list:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v("get",{params:{all:1}});case 3:a=t.sent,e.materialTypeOptions=a.results,t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},validate_versions_list:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h("get",e);case 2:case"end":return t.stop()}}),t)})))()},RubberSiteChange:function(e){e&&this.SITE_global_list()},RubberStageChange:function(e){e&&this.stage_global_list()},status_recipe_fun:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u("patch",e,t);case 3:a.$message("状态切换成功"),a.rubber_material_list(),r.next=10;break;case 7:throw r.prev=7,r.t0=r["catch"](0),new Error(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},send_auxiliary_post:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,_("post",e);case 2:t.$message("发送至上辅机成功"),t.rubber_material_list();case 4:case"end":return a.stop()}}),a)})))()},send_auxiliary:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:_("post",{params:{product_batching_id:t["id"],product_no:t["stage_product_batch_no"]}}).then((function(e){a.$message("发送至上辅机成功"),a.rubber_material_list()})).catch((function(e){}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),usedTypeFormatter:function(e,t){return this.usedTypeChoice(e.used_type)},usedTypeChoice:function(e){switch(e){case 1:return"编辑";case 2:return"提交";case 3:return"校对";case 4:return"启用";case 5:return"驳回";case 6:return"废弃"}},status_true:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.status_recipe_fun(t["id"],{data:{pass_flag:!0}});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),status_false:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.status_recipe_fun(t["id"],{data:{pass_flag:!1}});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),rubber_no_querySearchAsync:function(e,t){var a=this.ProductBatchNoOptions,r=e?a.filter(this.rubber_no_createFilter(e)):a;t(r)},rubber_no_createFilter:function(e){return function(t){return 0===t.product_no.toLowerCase().indexOf(e.toLowerCase())}},RecipehandleSelect:function(e){this.rubberMaterialForm["select_product_id"]=e["id"]},newRubberClicked:function(){this.normalReceipe=!0,this.copyRecipe=!1,this.showAddRubberMaterialDialog()},showAddRubberMaterialDialog:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.clearRubberMaterialForm(),t.next=3,e.site_list();case 3:return t.next=5,e.SITE_global_list();case 5:return t.next=7,e.stage_global_list();case 7:return t.next=9,e.product_info_list();case 9:e.rubberMatetialError="",e.copyRecipe&&e.normalReceipe?(e.rubberMaterialForm.factory=e.currentRow.factory,e.rubberMaterialForm.SITE=e.currentRow.site,e.rubberMaterialForm.stage=e.currentRow.stage,e.rubberMaterialForm.rubber_no=e.currentRow.product_no,e.rubberMaterialForm.select_product_id=e.currentRow.product_info,e.rubberMaterialForm.version=e.currentRow.versions,e.rubberMaterialForm.scheme=e.currentRow.precept,e.GenerateRubberMaterialNOChanged()):e.copyRecipe&&!e.normalReceipe&&(e.rubberMaterialForm.generate_material_no=e.currentRow.stage_product_batch_no),e.dialogAddRubberMaterial=!0;case 12:case"end":return t.stop()}}),t)})))()},GenerateRubberMaterialNOChanged:function(){var e=this,t="",a="",r="",i="";if(this.rubberMaterialForm.SITE)for(var l=0;l<this.PopupRubberSITEOptions.length;++l)this.PopupRubberSITEOptions[l]["id"]===this.rubberMaterialForm.SITE&&(t=this.PopupRubberSITEOptions[l]["global_name"]);if(this.rubberMaterialForm.stage)for(var n=0;n<this.RubberStageOptions.length;++n)this.RubberStageOptions[n]["id"]===this.rubberMaterialForm.stage&&(a=this.RubberStageOptions[n]["global_name"]);var c=this.ProductBatchNoOptions.find((function(t){return t.id===e.rubberMaterialForm["select_product_id"]}));c&&(r=c.product_no),this.rubberMaterialForm.version&&(i=this.rubberMaterialForm.version),this.rubberMaterialForm.generate_material_no=t+"-"+a+"-"+r+"-"+i},del_raw_material_row:function(e,t){if(e.hasOwnProperty("actual_weight")){this.raw_material_index=t,this.NewRowMaterial.splice(t,1);for(var a=0,r=0;r<this.NewRowMaterial.length;++r)a+=this.NewRowMaterial[r]["actual_weight"];this.select_material_weight=a,this.practicalWeightSum=a}},del_mod_raw_material_row:function(e,t){if(e.hasOwnProperty("actual_weight")){this.PutProductRecipe.splice(t,1);for(var a=0,r=0;r<this.PutProductRecipe.length;++r)a+=this.PutProductRecipe[r]["actual_weight"];this.put_select_material_weight=a,this.put_practicalWeightSum=a}},NewPracticalWeightChanged:function(){for(var e=0,t=0;t<this.NewRowMaterial.length;++t)e+=this.NewRowMaterial[t]["actual_weight"];this.select_material_weight=e,this.practicalWeightSum=e},insert_NewPracticalWeightChanged:function(){this.NewRowMaterial.push({material_type:"",material_name:"",auto_flag:0})},PutNewPracticalWeightChanged:function(){for(var e=0,t=0;t<this.PutProductRecipe.length;++t)e+=this.PutProductRecipe[t]["actual_weight"];this.put_select_material_weight=e,this.put_practicalWeightSum=e},insert_PutNewPracticalWeightChanged:function(){this.PutProductRecipe.push({sn:"",material_type:"",auto_flag:0,material_name:""})},NewsaveMaterialClicked:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,a=[],t.select_dev_type){e.next=5;break}return t.$message({message:"炼胶机类型不能为空",type:"error"}),e.abrupt("return");case 5:r=0;case 6:if(!(r<this.NewRowMaterial.length)){e.next=17;break}if(!t.NewRowMaterial[r].material_name||!t.NewRowMaterial[r].actual_weight){e.next=12;break}i={sn:r+1,auto_flag:t.NewRowMaterial[r].auto_flag,material:t.NewRowMaterial[r].material,actual_weight:t.NewRowMaterial[r].actual_weight,standard_error:t.NewRowMaterial[r].standard_error},a.push(i),e.next=14;break;case 12:return t.$message({message:"原材料与实际重量不能为空",type:"error"}),e.abrupt("return");case 14:++r,e.next=6;break;case 17:return e.prev=17,e.next=20,this.rubber_material_post({data:{factory:t.rubberMaterialForm["factory"],site:this.normalReceipe?this.rubberMaterialForm["SITE"]:null,product_info:this.normalReceipe?this.rubberMaterialForm["select_product_id"]:null,precept:t.rubberMaterialForm["scheme"],stage_product_batch_no:this.normalReceipe?null:this.rubberMaterialForm["generate_material_no"],stage:this.normalReceipe?this.rubberMaterialForm["stage"]:null,versions:this.normalReceipe?this.rubberMaterialForm["version"]:null,dev_type:t.select_dev_type,batching_details:a,production_time_interval:t.select_rm_time_interval}});case 20:t.NewdialogChoiceMaterials=!1,t.$message(t.rubberMaterialForm["generate_material_no"]+"保存成功"),this.rubber_material_list(),e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](17),e.t0;case 28:case"end":return e.stop()}}),e,this,[[17,25]])})));function t(){return e.apply(this,arguments)}return t}(),PutNewsaveMaterialClicked:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,a=[],t.put_select_dev_type){e.next=5;break}return t.$message({message:"炼胶机类型不能为空",type:"error"}),e.abrupt("return");case 5:r=0;case 6:if(!(r<this.PutProductRecipe.length)){e.next=17;break}if(!t.PutProductRecipe[r].material_name||!t.PutProductRecipe[r].actual_weight){e.next=12;break}i={sn:r+1,auto_flag:t.PutProductRecipe[r].auto_flag,material:t.PutProductRecipe[r].material,actual_weight:t.PutProductRecipe[r].actual_weight,standard_error:t.PutProductRecipe[r].standard_error},a.push(i),e.next=14;break;case 12:return t.$message({message:"原材料与实际重量不能为空",type:"error"}),e.abrupt("return");case 14:++r,e.next=6;break;case 17:return e.prev=17,e.next=20,this.rubber_material_put(this.currentRow.id,{data:{dev_type:t.put_select_dev_type,production_time_interval:t.put_select_rm_time_interval,batching_details:a}});case 20:t.dialogRubberMaterialStandard=!1,t.$message(t.put_select_stage_product_batch_no+"保存成功"),this.rubber_material_list(),e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](17),e.t0;case 28:case"end":return e.stop()}}),e,this,[[17,25]])})));function t(){return e.apply(this,arguments)}return t}(),showPutRubberMaterialDialog:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.equip_category_list(),t.get_raw_material(),t.materials_type_list(),t.dialogRubberMaterialStandard=!0,e.next=7,this.rubber_material_ele(this.currentRow.id);case 7:a=e.sent,t.put_select_stage_product_batch_no=a["stage_product_batch_no"],t.put_select_product_name=a["product_name"],t.put_select_status=t.usedTypeChoice(a["used_type"]),t.put_select_dev_type=a["dev_type"],t.put_select_material_weight=a["batching_weight"],t.put_select_rm_time_interval=a["production_time_interval"],t.put_practicalWeightSum=a["batching_weight"],t.PutProductRecipe=a.batching_details,t.raw_material_index=null;case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showGridTable:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this,a.equip_category_list(),a.get_raw_material(),a.materials_type_list(),this.gridTable=!0,e.next=7,this.rubber_material_ele(t);case 7:r=e.sent,a.put_select_stage_product_batch_no=r["stage_product_batch_no"],a.put_select_product_name=r["product_name"],a.put_select_status=a.usedTypeChoice(r["used_type"]),a.put_select_dev_type=r["dev_type"],a.put_select_material_weight=r["batching_weight"],a.put_select_rm_time_interval=r["production_time_interval"],a.put_practicalWeightSum=r["batching_weight"],a.PutProductRecipe=r.batching_details,a.raw_material_index=null;case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),pop_up_raw_material:function(e,t){e?this.raw_material_index=t:this.put_raw_material_index=t,this.dialogRawMaterialSync=!0},handleMaterialSelect:function(e){var t=this;if(null!=t.raw_material_index){for(var a=0;a<t.NewRowMaterial.length;++a)if(t.NewRowMaterial[a]["material"]===e.id)return void t.$message({message:"不能选择相同的原料",type:"error"});t.NewRowMaterial[t.raw_material_index].material_name=e.material_name,t.NewRowMaterial[t.raw_material_index].material=e.id,t.NewRowMaterial[t.raw_material_index].material_type=e.material_type_name}else{for(var r=0;r<t.PutProductRecipe.length;++r)if(t.PutProductRecipe[r]["material"]===e.id)return void t.$message({message:"不能选择相同的原料",type:"error"});t.PutProductRecipe[t.put_raw_material_index].material_name=e.material_name,t.PutProductRecipe[t.put_raw_material_index].material=e.id,t.PutProductRecipe[t.put_raw_material_index].material_type=e.material_type_name}t.dialogRawMaterialSync=!1},addRubberMaterial:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.normalReceipe||null!=e.rubberMaterialForm["select_product_id"]){t.next=3;break}return e.$message({message:"所选胶料编码不存在",type:"error"}),t.abrupt("return");case 3:return t.prev=3,t.next=6,e.validate_versions_list({params:{factory:e.normalReceipe?e.rubberMaterialForm["factory"]:null,site:e.normalReceipe?e.rubberMaterialForm["SITE"]:null,product_info:e.normalReceipe?e.rubberMaterialForm["select_product_id"]:null,versions:e.normalReceipe?e.rubberMaterialForm["version"]:null,stage:e.normalReceipe?e.rubberMaterialForm["stage"]:null,stage_product_batch_no:e.normalReceipe?null:e.rubberMaterialForm["generate_material_no"]}});case 6:return t.next=8,e.rubber_material_post({data:{factory:e.rubberMaterialForm["factory"],site:e.normalReceipe?e.rubberMaterialForm["SITE"]:null,product_info:e.normalReceipe?e.rubberMaterialForm["select_product_id"]:null,precept:e.rubberMaterialForm["scheme"],stage_product_batch_no:e.normalReceipe?null:e.rubberMaterialForm["generate_material_no"],stage:e.normalReceipe?e.rubberMaterialForm["stage"]:null,versions:e.normalReceipe?e.rubberMaterialForm["version"]:null}});case 8:e.dialogAddRubberMaterial=!1,e.$message(e.rubberMaterialForm["generate_material_no"]+"保存成功"),e.rubber_material_list(),t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](3);case 15:case"end":return t.stop()}}),t,null,[[3,13]])})))()},NewhandleAddRubberMaterial:function(e){var t=this;this.normalReceipe?this.$refs[e].validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}t.addRubberMaterial(),e.next=5;break;case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):this.$refs[e].validateField("generate_material_no",(function(e){e||t.addRubberMaterial()}))},showChoiceMaterialsDialog:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.normalReceipe||null!=e.rubberMaterialForm["select_product_id"]){t.next=3;break}return e.$message({message:"所选胶料编码不存在",type:"error"}),t.abrupt("return");case 3:return t.prev=3,t.prev=4,t.next=7,e.validate_versions_list({params:{factory:e.normalReceipe?e.rubberMaterialForm["factory"]:null,site:e.normalReceipe?e.rubberMaterialForm["SITE"]:null,product_info:e.normalReceipe?e.rubberMaterialForm["select_product_id"]:null,versions:e.normalReceipe?e.rubberMaterialForm["version"]:null,stage:e.normalReceipe?e.rubberMaterialForm["stage"]:null,stage_product_batch_no:e.normalReceipe?null:e.rubberMaterialForm["generate_material_no"]}});case 7:t.next=12;break;case 9:return t.prev=9,t.t0=t["catch"](4),t.abrupt("return");case 12:if(e.dialogAddRubberMaterial=!1,e.equip_category_list(),e.get_raw_material(),e.materials_type_list(),e.NewdialogChoiceMaterials=!0,e.select_stage_product_batch_no=e.rubberMaterialForm["generate_material_no"],e.select_product_name=e.rubberMaterialForm["rubber_no"],e.select_material_weight=null,e.practicalWeightSum=null,e.NewRowMaterial=[],!e.copyRecipe){t.next=30;break}return t.next=25,e.rubber_material_ele(e.currentRow.id);case 25:a=t.sent,e.select_dev_type=a["dev_type"],e.select_material_weight=a["batching_weight"],e.select_rm_time_interval=a["production_time_interval"],e.NewRowMaterial=a["batching_details"];case 30:t.next=35;break;case 32:t.prev=32,t.t1=t["catch"](3),t.t1;case 35:case"end":return t.stop()}}),t,null,[[3,32],[4,9]])})))()},NewAddMaterial:function(e){var t=this;this.normalReceipe?this.$refs[e].validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}t.showChoiceMaterialsDialog(),e.next=6;break;case 4:return console.log("error submit!!"),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):this.$refs[e].validateField("generate_material_no",(function(e){e||t.showChoiceMaterialsDialog()}))},handleCurrentChange:function(e){this.currentRow=e},raw_material_handleCurrentChange:function(e){this.raw_material_currentRow=e,this.get_raw_material(e)},materialTypeChange:function(){this.get_raw_material()},search_material_no_Change:function(){this.get_raw_material()},search_material_name_Change:function(){this.get_raw_material()},changeSearch:function(){this.getParams["used_type"]=this.RubberState,this.getParams["site"]=this.RubberSite,this.getParams["stage_id"]=this.RubberStage,this.getParams["stage_product_batch_no"]=this.stage_product_batch_no,this.getParams.page=1,this.rubber_material_list()},currentChange:function(e){this.currentRow={used_type:-1},this.getParams.page=e,this.rubber_material_list()}}},x=y,R=a("2877"),S=Object(R["a"])(x,r,i,!1,null,"638f3490",null);t["default"]=S.exports}}]);