(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c7904fd"],{"13d5":function(e,t,a){"use strict";var n=a("23e7"),r=a("d58f").left,i=a("a640"),c=a("ae40"),o=i("reduce"),s=c("reduce",{1:0});n({target:"Array",proto:!0,forced:!o||!s},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1c2f":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{clearable:"",filterable:"",loading:e.loading},on:{change:e.productBatchingChanged,"visible-change":e.visibleChange},model:{value:e.productBatchingId,callback:function(t){e.productBatchingId=t},expression:"productBatchingId"}},e._l(e.productBatchings,(function(e){return a("el-option",{key:e.id,attrs:{label:e.stage_product_batch_no,value:e.id}})})),1)},r=[],i=(a("4de4"),a("4160"),a("13d5"),a("159b"),a("1f6c")),c={props:{isStageProductbatchNoRemove:{type:Boolean,default:!1},makeUseBatch:{type:Boolean,default:!1}},data:function(){return{productBatchings:[],productBatchingId:"",productBatchingById:{},loading:!0}},created:function(){},methods:{productBatchingChanged:function(){this.$emit("productBatchingChanged",this.productBatchingById[this.productBatchingId])},visibleChange:function(e){e&&0===this.productBatchings.length&&this.getProductBatchings()},getProductBatchings:function(){var e=this;this.loading=!0,Object(i["G"])("get",null,{params:{all:1}}).then((function(t){var a=t.results;if(a.forEach((function(t){e.productBatchingById[t.id]=t})),e.makeUseBatch){var n=[];n=a.filter((function(e){return 4===e.used_type||6===e.used_type})),a=n}if(e.isStageProductbatchNoRemove){var r={},i=a.reduce((function(e,t){return r[t.stage_product_batch_no]||(r[t.stage_product_batch_no]=e.push(t)),e}),[]);a=i||[]}e.loading=!1,e.productBatchings=a}))}}},o=c,s=a("2877"),l=Object(s["a"])(o,n,r,!1,null,null,null);t["a"]=l.exports},9708:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"时间:"}},[a("el-date-picker",{attrs:{clearable:!0,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.changeDate},model:{value:e.search.date,callback:function(t){e.$set(e.search,"date",t)},expression:"search.date"}})],1),a("el-form-item",[a("el-radio-group",{on:{change:e.changeRadio},model:{value:e.search.day_type,callback:function(t){e.$set(e.search,"day_type",t)},expression:"search.day_type"}},[a("el-radio",{attrs:{label:1}},[e._v("自然日")]),a("el-radio",{attrs:{label:2}},[e._v("工厂时间")])],1)],1),a("br"),a("el-form-item",{attrs:{label:"时间跨度:"}},[a("time-span-select",{attrs:{"default-val":e.search.dimension,"day-type":e.search.day_type},on:{changeSelect:e.timeSpanChanged}})],1),a("el-form-item",{attrs:{label:"设备编码:"}},[a("equip-select",{attrs:{equip_no_props:e.search.equip_no},on:{"update:equip_no_props":function(t){return e.$set(e.search,"equip_no",t)},changeSearch:e.equipChanged}})],1),a("el-form-item",{attrs:{label:"胶料编码:"}},[a("product-no-select",{on:{productBatchingChanged:e.productBatchingChanged}})],1)],1),a("el-table",{attrs:{data:e.tableData,border:""}},[a("el-table-column",{key:1,attrs:{type:"index",label:"No"}}),a("el-table-column",{key:2,attrs:{label:3===e.search.dimension?"月份":1===e.search.dimension?"班次":"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.date))]),1===e.search.dimension?a("span",[e._v("/"+e._s(t.row.classes))]):e._e()]}}])}),a("el-table-column",{key:3,attrs:{prop:"equip_no",label:"设备编码"}}),a("el-table-column",{key:4,attrs:{prop:"product_no",label:"胶料编码"}}),a("el-table-column",{key:5,attrs:{prop:"total_trains",label:"总车数"}}),a("el-table-column",{key:6,attrs:{prop:"total_time",label:"总耗时/min"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("setTimeMin")(a.total_time))+" ")]}}])}),2===Number(e.search.day_type)&&1===e.search.dimension?a("el-table-column",{key:7,attrs:{label:"总时间/min"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("setTimeMin")(a.classes_time))+" ")]}}],null,!1,3229614569)}):e._e(),a("el-table-column",{key:8,attrs:{label:"单车最小耗时/min"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("setTimeMin")(a.min_train_time))+" ")]}}])}),a("el-table-column",{key:9,attrs:{label:"单车最大耗时/min"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("setTimeMin")(a.max_train_time))+" ")]}}])}),a("el-table-column",{key:10,attrs:{label:"单车平均耗时/min"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("setTimeMin")(e.setUse(a.total_time,a.total_trains,!1)))+" ")]}}])}),2===Number(e.search.day_type)&&1===e.search.dimension?a("el-table-column",{key:11,attrs:{label:"利用率"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.setUse(a.total_time,a.classes_time,!0)+"%")+" ")]}}],null,!1,2832938776)}):e._e()],1),a("page",{attrs:{total:e.total,"current-page":e.search.page},on:{currentChange:e.currentChange}})],1)},r=[],i=(a("baa5"),a("a9e3"),a("b680"),a("ac1f"),a("841c"),a("96cf"),a("1da1")),c=a("1c2f"),o=a("4090"),s=a("3e51"),l=a("befc"),u=a("1f6c"),d=a("2c93"),h={components:{productNoSelect:c["a"],page:s["a"],equipSelect:o["a"],timeSpanSelect:l["a"]},mixins:[d["a"]],data:function(){return{total:0,loading:!1,search:{page:1,equip_no:null,dimension:1,day_type:2,date:[]},tableData:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Object(u["b"])("get",null,{params:e.search});case 4:a=t.sent,e.total=a.count,e.tableData=a.results,e.loading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},setMonth:function(e){if(e){var t=new Date(e);return t.getFullYear()+"/"+(t.getMonth()+1)}},currentChange:function(e){this.search.page=e,this.getList()},productBatchingChanged:function(e){this.search.product_no=e?e.stage_product_batch_no:"",this.getList(),this.search.page=1},equipChanged:function(e){this.search.equip_no=e,this.getList(),this.search.page=1},timeSpanChanged:function(e){this.search.dimension=e,this.getList(),this.search.page=1},changeDate:function(e){this.search.st=e?e[0]:"",this.search.et=e?e[1]:"",this.getList(),this.search.page=1},changeRadio:function(e){this.search.day_type=e,this.getList(),this.search.page=1},setUse:function(e,t,a){if(!e||!t)return 0;var n;n=a?parseFloat(e/t*100).toFixed(10):parseFloat(e/t).toFixed(10);var r=n.substring(0,n.lastIndexOf(".")+2);return Number(r)}}},p=h,f=a("2877"),g=Object(f["a"])(p,n,r,!1,null,null,null);t["default"]=g.exports},d58f:function(e,t,a){var n=a("1c0b"),r=a("7b0b"),i=a("44ad"),c=a("50c4"),o=function(e){return function(t,a,o,s){n(a);var l=r(t),u=i(l),d=c(l.length),h=e?d-1:0,p=e?-1:1;if(o<2)while(1){if(h in u){s=u[h],h+=p;break}if(h+=p,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=p)h in u&&(s=a(s,u[h],h,l));return s}};e.exports={left:o(!1),right:o(!0)}}}]);