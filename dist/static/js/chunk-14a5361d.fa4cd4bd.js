(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14a5361d"],{1:function(t,e){},2:function(t,e){},3:function(t,e){},"4c72":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"25px"}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"工程名"}},[a("el-input",{attrs:{placeholder:"密炼",disabled:!0},model:{value:t.projectName,callback:function(e){t.projectName=e},expression:"projectName"}})],1),a("el-form-item",{attrs:{label:"日期"}},[a("el-date-picker",{attrs:{type:"date",clearable:!1,placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{change:t.performanceDateChange},model:{value:t.performanceDate,callback:function(e){t.performanceDate=e},expression:"performanceDate"}})],1),a("el-form-item",{attrs:{label:"机台"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:t.equipNoChange,"visible-change":t.equipNoVisibleChange},model:{value:t.equipNo,callback:function(e){t.equipNo=e},expression:"equipNo"}},t._l(t.equipNoOptions,(function(t){return a("el-option",{key:t.equip_no,attrs:{label:t.equip_no,value:t.equip_no}})})),1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"处理",width:"40"}}),a("el-table-column",{attrs:{prop:"equip_no",label:"机型"}}),a("el-table-column",{attrs:{prop:"product_no",width:"190",label:"胶料代码"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"},domProps:{textContent:t._s(e.row.product_no)}}),"合计"!=e.row.product_no?a("el-button",{staticStyle:{float:"right",width:"25%"},attrs:{icon:"el-icon-search",type:"text",size:"mini"},on:{click:function(a){return t.clickProductNo(e.row)}}}):t._e()]}}])}),a("el-table-column",{attrs:{prop:"plan_weight",label:"标准重量"}}),a("el-table-column",{attrs:{prop:"plan_trains",label:"日计划"}}),a("el-table-column",{attrs:{prop:"actual_trains",label:"日结果"}}),a("el-table-column",{attrs:{align:"center",prop:"mr_material_requisition_classes",label:"早班"}},[a("el-table-column",{attrs:{prop:"classes_data[0].plan_trains",label:"计划"}}),a("el-table-column",{attrs:{prop:"classes_data[0].actual_trains",label:"结果"}})],1),a("el-table-column",{attrs:{align:"center",prop:"mr_material_requisition_classes",label:"中班"}},[a("el-table-column",{attrs:{prop:"classes_data[1].plan_trains",label:"计划"}}),a("el-table-column",{attrs:{prop:"classes_data[1].actual_trains",label:"结果"}})],1),a("el-table-column",{attrs:{align:"center",prop:"mr_material_requisition_classes",label:"夜班"}},[a("el-table-column",{attrs:{prop:"classes_data[2].plan_trains",label:"计划"}}),a("el-table-column",{attrs:{prop:"classes_data[2].actual_trains",label:"结果"}})],1),a("el-table-column",{attrs:{prop:"download",label:"操作"}})],1),a("el-dialog",{attrs:{title:"胶料产出反馈",visible:t.dialogVisibleRubber,width:"900px"},on:{"update:visible":function(e){t.dialogVisibleRubber=e}}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"胶料区分: "}},[t._v(" "+t._s(t.palletFeedObj.hasOwnProperty("stage")?t.palletFeedObj.stage:"--")+" ")]),a("el-form-item",{attrs:{label:"胶料编码: "}},[t._v(" "+t._s(t.palletFeedObj.product_no)+" ")]),a("el-form-item",{attrs:{label:"班次: "}},[t._v(" "+t._s(t.palletFeedObj.classes)+" ")]),a("el-form-item",{attrs:{label:"机台: "}},[t._v(" "+t._s(t.palletFeedObj.equip_no)+" ")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.palletFeedList,border:""}},[a("el-table-column",{attrs:{prop:"lot_no",label:"LOT"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.lot_no||"--")+" ")]}}])}),a("el-table-column",{attrs:{prop:"product_no",label:"胶料编码",width:"140px"}}),a("el-table-column",{attrs:{prop:"equip_no",label:"机台"}}),a("el-table-column",{attrs:{label:"BAT"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{color:"#1989fa",cursor:"pointer"},on:{click:function(a){return t.clickBAT(e.row)}}},[t._v(" "+t._s(e.row.begin_trains)+"--"+t._s(e.row.end_trains))])]}}])}),a("el-table-column",{attrs:{prop:"actual_weight",label:"生产重量"}}),a("el-table-column",{attrs:{label:"生产时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.end_time.split(" ")[1])+" ")]}}])}),a("el-table-column",{attrs:{prop:"classes",label:"班次"}}),a("el-table-column",{attrs:{prop:"operation_user",label:"作业者"}})],1),a("page",{attrs:{total:t.totalRubber,"current-page":t.pageRubber},on:{currentChange:t.currentChangeRubber}})],1),a("el-dialog",{attrs:{title:"BAT查询",visible:t.dialogVisibleBAT,width:"900px"},on:{"update:visible":function(e){t.dialogVisibleBAT=e}}},[a("div",{staticStyle:{position:"relative"}},[a("el-form",{staticStyle:{"margin-right":"100px"},attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"胶料区分: "}},[t._v(" "+t._s(t.BATObj.stage)+" ")]),a("el-form-item",{attrs:{label:"胶料编码: "}},[t._v(" "+t._s(t.BATObj.product_no)+" ")]),a("el-form-item",{attrs:{label:"班次: "}},[t._v(" "+t._s(t.BATObj.classes)+" ")]),a("el-form-item",{attrs:{label:"机台: "}},[t._v(" "+t._s(t.BATObj.equip_no)+" ")]),a("el-form-item",{attrs:{label:"车次: "}},[t._v(" "+t._s(t.BATObj.begin_trains)+" -- "+t._s(t.BATObj.end_trains)+" ")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.BATList}},[a("el-table-column",{attrs:{prop:"equip_no",label:"机台"}}),a("el-table-column",{attrs:{prop:"name",label:"日期",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.end_time.split(" ")[0])+" ")]}}])}),a("el-table-column",{attrs:{prop:"classes",label:"班次"}}),a("el-table-column",{attrs:{prop:"product_no",label:"胶料编码"}}),a("el-table-column",{attrs:{prop:"actual_trains",label:"车次"}}),a("el-table-column",{attrs:{prop:"actual_weight",label:"胶"}}),a("el-table-column",{attrs:{prop:"end_time-begin-time",label:"时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.begin_time)+" -- "+t._s(e.row.end_time)+" ")]}}])}),a("el-table-column",{attrs:{prop:"equip_status.temperature",label:"温度"}}),a("el-table-column",{attrs:{prop:"equip_status.energy",label:"电量"}}),a("el-table-column",{attrs:{prop:"equip_status.rpm",label:"RPM"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.clickView(e.row,e.$index)}}},[t._v("查看图表")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"分析图表",modal:!0,"close-on-click-modal":!1,"modal-append-to-body":!1,width:"900px",visible:t.dialogVisibleGraph},on:{"update:visible":function(e){t.dialogVisibleGraph=e}}},[a("ve-line",{attrs:{height:"500px",data:t.chartData,settings:t.chartSettings,"after-set-option":t.afterSetOption}})],1)],1)},n=[],r=(a("4160"),a("b0c0"),a("ac1f"),a("1276"),a("159b"),a("66ad")),i=a("3e51"),s=a("ed08"),o={components:{page:i["a"]},data:function(){return this.chartSettings={labelMap:{created_date_date:"时间",power:"功率",temperature:"温度",energy:"能量",pressure:"压力",rpm:"转速"},axisSite:{right:["temperature","rpm","energy","pressure"]}},{tableData:[],performanceDate:"",projectName:"",equipNo:"",equipNoOptions:[],dialogAddMaterialBaseInfoVisible:!1,palletFeedObj:{},palletFeedList:[],BATObj:{},BATList:[],dialogVisibleRubber:!1,tableDataRubber:[],tableDataBAT:[],dialogVisibleBAT:!1,dialogVisibleGraph:!1,currentPage:1,total:0,totalRubber:0,pageRubber:1,getParams:{page:1},chartData:{columns:["created_date_date","power","temperature","energy","pressure","rpm"],rows:[]},options:{title:{show:!0,text:"主标题",textAlign:"left"},yAxis:[{min:0,max:2500,splitNumber:5,interval:500},{min:0,max:200,splitNumber:5,interval:40}],toolbox:{itemSize:20,itemGap:30,right:50,feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{name:"",pixelRatio:2}}}}}},created:function(){this.getSearchTime(),this.currentChange(1)},methods:{downloadClick:function(t){},performanceDateChange:function(){this.currentChange(1)},equipNoVisibleChange:function(t){if(t){var e=this;Object(r["b"])({all:1,category_name:"密炼设备"}).then((function(t){e.equipNoOptions=t.results}))}},equipNoChange:function(){this.currentChange(1)},clickProductNo:function(t){this.dialogVisibleRubber=!0,this.palletFeedObj=t,this.pageRubber=1,this.getRubberCoding()},getRubberCoding:function(){var t=this,e=this.performanceDate;e||(e=Object(s["e"])()),Object(r["c"])({page:t.pageRubber,product_no:t.palletFeedObj.product_no,equip_no:t.palletFeedObj.equip_no,day_time:e,ordering:"-product_time"}).then((function(e){t.totalRubber=e.count,t.palletFeedList=e.results||[]}))},currentChangeRubber:function(t){this.pageRubber=t,this.getRubberCoding()},clickBAT:function(t){this.dialogVisibleBAT=!0,this.BATObj=t,this.getBATList()},getBATList:function(){var t=this;Object(r["f"])({plan_classes_uid:t.BATObj.plan_classes_uid,equip_no:t.BATObj.equip_no,actual_trains:t.BATObj.begin_trains+","+t.BATObj.end_trains}).then((function(e){t.BATList=e.results||[]}))},clickView:function(t){this.dialogVisibleGraph=!0,this.getEchartsList(t)},getEchartsList:function(t){var e=this;Object(r["a"])({product_no:t.product_no,plan_classes_uid:t.plan_classes_uid,equip_no:t.equip_no,st:t.begin_time,et:t.end_time}).then((function(a){var l=a.results;l.forEach((function(t){t.created_date_date=t.product_time.split(" ")[1]?t.product_time.split(" ")[1]:t.product_time})),e.chartData.rows=l,e.options.title.text=e.chartData.rows.length>0&&e.chartData.rows[0].hasOwnProperty("product_time")?e.chartData.rows[0].product_time.split(" ")[0]:"",e.options.toolbox.feature.saveAsImage.name="工艺曲线_"+(t.equip_no||"")+"-"+(t.product_no||"")+"-"+(t.begin_time||"")})).catch((function(){}))},afterSetOption:function(t){t.setOption(this.options)},currentChange:function(t){var e=this;this.beforeGetData(),this.getParams["page"]=t,this.tableData=[],Object(r["e"])(this.getParams).then((function(t){var a={equip_no:"",product_no:"合计",plan_trains:0,actual_trains:0,classes_data:[{plan_trains:0,actual_trains:0},{plan_trains:0,actual_trains:0},{plan_trains:0,actual_trains:0}]};t.data.forEach((function(t){""===a.equip_no?a.equip_no=t.equip_no:a.equip_no!==t.equip_no&&(e.tableData.push(a),a={equip_no:"",product_no:"合计",plan_trains:0,actual_trains:0,classes_data:[{plan_trains:0,actual_trains:0},{plan_trains:0,actual_trains:0},{plan_trains:0,actual_trains:0}]},a.equip_no=t.equip_no),a.plan_trains=a.plan_trains+t.plan_trains,a.actual_trains=a.actual_trains+t.actual_trains,a.classes_data[0].plan_trains=a.classes_data[0].plan_trains+t.classes_data[0].plan_trains,a.classes_data[0].actual_trains=a.classes_data[0].actual_trains+t.classes_data[0].actual_trains,a.classes_data[1].plan_trains=a.classes_data[1].plan_trains+t.classes_data[1].plan_trains,a.classes_data[1].actual_trains=a.classes_data[1].actual_trains+t.classes_data[1].actual_trains,a.classes_data[2].plan_trains=a.classes_data[2].plan_trains+t.classes_data[2].plan_trains,a.classes_data[2].actual_trains=a.classes_data[2].actual_trains+t.classes_data[2].actual_trains,e.tableData.push(t)})),e.tableData.push(a),0===t.data.length&&(e.tableData=t.data)}))},beforeGetData:function(){this.getParams["search_time"]=this.performanceDate,this.getParams["equip_no"]=this.equipNo},getSearchTime:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,l=a<10?"0"+a:a,n=t.getDate(),r=n<10?"0"+n:n;this.performanceDate=e+"-"+l+"-"+r},detailsClick:function(t){this.getDetailsParams["product_no"]=t.product_no,this.getDetailsParams["equip_no"]=t.equip_no;var e=this;Object(r["d"])(this.getDetailsParams).then((function(t){e.tableDataRubber=t.results})),this.dialogVisibleRubber=!0},opens:function(){var t=this;this.$nextTick((function(){t.pie1()}))},pie1:function(){},sendToAu:function(t){var e=this;Object(r["g"])(t.id).then((function(t){e.$message("发送成功")})).catch((function(){e.$message("发送失败")}))}}},c=o,u=a("2877"),p=Object(u["a"])(c,l,n,!1,null,"30ed0b91",null);e["default"]=p.exports},"66ad":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"f",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"e",(function(){return c})),a.d(e,"d",(function(){return u})),a.d(e,"g",(function(){return p}));var l=a("b775"),n=a("99b1");function r(t){return Object(l["a"])({url:n["a"].EquipUrl,method:"get",params:t})}function i(t){return Object(l["a"])({url:n["a"].PalletFeedBacksUrl,method:"get",params:t})}function s(t){return Object(l["a"])({url:n["a"].TrainsFeedbacksUrl,method:"get",params:t})}function o(t){return Object(l["a"])({url:n["a"].EchartsListUrl,method:"get",params:t})}function c(t){return Object(l["a"])({url:n["a"].ProductActualUrl,method:"get",params:t})}function u(t){return Object(l["a"])({url:n["a"].PalletFeedbacksUrl,method:"get",params:t})}function p(t){return Object(l["a"])({url:n["a"].ProductDayPlanNoticeUrl,method:"post",id:t})}},ed08:function(t,e,a){"use strict";a.d(e,"e",(function(){return c})),a.d(e,"b",(function(){return p})),a.d(e,"a",(function(){return b})),a.d(e,"d",(function(){return d})),a.d(e,"c",(function(){return _}));a("4160"),a("caad"),a("c975"),a("45fc"),a("a9e3"),a("b64b"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("2532"),a("4d90"),a("5319"),a("1276"),a("159b");var l=a("53ca"),n=a("4360"),r=a("ecc0"),i=a.n(r),s=a("1146"),o=a.n(s);function c(t,e,a){var l=t?new Date(t):new Date,n={y:l.getFullYear(),m:u(l.getMonth()+1),d:u(l.getDate()),h:u(l.getHours()),i:u(l.getMinutes()),s:u(l.getSeconds()),a:u(l.getDay())};return e?n.y+"-"+n.m+"-"+n.d+" "+n.h+":"+n.i+":"+n.s:a&&"continuation"===a?n.y+n.m+n.d+n.h+n.i+n.s:n.y+"-"+n.m+"-"+n.d}function u(t){return t=Number(t),t<10?"0"+t:t}function p(t){if(!t&&"object"!==Object(l["a"])(t))throw new Error("error arguments","deepClone");var e=t.constructor===Array?[]:{};return Object.keys(t).forEach((function(a){t[a]&&"object"===Object(l["a"])(t[a])?e[a]=p(t[a]):e[a]=t[a]})),e}function b(t){if(t&&t instanceof Array&&t.length>0){var e=n["a"].getters&&n["a"].getters.permission,a=e[t[0]];if(!a||0===a.length)return;var l=a.some((function(e){return e===t[1]}));return l}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}function d(t){var e=o.a.utils.table_to_book(document.querySelector("#out-table"),{raw:!0}),a=o.a.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{i.a.saveAs(new Blob([a],{type:"application/octet-stream"}),t+".xlsx")}catch(l){"undefined"!==typeof console&&console.log(l,a)}return a}function _(t,e){if(t.$message.closeAll(),"[object Object]"===Object.prototype.toString.call(e)){var a="";for(var l in e)console.log(e[l]),e[l].forEach((function(t){a+=t}));a.includes("已存在")&&t.$message.error("已存在!")}}}}]);