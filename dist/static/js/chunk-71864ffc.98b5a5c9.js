(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71864ffc"],{2468:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{attrs:{value:e.id,clearable:"",placeholder:"请选择"},on:{change:function(t){return e.$emit("change",t)},"visible-change":e.visibleChange}},e._l(e.equipsCategories,(function(e){return n("el-option",{key:e.id,attrs:{label:e.category_name,value:e.id}})})),1)},r=[],l=(n("a9e3"),n("96cf"),n("1da1")),i=n("7957"),u={model:{prop:"id",event:"change"},props:{id:{type:[Number,String],required:!1,default:void 0},equipTypeName:{type:String,required:!1,default:"密炼设备"}},data:function(){return{equipsCategories:[]}},created:function(){this.getEquipsCategories()},methods:{getEquipsCategories:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["b"])("get",{params:{all:1,equip_type_name:e.equipTypeName}});case 2:n=t.sent,e.equipsCategories=n.results;case 4:case"end":return t.stop()}}),t)})))()},visibleChange:function(e){e&&this.getEquipsCategories()}}},c=u,s=n("2877"),o=Object(s["a"])(c,a,r,!1,null,null,null);t["a"]=o.exports},"3be2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"时间"}},[n("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},on:{change:e.getList},model:{value:e.getParams.day_time,callback:function(t){e.$set(e.getParams,"day_time",t)},expression:"getParams.day_time"}})],1),n("el-form-item",{attrs:{label:"生产机型"}},[n("equip-category-select",{on:{change:e.getList},model:{value:e.getParams.dev_type,callback:function(t){e.$set(e.getParams,"dev_type",t)},expression:"getParams.dev_type"}})],1),n("el-form-item",{attrs:{label:"小料配方编码"}},[n("el-input",{attrs:{placeholder:"请输入小料配方编码"},on:{input:e.getList},model:{value:e.getParams.weight_batch_no,callback:function(t){e.$set(e.getParams,"weight_batch_no",t)},expression:"getParams.weight_batch_no"}})],1),n("br"),n("el-form-item",{attrs:{label:"班次"}},[n("class-select",{on:{classSelected:e.classChanged}})],1),n("el-form-item",{attrs:{label:"配料设备"}},[n("selectBatchingEquip",{on:{selectChanged:e.selectBatchEquip}})],1),n("el-form-item",{attrs:{label:"状态"}},[n("el-select",{attrs:{clearable:""},on:{change:e.getList},model:{value:e.getParams.status,callback:function(t){e.$set(e.getParams,"status",t)},expression:"getParams.status"}},e._l([[1,"未下发"],[2,"已下发"]],(function(e,t){return n("el-option",{key:t,attrs:{label:e[1],value:e[0]}})})),1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,fit:"",border:""}},[n("el-table-column",{attrs:{type:"index",label:"No",width:"40",align:"center"}}),n("el-table-column",{attrs:{label:"工厂时间",prop:"day_time",align:"center",width:"90"}}),n("el-table-column",{attrs:{prop:"classes_name",label:"班次",align:"center",width:"45"}}),n("el-table-column",{attrs:{prop:"weight_batch_no",label:"小料配方编码",align:"center",width:"165"}}),n("el-table-column",{attrs:{prop:"category_name",label:"生产机型",align:"center"}}),n("el-table-column",{attrs:{label:"配料设备",align:"center"}}),e._v(" /> "),n("el-table-column",{attrs:{prop:"stage_product_batch_no",label:"胶料编码",align:"center",width:"130"}}),e._v(" /> "),n("el-table-column",{attrs:{prop:"plan_package",label:"计划数量",align:"center"}}),n("el-table-column",{attrs:{label:"产线",align:"center"}}),n("el-table-column",{attrs:{prop:"weigh_batching_used_type",label:"小料配方状态",width:"100",formatter:e.usedTypeFormatter,align:"center"}}),n("el-table-column",{attrs:{label:"明细查看",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.view(t.row,t.$index)}}},[e._v("查看")])]}}])}),n("el-table-column",{attrs:{label:"下发",align:"center",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{disabled:1!==t.row.status||4!==t.row.weigh_batching_used_type,size:"mini"},on:{click:function(n){return e.sendOut(t.row,t.$index)}}},[e._v("发送")])]}}])}),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"70",align:"center",formatter:function(e,t){switch(e.status){case 1:return"未下发";case 2:return"已下发"}}}}),n("el-table-column",{attrs:{prop:"send_user",label:"下发人",align:"center"}}),n("el-table-column",{attrs:{prop:"send_time",label:"下发时间",align:"center"}})],1),n("el-dialog",{attrs:{title:"小料计划明细",width:"90%",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("weigh-batching-plan-detail",{attrs:{"batching-classes-plan":e.batchingClassesPlan}})],1)],1)},r=[],l=(n("96cf"),n("1da1")),i=n("cfc4"),u=n("2468"),c=n("68de"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"小料配方编码"}},[n("el-input",{attrs:{size:"mini",value:e.batchingClassesPlan.weight_batch_no,disabled:!0}})],1),n("el-form-item",{attrs:{label:"胶料编码"}},[n("el-input",{attrs:{size:"mini",value:e.batchingClassesPlan.stage_product_batch_no,disabled:!0}})],1),n("el-form-item",{attrs:{label:"生产机型"}},[n("el-input",{attrs:{size:"mini",value:e.batchingClassesPlan.category_name,disabled:!0}})],1),n("el-form-item",{attrs:{label:"配料设备"}},[n("el-input",{attrs:{size:"mini",disabled:!0}})],1),n("el-form-item",{attrs:{label:"计划数量"}},[n("el-input",{attrs:{size:"mini",value:e.batchingClassesPlan.plan_package,disabled:!0}})],1)],1),n("el-row",[n("el-col",{attrs:{span:4}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"分包"}},[n("el-input",{attrs:{value:e.cntType.package_cnt,disabled:!0}})],1)],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("span",[e._v(" "+e._s(e.typeName())+" ")])])],1)],1),n("el-col",{attrs:{span:20}},[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",fit:"",data:e.cntType.weighbatchingdetail_set}},[n("el-table-column",{attrs:{label:"原材料编码",prop:"material_no",align:"center"}}),n("el-table-column",{attrs:{label:"原材料名称",align:"center",prop:"material_name"}}),n("el-table-column",{attrs:{label:"实际重量(kg)",prop:"standard_weight",align:"center"}})],1)],1)],1)],1)},o=[],d=n("8b32"),g={props:{batchingClassesPlan:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{cntType:{}}},watch:{batchingClassesPlan:function(){this.getWeighCntType()}},created:function(){this.getWeighCntType()},methods:{typeName:function(){if(!this.cntType)return"";switch(this.cntType.weigh_type){case 1:return"化学药品A";case 2:return"化学药品B";case 3:return"硫磺"}},getWeighCntType:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.cntType={},!e.batchingClassesPlan.weigh_cnt_type){t.next=5;break}return t.next=4,Object(d["d"])(e.batchingClassesPlan.weigh_cnt_type);case 4:e.cntType=t.sent;case 5:case"end":return t.stop()}}),t)})))()}}},b=g,h=n("2877"),f=Object(h["a"])(b,s,o,!1,null,null,null),p=f.exports,m={components:{classSelect:i["a"],EquipCategorySelect:u["a"],selectBatchingEquip:c["a"],WeighBatchingPlanDetail:p},data:function(){return{getParams:{day_time:null,dev_type:null,weight_batch_no:"",classes_name:"",status:""},loading:!1,tableData:[],dialogVisible:!1,batchingClassesPlan:null}},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(d["a"])(e.getParams);case 3:n=t.sent,e.tableData=n.results||[],e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},classChanged:function(e){this.getParams.classes_name=e,this.getList()},selectBatchEquip:function(e){},sendOut:function(e,t){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["e"])(e.id);case 2:n.getList();case 3:case"end":return t.stop()}}),t)})))()},view:function(e,t){this.batchingClassesPlan=e,this.dialogVisible=!0},usedTypeFormatter:function(e,t){switch(e.weigh_batching_used_type){case 1:return"编辑";case 2:return"提交";case 3:return"校对";case 4:return"启用";case 5:return"驳回";case 6:return"废弃"}}}},v=m,_=Object(h["a"])(v,a,r,!1,null,null,null);t["default"]=_.exports},"64dc":function(e,t,n){"use strict";n.d(t,"l",(function(){return l})),n.d(t,"j",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"h",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return g})),n.d(t,"k",(function(){return b})),n.d(t,"c",(function(){return h})),n.d(t,"g",(function(){return f})),n.d(t,"d",(function(){return p}));var a=n("b775"),r=n("99b1");function l(){return Object(a["a"])({url:r["a"].WarehouseNamesUrl,method:"get"})}function i(e){return Object(a["a"])({url:r["a"].WarehouseInfoUrl,method:"get",params:e})}function u(e,t,n){return Object(a["a"])({url:t?r["a"].WarehouseInfoUrl+t+"/":r["a"].WarehouseInfoUrl,method:e,data:n})}function c(e){return Object(a["a"])({url:r["a"].WarehouseInfoUrl+e+"/reversal_use_flag/",method:"put"})}function s(e){return Object(a["a"])({url:r["a"].StationInfoUrl,method:"get",params:e})}function o(e,t,n){return Object(a["a"])({url:t?r["a"].StationInfoUrl+t+"/":r["a"].StationInfoUrl,method:e,data:n})}function d(e){return Object(a["a"])({url:r["a"].StationInfoUrl+e+"/reversal_use_flag/",method:"put"})}function g(){return Object(a["a"])({url:r["a"].StationTypesUrl,methods:"get"})}function b(e){return Object(a["a"])({url:r["a"].WarehouseMaterialTypeUrl,method:"get",params:e})}function h(e,t,n){return Object(a["a"])({url:t?r["a"].WarehouseMaterialTypeUrl+t+"/":r["a"].WarehouseMaterialTypeUrl,method:e,data:n})}function f(e){return Object(a["a"])({url:r["a"].WarehouseMaterialTypeUrl+e+"/reversal_use_flag/",method:"put"})}function p(){return Object(a["a"])({url:r["a"].MaterialTypesUrl,methods:"get"})}},"68de":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{attrs:{clearable:"",placeholder:"请选择配料设备"},on:{"visible-change":e.visibleChange,change:e.selectChanged},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},e._l(e.options,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)},r=[],l=(n("7db0"),n("64dc")),i={data:function(){return{name:"",options:[]}},methods:{getList:function(){var e=this;Object(l["l"])().then((function(t){e.options=t}))},visibleChange:function(e){e&&0===this.options.length&&this.getList()},selectChanged:function(e){var t=this.options.find((function(t){return t.id===e}));this.$emit("selectChanged",t)}}},u=i,c=n("2877"),s=Object(c["a"])(u,a,r,!1,null,null,null);t["a"]=s.exports},7957:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"i",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"j",(function(){return d})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return h}));var a=n("b775"),r=n("99b1");function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l="";l=t?r["a"].RubberMaterialUrl+t+"/":r["a"].RubberMaterialUrl;var i={url:l,method:e};return Object.assign(i,n),Object(a["a"])(i)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].SendAuxiliaryUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].SITEGlobalUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].StageGlobalUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].SiteGlobalUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].ProductInfosUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].ValidateVersionsUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].EquipCategoryUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialsUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialTypelUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}},"7db0":function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").find,l=n("44d2"),i=n("ae40"),u="find",c=!0,s=i(u);u in[]&&Array(1)[u]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!s},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),l(u)},"8b32":function(e,t,n){"use strict";n.d(t,"h",(function(){return l})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return g}));var a=n("b775"),r=n("99b1");function l(e){return Object(a["a"])({url:r["a"].WeighBatchingUrl,method:"get",params:e})}function i(e){return Object(a["a"])({url:r["a"].WeighBatchingUrl,method:"post",data:{product_batching:e}})}function u(e,t){return Object(a["a"])({url:r["a"].WeighBatchingUrl+e+"/change_used_type/",method:"put",data:{used_type:t}})}function c(e){return Object(a["a"])({url:r["a"].ProductBatchingDetailUrl,method:"get",params:{product_batching:e}})}function s(e,t){return Object(a["a"])({url:r["a"].WeighCntTypeUrl+e+"/",method:"put",data:t})}function o(e){return Object(a["a"])({url:r["a"].WeighCntTypeUrl+e+"/",method:"get"})}function d(e){return Object(a["a"])({url:r["a"].BatchingClassesPlanUrl,method:"get",params:e})}function g(e){return Object(a["a"])({url:r["a"].IssueBatchingClassesPlanUrl+e+"/",method:"put"})}},daa1:function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return b}));var a=n("b775"),r=n("99b1");function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialQuantityDemandedUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].ClassArrangelUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].BanburyPlanUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialRepertoryUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].MaterialTypelUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].RubberRepertoryUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={url:r["a"].StageGlobalUrl,method:e};return Object.assign(n,t),Object(a["a"])(n)}function g(e){return Object(a["a"])({url:r["a"].EquipUrl,method:"get",params:e})}function b(){return Object(a["a"])({url:r["a"].GlobalCodesUrl,method:"get",params:{all:1,class_name:"工序"}})}}}]);