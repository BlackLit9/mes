(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60435686"],{"6dfa":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return s}));var n=a("b775"),i=a("99b1");function r(e){return Object(n["a"])({url:i["a"].MaterialLocationBinding,method:"get",params:e})}function o(e){return Object(n["a"])({url:i["a"].MaterialLocationBinding,method:"post",data:e})}function l(e,t){return Object(n["a"])({url:i["a"].MaterialLocationBinding+t+"/",method:"put",data:e})}function s(e){return Object(n["a"])({url:i["a"].MaterialLocationBinding+e+"/",method:"delete"})}},ab0d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"物料编码"}},[a("materialCodeSelect",{attrs:{"is-all-obj":!0,"label-name":"no"},on:{changeSelect:e.changeMaterialCode}})],1),a("el-form-item",{attrs:{label:"物料名称"}},[a("materialCodeSelect",{attrs:{"is-all-obj":!0},on:{changeSelect:e.changeMaterialName}})],1),a("el-form-item",{attrs:{label:"库存位"}},[a("inventoryPosition",{on:{changSelect:e.changSelect}})],1),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["location_binding","add"],expression:"['location_binding', 'add']"}],on:{click:e.showCreateDialog}},[e._v("新建")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"No",width:"50"}}),a("el-table-column",{attrs:{prop:"spare_no",label:"物料编码"}}),a("el-table-column",{attrs:{prop:"spare_name",label:"物料名称"}}),a("el-table-column",{attrs:{prop:"location_name",label:"库存位"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["location_binding","change"],expression:"['location_binding', 'change']"}],attrs:{size:"mini"},on:{click:function(a){return e.showEditDialog(t.row)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["location_binding","delete"],expression:"['location_binding', 'delete']"}],attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(" 删除 ")])],1)]}}])})],1),a("page",{attrs:{"old-page":!1,total:e.total,"current-page":e.getParams.page},on:{currentChange:e.currentChange}}),a("el-dialog",{attrs:{title:"添加货架物料绑定",visible:e.dialogCreateVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("el-form",{ref:"createForm",attrs:{rules:e.rules,model:e.bindingForm}},[a("el-form-item",{attrs:{label:"物料编码",prop:"spare"}},[a("materialCodeSelect",{attrs:{"created-is":!0,"is-all-obj":!0,"label-name":"no","default-val":e.bindingForm.spare},on:{changeSelect:e.dialogMaterialFun}})],1),a("el-form-item",{attrs:{label:"物料名称",prop:"b"}},[a("materialCodeSelect",{attrs:{"created-is":!0,"is-all-obj":!0,"default-val":e.bindingForm.spare},on:{changeSelect:e.dialogMaterialFun}})],1),a("el-form-item",{attrs:{label:"库存位",prop:"location"}},[a("inventoryPosition",{attrs:{"created-is":!0,"is-enable":!0,"default-val":e.bindingForm.location},on:{changSelect:e.dialogInventoryPosition}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑货架物料绑定",visible:e.dialogEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[a("el-form",{ref:"editForm",attrs:{rules:e.rules,model:e.bindingForm}},[a("el-form-item",{attrs:{label:"物料编码",prop:"spare"}},[a("materialCodeSelect",{attrs:{"created-is":!0,"is-all-obj":!0,"default-val":e.bindingForm.spare,"label-name":"no"},on:{changeSelect:e.dialogMaterialFun}})],1),a("el-form-item",{attrs:{label:"物料名称",prop:"b"}},[a("materialCodeSelect",{attrs:{"created-is":!0,"is-all-obj":!0,"default-val":e.bindingForm.spare},on:{changeSelect:e.dialogMaterialFun}})],1),a("el-form-item",{attrs:{label:"库存位",prop:"location"}},[a("inventoryPosition",{attrs:{"created-is":!0,"is-enable":!0,"default-val":e.bindingForm.location},on:{changSelect:e.dialogInventoryPosition}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEditVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("确 定")])],1)],1)],1)},i=[],r=(a("b0c0"),a("6dfa")),o=a("8041"),l=a("5c1c"),s=a("3e51"),c={components:{inventoryPosition:o["a"],page:s["a"],materialCodeSelect:l["a"]},data:function(){return{formLabelWidth:"auto",tableData:[],typeOptions:[],types:[],dialogCreateVisible:!1,dialogEditVisible:!1,bindingForm:{},rules:{spare:[{required:!0,message:"请输入物料编码",trigger:"change"}],b:[{required:!0,message:"请输入物料名称",trigger:"change"}],location:[{required:!0,message:"不能为空",trigger:"change"}]},getParams:{page:1,type_name:[],name:""},currentPage:1,total:1}},created:function(){this.getTableData()},methods:{getTableData:function(){var e=this;Object(r["b"])(this.getParams).then((function(t){e.tableData=t.results,e.total=t.count}))},changeMaterialCode:function(e){this.getParams.spare_no=e?e.no:"",this.getParams.page=1,this.getTableData()},changeMaterialName:function(e){this.getParams.spare_name=e?e.name:"",this.getParams.page=1,this.getTableData()},changSelect:function(e){this.getParams.location_name=e?e.name:"",this.getParams.page=1,this.getTableData()},showCreateDialog:function(){var e=this;this.bindingForm={},this.dialogCreateVisible=!0,this.$nextTick((function(){e.$refs.createForm.clearValidate()}))},dialogMaterialFun:function(e){this.$set(this.bindingForm,"b",e?e.name:null),this.$set(this.bindingForm,"spare",e?e.id:null),console.log(this.bindingForm)},dialogInventoryPosition:function(e){this.$set(this.bindingForm,"location",e?e.id:null),console.log(this.bindingForm)},handleCreate:function(){var e=this;this.$refs.createForm.validate((function(t){t&&Object(r["c"])(e.bindingForm).then((function(t){e.dialogCreateVisible=!1,e.$message("创建成功"),e.getTableData()}))}))},showEditDialog:function(e){var t=this;this.bindingForm=Object.assign({},e),this.bindingForm.b=e.spare_name,this.dialogEditVisible=!0,this.$nextTick((function(){t.$refs.editForm.clearValidate()}))},handleEdit:function(){var e=this;this.$refs.editForm.validate((function(t){t&&Object(r["d"])(e.bindingForm,e.bindingForm.id).then((function(t){e.dialogEditVisible=!1,e.$message("修改成功"),e.getTableData()}))}))},handleDelete:function(e){var t=this;this.$confirm("是否确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])(e.id).then((function(e){t.$message({type:"success",message:"删除成功!"}),t.getParams.page=1,t.getTableData()}))}))},currentChange:function(e,t){this.getParams.page=e,this.getParams.page_size=t,this.getTableData()}}},d=c,u=a("2877"),g=Object(u["a"])(d,n,i,!1,null,null,null);t["default"]=g.exports},d585:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"g",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"b",(function(){return d})),a.d(t,"i",(function(){return u})),a.d(t,"h",(function(){return g})),a.d(t,"d",(function(){return b}));var n=a("b775"),i=a("99b1");function r(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:t?i["a"].LocationNameList+t+"/":i["a"].LocationNameList,method:e};return Object.assign(r,a),Object(n["a"])(r)}function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:t?i["a"].SpareInventory+t+"/":i["a"].SpareInventory,method:e};return Object.assign(r,a),Object(n["a"])(r)}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:(t?i["a"].SpareInventory+t+"/":i["a"].SpareInventory)+"check_storage/",method:e};return Object.assign(r,a),Object(n["a"])(r)}function s(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:(t?i["a"].SpareInventory+t+"/":i["a"].SpareInventory)+"put_storage/",method:e};return Object.assign(r,a),Object(n["a"])(r)}function c(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:t?i["a"].SpareInventoryLog+t+"/":i["a"].SpareInventoryLog,method:e};return Object.assign(r,a),Object(n["a"])(r)}function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:(t?i["a"].SpareInventory+t+"/":i["a"].SpareInventory)+"out_storage/",method:e};return Object.assign(r,a),Object(n["a"])(r)}function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:t?i["a"].SparepartsSpareType+t+"/":i["a"].SparepartsSpareType,method:e};return Object.assign(r,a),Object(n["a"])(r)}function g(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:t?i["a"].SparepartsSpare+t+"/":i["a"].SparepartsSpare,method:e};return Object.assign(r,a),Object(n["a"])(r)}function b(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={url:(t?i["a"].SpareInventoryLog+t+"/":i["a"].SpareInventoryLog)+"revocation_log/",method:e};return Object.assign(r,a),Object(n["a"])(r)}}}]);