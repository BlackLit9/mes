(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76025fe4"],{"0d7a":function(e,t,n){"use strict";var r=n("b2a2"),a=n("8a1c"),i=n("857c"),o=n("2732"),l=n("ef4c"),c=n("38eb"),u=n("d88d"),s=n("59da"),f=n("5139"),d=n("efe2"),p=[].push,g=Math.min,h=4294967295,v=!d((function(){return!RegExp(h,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(o(this)),i=void 0===n?h:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!a(e))return t.call(r,e,i);var l,c,u,s=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=new RegExp(e.source,d+"g");while(l=f.call(v,r)){if(c=v.lastIndex,c>g&&(s.push(r.slice(g,l.index)),l.length>1&&l.index<r.length&&p.apply(s,l.slice(1)),u=l[0].length,g=c,s.length>=i))break;v.lastIndex===l.index&&v.lastIndex++}return g===r.length?!u&&v.test("")||s.push(""):s.push(r.slice(g)),s.length>i?s.slice(0,i):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=o(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,a,n):r.call(String(a),t,n)},function(e,a){var o=n(r,e,this,a,r!==t);if(o.done)return o.value;var f=i(e),d=String(this),p=l(f,RegExp),b=f.unicode,m=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(v?"y":"g"),y=new p(v?f:"^(?:"+f.source+")",m),x=void 0===a?h:a>>>0;if(0===x)return[];if(0===d.length)return null===s(y,d)?[d]:[];var _=0,E=0,S=[];while(E<d.length){y.lastIndex=v?E:0;var w,R=s(y,v?d:d.slice(E));if(null===R||(w=g(u(y.lastIndex+(v?0:E)),d.length))===_)E=c(d,E,b);else{if(S.push(d.slice(_,E)),S.length===x)return S;for(var k=1;k<=R.length-1;k++)if(S.push(R[k]),S.length===x)return S;E=_=w}}return S.push(d.slice(_)),S}]}),!v)},1:function(e,t){},1784:function(e,t,n){"use strict";var r=n("1c8b"),a=n("58d8").left,i=n("d7e1"),o=n("ff9c"),l=i("reduce"),c=o("reduce",{1:0});r({target:"Array",proto:!0,forced:!l||!c},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2:function(e,t){},"22ef":function(e,t,n){"use strict";var r=n("efe2");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},23423:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"product-plan-reality-analyse"},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"时间"}},[n("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.getParams.factory_date,callback:function(t){e.$set(e.getParams,"factory_date",t)},expression:"getParams.factory_date"}})],1),n("el-form-item",{attrs:{label:"时间区间"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.getParams.hour_step,callback:function(t){e.$set(e.getParams,"hour_step",t)},expression:"getParams.hour_step"}},e._l(e.hourStepOptions,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("el-form-item",{attrs:{label:"班次"}},[n("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.getParams.classes,callback:function(t){e.$set(e.getParams,"classes",t)},expression:"getParams.classes"}},e._l(e.classOptions,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{on:{click:e.changeSearch}},[e._v("查询")])],1)],1),e._l(e.getParams.classes,(function(t,r){return n("el-table",{key:r,staticStyle:{width:"100%"},attrs:{data:e.tableData[t],border:"","summary-method":e.getSummaries,"show-summary":!0,"sum-text":"合计","max-height":"500"}},[n("el-table-column",{attrs:{fixed:"",label:"机台",prop:"equip_no",width:"50",align:"center"}}),n("el-table-column",{attrs:{fixed:"",label:"目标产量",prop:"plan_train_sum",width:"55",align:"center"}}),n("el-table-column",{attrs:{label:t,align:"center"}},e._l(e.headers,(function(t,r){return n("el-table-column",{key:r,attrs:{label:t+"小时",align:"center"}},[n("el-table-column",{attrs:{label:"目标","min-width":"5",align:"center",prop:t.toString()},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(" "+e._s(n.row.time_span_train_count[t.toString()][0])+" ")]}}],null,!0)}),n("el-table-column",{attrs:{label:"完成","min-width":"5",align:"center",prop:t.toString()},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.time_span_train_count?n("p",{style:e.getStyle(r.row.time_span_train_count[t.toString()])},[e._v(" "+e._s(r.row.time_span_train_count[t.toString()][1])+" ")]):e._e()]}}],null,!0)})],1)})),1),n("el-table-column",{attrs:{fixed:"right",label:"未达产原因分析",width:"160",prop:"cause",align:"center"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["production_analyze","change"],expression:"['production_analyze','change']"}],attrs:{size:"mini"},on:{click:function(n){return e.showEditDialog(t.row)}}},[e._v("编辑")])]}}],null,!0)})],1)})),n("el-dialog",{attrs:{title:"编辑原因",visible:e.dialogEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[n("el-form",{attrs:{model:e.editForm}},[n("el-form-item",{attrs:{label:"机台："}},[e._v(" "+e._s(e.editForm.equip_no)+" ")]),n("el-form-item",{attrs:{label:"时间："}},[e._v(" "+e._s(e.editForm.factory_date)+" ")]),n("el-form-item",{attrs:{label:"班次："}},[e._v(" "+e._s(e.editForm.classes)+" ")]),n("el-form-item",{attrs:{"label-width":"55px",label:"原因：",prop:"cause"}},[n("el-input",{model:{value:e.editForm.cause,callback:function(t){e.$set(e.editForm,"cause",t)},expression:"editForm.cause"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogEditVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleEdit}},[e._v("确 定")])],1)],1)],2)},a=[],i=(n("84bc"),n("fe59"),n("2eeb"),n("1784"),n("513c"),n("08ba"),n("b775")),o=n("99b1");function l(e){return Object(i["a"])({url:o["a"].ProductionPlanRealityAnalysis,method:"get",params:e})}function c(e){return Object(i["a"])({url:o["a"].UpdateCause,method:"put",data:e})}var u=n("ed08"),s={data:function(){return{formLabelWidth:"auto",getParams:{factory_date:Object(u["d"])(),hour_step:2,classes:["早班"]},headers:[],tableData:{},classOptions:["早班","夜班"],hourStepOptions:[1,2,3,4,6,12],editForm:{},dialogEditVisible:!1}},created:function(){this.getTableData()},methods:{getTableData:function(){var e=this;this.headers=[],l(this.getParams).then((function(t){e.tableData=t,e.headers=t.headers}))},changeSearch:function(){this.getTableData()},showEditDialog:function(e){this.editForm={factory_date:e.factory_date,classes:e.classes,equip_no:e.equip_no,cause:e.cause},this.dialogEditVisible=!0},handleEdit:function(){var e=this;c(this.editForm).then((function(t){e.dialogEditVisible=!1,e.$message("修改成功"),e.getTableData()}))},getSummaries:function(e){var t=e.columns,n=e.data,r=[];return t.forEach((function(e,t){var a=null;0!==t?("目标"===e.label&&(a=n.map((function(t){return Number(t.time_span_train_count[e.property][0])}))),"完成"===e.label&&(a=n.map((function(t){return Number(t.time_span_train_count[e.property][1])}))),"完成"!==e.label&&"目标"!==e.label&&(a=n.map((function(t){return Number(t[e.property])}))),"未达产原因分析"!==e.label?a.every((function(e){return isNaN(e)}))?r[t]="":(r[t]=a.reduce((function(e,t){var n=Number(t);return isNaN(n)?e:e+t}),0),r[t]+=""):r[t]=""):r[t]="合计"})),r},getStyle:function(e){if(e[1]<e[0])return"height:100%; margin:0 0 0 0; background-color: #EA1B29; color: #F5F7FA"}}},f=s,d=(n("472f"),n("9ca4")),p=Object(d["a"])(f,r,a,!1,null,null,null);t["default"]=p.exports},3:function(e,t){},"38eb":function(e,t,n){"use strict";var r=n("f62c").charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"472f":function(e,t,n){"use strict";var r=n("ba06"),a=n.n(r);a.a},5139:function(e,t,n){"use strict";var r=n("99ad"),a=n("22ef"),i=RegExp.prototype.exec,o=String.prototype.replace,l=i,c=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=a.UNSUPPORTED_Y||a.BROKEN_CARET,s=void 0!==/()??/.exec("")[1],f=c||s||u;f&&(l=function(e){var t,n,a,l,f=this,d=u&&f.sticky,p=r.call(f),g=f.source,h=0,v=e;return d&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),v=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(g="(?: "+g+")",v=" "+v,h++),n=new RegExp("^(?:"+g+")",p)),s&&(n=new RegExp("^"+g+"$(?!\\s)",p)),c&&(t=f.lastIndex),a=i.call(d?n:f,v),d?a?(a.input=a.input.slice(h),a[0]=a[0].slice(h),a.index=f.lastIndex,f.lastIndex+=a[0].length):f.lastIndex=0:c&&a&&(f.lastIndex=f.global?a.index+a[0].length:t),s&&a&&a.length>1&&o.call(a[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)})),a}),e.exports=l},"58d8":function(e,t,n){var r=n("0c3c"),a=n("3553"),i=n("692f"),o=n("d88d"),l=function(e){return function(t,n,l,c){r(n);var u=a(t),s=i(u),f=o(u.length),d=e?f-1:0,p=e?-1:1;if(l<2)while(1){if(d in s){c=s[d],d+=p;break}if(d+=p,e?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:f>d;d+=p)d in s&&(c=n(c,s[d],d,u));return c}};e.exports={left:l(!1),right:l(!0)}},"59da":function(e,t,n){var r=n("2118"),a=n("5139");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var i=n.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"5e9f":function(e,t,n){"use strict";var r=n("b2a2"),a=n("857c"),i=n("3553"),o=n("d88d"),l=n("3da3"),c=n("2732"),u=n("38eb"),s=n("59da"),f=Math.max,d=Math.min,p=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var b=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,y=b?"$":"$0";return[function(n,r){var a=c(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!b&&m||"string"===typeof r&&-1===r.indexOf(y)){var i=n(t,e,this,r);if(i.done)return i.value}var c=a(e),p=String(this),g="function"===typeof r;g||(r=String(r));var h=c.global;if(h){var _=c.unicode;c.lastIndex=0}var E=[];while(1){var S=s(c,p);if(null===S)break;if(E.push(S),!h)break;var w=String(S[0]);""===w&&(c.lastIndex=u(p,o(c.lastIndex),_))}for(var R="",k=0,P=0;P<E.length;P++){S=E[P];for(var I=String(S[0]),T=f(d(l(S.index),p.length),0),$=[],A=1;A<S.length;A++)$.push(v(S[A]));var D=S.groups;if(g){var O=[I].concat($,T,p);void 0!==D&&O.push(D);var N=String(r.apply(void 0,O))}else N=x(I,p,T,$,D,r);T>=k&&(R+=p.slice(k,T)+N,k=T+I.length)}return R+p.slice(k)}];function x(e,n,r,a,o,l){var c=r+e.length,u=a.length,s=h;return void 0!==o&&(o=i(o),s=g),t.call(l,s,(function(t,i){var l;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":l=o[i.slice(1,-1)];break;default:var s=+i;if(0===s)return t;if(s>u){var f=p(s/10);return 0===f?t:f<=u?void 0===a[f-1]?i.charAt(1):a[f-1]+i.charAt(1):t}l=a[s-1]}return void 0===l?"":l}))}}))},"73c3":function(e,t,n){var r=n("4fda");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},"84bc":function(e,t,n){"use strict";var r=n("1c8b"),a=n("5dfd").every,i=n("d7e1"),o=n("ff9c"),l=i("every"),c=o("every");r({target:"Array",proto:!0,forced:!l||!c},{every:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"84c2":function(e,t,n){var r=n("1e2c"),a=n("d890"),i=n("e8d6"),o=n("7063"),l=n("d910").f,c=n("b338").f,u=n("8a1c"),s=n("99ad"),f=n("22ef"),d=n("1944"),p=n("efe2"),g=n("b702").set,h=n("403f"),v=n("90fb"),b=v("match"),m=a.RegExp,y=m.prototype,x=/a/g,_=/a/g,E=new m(x)!==x,S=f.UNSUPPORTED_Y,w=r&&i("RegExp",!E||S||p((function(){return _[b]=!1,m(x)!=x||m(_)==_||"/a/i"!=m(x,"i")})));if(w){var R=function(e,t){var n,r=this instanceof R,a=u(e),i=void 0===t;if(!r&&a&&e.constructor===R&&i)return e;E?a&&!i&&(e=e.source):e instanceof R&&(i&&(t=s.call(e)),e=e.source),S&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var l=o(E?new m(e,t):m(e,t),r?this:y,R);return S&&n&&g(l,{sticky:n}),l},k=function(e){e in R||l(R,e,{configurable:!0,get:function(){return m[e]},set:function(t){m[e]=t}})},P=c(m),I=0;while(P.length>I)k(P[I++]);y.constructor=R,R.prototype=y,d(a,"RegExp",R)}h("RegExp")},8980:function(e,t,n){var r=n("d88d"),a=n("c7e6"),i=n("2732"),o=Math.ceil,l=function(e){return function(t,n,l){var c,u,s=String(i(t)),f=s.length,d=void 0===l?" ":String(l),p=r(n);return p<=f||""==d?s:(c=p-f,u=a.call(d,o(c/d.length)),u.length>c&&(u=u.slice(0,c)),e?s+u:u+s)}};e.exports={start:l(!1),end:l(!0)}},"898e":function(e,t,n){"use strict";var r=n("1c8b"),a=n("8980").start,i=n("73c3");r({target:"String",proto:!0,forced:i},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},b2a2:function(e,t,n){"use strict";n("e35a");var r=n("1944"),a=n("efe2"),i=n("90fb"),o=n("5139"),l=n("0fc1"),c=i("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),s=function(){return"$0"==="a".replace(/./,"$0")}(),f=i("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),p=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var g=i(e),h=!a((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),v=h&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return t=!0,null},n[g](""),!t}));if(!h||!v||"replace"===e&&(!u||!s||d)||"split"===e&&!p){var b=/./[g],m=n(g,""[e],(function(e,t,n,r,a){return t.exec===o?h&&!a?{done:!0,value:b.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:s,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=m[0],x=m[1];r(String.prototype,e,y),r(RegExp.prototype,g,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}f&&l(RegExp.prototype[g],"sham",!0)}},ba06:function(e,t,n){},c7e6:function(e,t,n){"use strict";var r=n("3da3"),a=n("2732");e.exports="".repeat||function(e){var t=String(a(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},e35a:function(e,t,n){"use strict";var r=n("1c8b"),a=n("5139");r({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ed08:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p}));n("fe59"),n("b130"),n("ecb4"),n("d497"),n("513c"),n("fe8a"),n("e18c"),n("84c2"),n("e35a"),n("1c2e"),n("90aa"),n("898e"),n("5e9f"),n("0d7a"),n("08ba");var r=n("f7f9"),a=n("4360"),i=n("ecc0"),o=n.n(i),l=n("d85b"),c=n.n(l);function u(e,t,n){var r=e?new Date(e):new Date,a={y:r.getFullYear(),m:s(r.getMonth()+1),d:s(r.getDate()),h:s(r.getHours()),i:s(r.getMinutes()),s:s(r.getSeconds()),a:s(r.getDay())};return t?a.y+"-"+a.m+"-"+a.d+" "+a.h+":"+a.i+":"+a.s:n&&"continuation"===n?a.y+a.m+a.d+a.h+a.i+a.s:a.y+"-"+a.m+"-"+a.d}function s(e){return e=Number(e),e<10?"0"+e:e}function f(e){if(!e&&"object"!==Object(r["a"])(e))throw new Error("error arguments","deepClone");var t=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(n){e[n]&&"object"===Object(r["a"])(e[n])?t[n]=f(e[n]):t[n]=e[n]})),t}function d(e){if(e&&e instanceof Array&&e.length>0){var t=a["a"].getters&&a["a"].getters.permission,n=t[e[0]];if(!n||0===n.length)return;var r=n.some((function(t){return t===e[1]}));return r}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}function p(e){var t=c.a.utils.table_to_book(document.querySelector("#out-table"),{raw:!0}),n=c.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{o.a.saveAs(new Blob([n],{type:"application/octet-stream"}),e+".xlsx")}catch(r){"undefined"!==typeof console&&console.log(r,n)}return n}},f7f9:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("f3dd"),n("0a51"),n("9b11"),n("e18c"),n("96db"),n("af86");function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}}}]);