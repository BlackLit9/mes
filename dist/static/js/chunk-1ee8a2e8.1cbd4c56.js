(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ee8a2e8"],{a6a4:function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticStyle:{"margin-top":"25px"}},[t("el-form",{attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"日期"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期",format:"yyyy-MM-dd"},on:{change:e.planDateChange},model:{value:e.planDate,callback:function(a){e.planDate=a},expression:"planDate"}})],1),t("el-form-item",{attrs:{label:"原材料类别"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.materialTypeChange,"visible-change":e.materialTypeVisibleChange},model:{value:e.materialType,callback:function(a){e.materialType=a},expression:"materialType"}},e._l(e.materialTypeOptions,(function(e){return t("el-option",{key:e.global_name,attrs:{label:e.global_name,value:e.global_name}})})),1)],1),t("el-form-item",{attrs:{label:"原材料名称"}},[t("el-input",{on:{input:e.materialNameChanged},model:{value:e.materialName,callback:function(a){e.materialName=a},expression:"materialName"}})],1)],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{label:"S",prop:"unit",width:"35"}}),t("el-table-column",{attrs:{type:"index",label:"No"}}),t("el-table-column",{attrs:{prop:"material_type",label:"原材料类别"}}),t("el-table-column",{attrs:{prop:"material_no",label:"原材料代码"}}),t("el-table-column",{attrs:{prop:"material_name",label:"原材料名称"}}),t("el-table-column",{attrs:{prop:"storage_weight",label:"原材料库存（Kg）",width:"140px"}}),t("el-table-column",{attrs:{align:"center",label:"原材料需要量（Kg）"}},[t("el-table-column",{attrs:{prop:"class_details.早班",label:"早班",width:"75px"}}),t("el-table-column",{attrs:{prop:"class_details.中班",label:"中班",width:"75px"}}),t("el-table-column",{attrs:{prop:"class_details.夜班",label:"夜班",width:"75px"}}),t("el-table-column",{attrs:{label:"总计",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{domProps:{textContent:e._s((a.row.class_details.早班?a.row.class_details.早班:0)+(a.row.class_details.中班?a.row.class_details.中班:0)+(a.row.class_details.夜班?a.row.class_details.夜班:0))}})]}}])})],1),t("el-table-column",{attrs:{align:"center",label:"领料计划（Kg）"}},[t("el-table-column",{attrs:{label:"早班",width:"75px"}}),t("el-table-column",{attrs:{label:"中班",width:"75px"}}),t("el-table-column",{attrs:{label:"夜班",width:"75px"}}),t("el-table-column",{attrs:{label:"总计",width:"80px"}})],1)],1),t("page",{attrs:{total:e.total,"current-page":e.getParams.page},on:{currentChange:e.currentChange}})],1)},r=[],n=t("b775"),i=t("99b1");function s(e){return Object(n["a"])({url:i["a"].MaterialDemanded,method:"get",params:e})}function o(e){return Object(n["a"])({url:i["a"].GlobalCodesUrl,method:"get",params:e})}var c=t("3e51"),m=t("ed08"),u={components:{page:c["a"]},data:function(){return{tableData:[],planDate:Object(m["b"])(),materialType:"",materialName:"",materialTypeOptions:[],getParams:{page:1},currentPage:1,total:0}},created:function(){this.getMaterialDemanded()},methods:{beforeGetData:function(){this.getParams["plan_date"]=this.planDate,this.getParams["material_type"]=this.materialType,this.getParams["material_name"]=this.materialName},planDateChange:function(){this.getParams.page=1,this.beforeGetData(),this.getMaterialDemanded()},materialTypeVisibleChange:function(e){e&&this.getMaterialType()},materialTypeChange:function(){this.getParams.page=1,this.beforeGetData(),this.getMaterialDemanded()},materialNameChanged:function(){this.getParams.page=1,this.beforeGetData(),this.getMaterialDemanded()},getMaterialDemanded:function(){var e=this;this.beforeGetData(),s(this.getParams).then((function(a){e.tableData=a.results,e.total=a.count}))},getMaterialType:function(){var e=this;o({class_name:"原材料类别"}).then((function(a){e.materialTypeOptions=a.results}))},currentChange:function(e){this.getParams.page=e,this.getMaterialDemanded()}}},p=u,b=t("2877"),d=Object(b["a"])(p,l,r,!1,null,"66b9e39e",null);a["default"]=d.exports},ed08:function(e,a,t){"use strict";t.d(a,"b",(function(){return r})),t.d(a,"a",(function(){return i}));t("4160"),t("c975"),t("a9e3"),t("b64b"),t("d3b7"),t("4d63"),t("ac1f"),t("25f0"),t("4d90"),t("5319"),t("1276"),t("159b");var l=t("53ca");function r(e,a,t){var l=e?new Date(e):new Date,r={y:l.getFullYear(),m:n(l.getMonth()+1),d:n(l.getDate()),h:n(l.getHours()),i:n(l.getMinutes()),s:n(l.getSeconds()),a:n(l.getDay())};return a?r.y+"-"+r.m+"-"+r.d+" "+r.h+":"+r.i+":"+r.s:t&&"continuation"===t?r.y+r.m+r.d+r.h+r.i+r.s:r.y+"-"+r.m+"-"+r.d}function n(e){return e=Number(e),e<10?"0"+e:e}function i(e){if(!e&&"object"!==Object(l["a"])(e))throw new Error("error arguments","deepClone");var a=e.constructor===Array?[]:{};return Object.keys(e).forEach((function(t){e[t]&&"object"===Object(l["a"])(e[t])?a[t]=i(e[t]):a[t]=e[t]})),a}}}]);