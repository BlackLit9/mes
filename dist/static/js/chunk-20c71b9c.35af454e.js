(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20c71b9c"],{"5a5f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{attrs:{inline:!0}},[r("el-form-item",{attrs:{label:"机型名称"}},[r("el-input",{on:{input:e.changeSearch},model:{value:e.category_name,callback:function(t){e.category_name=t},expression:"category_name"}})],1),r("el-form-item",{attrs:{label:"设备类型"}},[r("el-input",{on:{input:e.changeSearch},model:{value:e.equip_type_name,callback:function(t){e.equip_type_name=t},expression:"equip_type_name"}})],1),r("el-form-item",[e.permissionObj.equipcategoryattribute&&e.permissionObj.equipcategoryattribute.indexOf("add")>-1?r("el-button",{on:{click:e.showCreateEquipCateDialog}},[e._v("新建")]):e._e()],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{align:"center",type:"index",label:"No",width:"40px"}}),r("el-table-column",{attrs:{align:"center",prop:"category_no",label:"机型编号"}}),r("el-table-column",{attrs:{align:"center",prop:"category_name",label:"机型名称"}}),r("el-table-column",{attrs:{align:"center",width:"100",prop:"volume",label:"容积"}}),r("el-table-column",{attrs:{align:"center",prop:"equip_type_name",label:"设备类型"}}),r("el-table-column",{attrs:{align:"center",width:"50",prop:"equip_process_no",label:"工序代码"}}),r("el-table-column",{attrs:{align:"center",prop:"equip_process_name",label:"工序名称"}}),r("el-table-column",{attrs:{align:"center",formatter:e.formatter,width:"50",prop:"used_flag",label:"使用与否"}}),r("el-table-column",{attrs:{align:"center",width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button-group",[e.permissionObj.equipcategoryattribute&&e.permissionObj.equipcategoryattribute.indexOf("change")>-1?r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.showEditEquipCateDialog(t.row)}}},[e._v("编辑 ")]):e._e(),e.permissionObj.equipcategoryattribute&&e.permissionObj.equipcategoryattribute.indexOf("delete")>-1?r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleEquipCateDelete(t.row)}}},[e._v(e._s(t.row.use_flag?"停用":"启用")+" ")]):e._e()],1)]}}])})],1),r("page",{attrs:{total:e.total,"current-page":e.getParams.page},on:{currentChange:e.currentChange}}),r("el-dialog",{attrs:{title:"添加设备种类",visible:e.dialogCreateEquipCateVisible},on:{"update:visible":function(t){e.dialogCreateEquipCateVisible=t}}},[r("el-form",{ref:"AddEquipCateForm",attrs:{model:e.AddEquipCateForm,rules:e.add_equipcate_rules}},[r("el-form-item",{attrs:{label:"机型编号",prop:"category_no"}},[r("el-input",{model:{value:e.AddEquipCateForm.category_no,callback:function(t){e.$set(e.AddEquipCateForm,"category_no",t)},expression:"AddEquipCateForm.category_no"}})],1),r("el-form-item",{attrs:{label:"机型名称",prop:"category_name"}},[r("el-input",{model:{value:e.AddEquipCateForm.category_name,callback:function(t){e.$set(e.AddEquipCateForm,"category_name",t)},expression:"AddEquipCateForm.category_name"}})],1),r("el-form-item",{attrs:{label:"容积",prop:"volume"}},[r("el-input",{model:{value:e.AddEquipCateForm.volume,callback:function(t){e.$set(e.AddEquipCateForm,"volume",t)},expression:"AddEquipCateForm.volume"}})],1),r("el-form-item",{attrs:{label:"设备类型",prop:"equip_type"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{"visible-change":e.shiftsEquipCateChange},model:{value:e.AddEquipCateForm.equip_type,callback:function(t){e.$set(e.AddEquipCateForm,"equip_type",t)},expression:"AddEquipCateForm.equip_type"}},e._l(e.EquipCateOptions,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.global_name}})})),1)],1),r("el-form-item",{attrs:{label:"工序",prop:"process"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{"visible-change":e.shiftsEquipCateProcessChange},model:{value:e.AddEquipCateForm.process,callback:function(t){e.$set(e.AddEquipCateForm,"process",t)},expression:"AddEquipCateForm.process"}},e._l(e.EquipCateProcessOptions,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.global_name}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogCreateEquipCateVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCreateEquipCate("AddEquipCateForm")}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑设备种类",visible:e.dialogEditEquipCateVisible},on:{"update:visible":function(t){e.dialogEditEquipCateVisible=t}}},[r("el-form",{ref:"ModifyEquipCateForm",attrs:{model:e.ModifyEquipCateForm,rules:e.modify_equipcate_rules}},[r("el-form-item",{attrs:{label:"机型编号",prop:"category_no"}},[r("el-input",{attrs:{disabled:!0},model:{value:e.ModifyEquipCateForm.category_no,callback:function(t){e.$set(e.ModifyEquipCateForm,"category_no",t)},expression:"ModifyEquipCateForm.category_no"}})],1),r("el-form-item",{attrs:{label:"机型名称",prop:"category_name"}},[r("el-input",{model:{value:e.ModifyEquipCateForm.category_name,callback:function(t){e.$set(e.ModifyEquipCateForm,"category_name",t)},expression:"ModifyEquipCateForm.category_name"}})],1),r("el-form-item",{attrs:{label:"容积",prop:"volume"}},[r("el-input",{model:{value:e.ModifyEquipCateForm.volume,callback:function(t){e.$set(e.ModifyEquipCateForm,"volume",t)},expression:"ModifyEquipCateForm.volume"}})],1),r("el-form-item",{attrs:{label:"设备类型",prop:"equip_type"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{"visible-change":e.shiftsEquipCateChange},model:{value:e.ModifyEquipCateForm.equip_type,callback:function(t){e.$set(e.ModifyEquipCateForm,"equip_type",t)},expression:"ModifyEquipCateForm.equip_type"}},e._l(e.EquipCateOptions,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.global_name}})})),1)],1),r("el-form-item",{attrs:{label:"工序",prop:"process"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{"visible-change":e.shiftsEquipCateProcessChange},model:{value:e.ModifyEquipCateForm.process,callback:function(t){e.$set(e.ModifyEquipCateForm,"process",t)},expression:"ModifyEquipCateForm.process"}},e._l(e.EquipCateProcessOptions,(function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.global_name}})})),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogEditEquipCateVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEditEquipCate("ModifyEquipCateForm")}}},[e._v("确 定")])],1)],1)],1)},i=[],o=(r("96cf"),r("1da1")),n=r("5530"),u=r("3e51"),l=r("7e633"),s=r("2f62"),c={components:{page:u["a"]},computed:Object(n["a"])({},Object(s["b"])(["permission"])),data:function(){return{tableData:[],EquipCate:[],EquipCateOptions:[],equip_type:"",category_name:null,equip_type_name:null,EquipCateProcess:[],EquipCateProcessOptions:[],process:"",getParams:{page:1},AddEquipCateForm:{category_no:"",category_name:"",volume:"",equip_type:"",process:""},total:0,ModifyEquipCateForm:{category_no:"",category_name:"",volume:"",equip_type:"",process:""},EquipCateFormError:{category_no:"",category_name:"",volume:"",equip_type:"",process:""},add_equipcate_rules:{category_no:[{required:!0,message:"请输入机型编号",trigger:"blur"}],category_name:[{required:!0,message:"请输入机型名称",trigger:"blur"}],volume:[{required:!0,message:"请输入容积",trigger:"blur"}],equip_type:[{required:!0,message:"请选择设备类型",trigger:"change"}],process:[{required:!0,message:"请选择工序",trigger:"change"}]},modify_equipcate_rules:{category_no:[{required:!0,message:"请输入机型编号",trigger:"blur"}],category_name:[{required:!0,message:"请输入机型名称",trigger:"blur"}],volume:[{required:!0,message:"请输入容积",trigger:"blur"}],equip_type:[{required:!0,message:"请选择设备类型",trigger:"change"}],process:[{required:!0,message:"请选择工序",trigger:"change"}]},dialogCreateEquipCateVisible:!1,dialogEditEquipCateVisible:!1}},created:function(){this.permissionObj=this.permission,this.category_manage_list()},methods:{formatter:function(e,t){return e.use_flag?"Y":"N"},category_manage_list:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l["a"])("get",null,{params:e.getParams});case 3:r=t.sent,e.tableData=r.results,e.total=r.count,t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](0),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},category_manage_delete:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l["a"])("delete",e,{});case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t["catch"](0),new Error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},category_manage_modify:function(e,t){return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(l["a"])("put",e,t);case 3:r.next=8;break;case 5:throw r.prev=5,r.t0=r["catch"](0),new Error(r.t0);case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},equip_type_list:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l["e"])("get",{params:{}});case 3:r=t.sent,0!==r.results.length&&(e.EquipCateOptions=r.results),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},process_global_list:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l["f"])("get",{params:{}});case 3:r=t.sent,0!==r.results.length&&(e.EquipCateProcessOptions=r.results),t.next=10;break;case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},category_manage_post:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l["a"])("post",null,e);case 3:return r=t.sent,t.abrupt("return",r);case 7:throw t.prev=7,t.t0=t["catch"](0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},shiftsEquipCateChange:function(e){e&&this.equip_type_list()},shiftsEquipCateProcessChange:function(e){e&&this.process_global_list()},clearEquipCateForm:function(){this.AddEquipCateForm={category_no:"",category_name:"",volume:"",equip_type:"",process:""}},clearEquipCateFormError:function(){this.EuqipCateFormError={category_no:"",category_name:"",volume:"",equip_type:"",process:""}},showCreateEquipCateDialog:function(){this.clearEquipCateForm(),this.clearEquipCateFormError(),this.dialogCreateEquipCateVisible=!0},handleCreateEquipCate:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return t.clearEquipCateFormError(),e.prev=2,e.next=5,t.category_manage_post({data:{category_name:t.AddEquipCateForm["category_name"],category_no:t.AddEquipCateForm["category_no"],equip_type:t.AddEquipCateForm["equip_type"],process:t.AddEquipCateForm["process"],volume:t.AddEquipCateForm["volume"]}});case 5:t.dialogCreateEquipCateVisible=!1,t.category_manage_list(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),e.t0;case 12:e.next=15;break;case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}())},handleEditEquipCate:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=13;break}return e.prev=1,e.next=4,t.category_manage_modify(t.ModifyEquipCateForm.id,{data:{category_name:t.ModifyEquipCateForm["category_name"],category_no:t.ModifyEquipCateForm["category_no"],equip_type:t.ModifyEquipCateForm["equip_type"],process:t.ModifyEquipCateForm["process"],volume:t.ModifyEquipCateForm["volume"]}});case 4:t.dialogEditEquipCateVisible=!1,t.category_manage_list(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),e.t0;case 11:e.next=14;break;case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())},handleEquipCateDelete:function(e){var t=this,r=e.use_flag?"停用":"启用";this.$confirm("此操作将"+r+e.category_name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){try{Object(l["a"])("delete",e.id,{}).then((function(e){t.category_manage_list()}))}catch(r){}})).catch((function(){}))},showEditEquipCateDialog:function(e){this.clearEquipCateForm(),this.clearEquipCateFormError(),this.equip_type_list(),this.process_global_list(),this.ModifyEquipCateForm=Object.assign({},e),this.dialogEditEquipCateVisible=!0},changeSearch:function(){this.getParams["category_name"]=this.category_name,this.getParams["equip_type_name"]=this.equip_type_name,this.getParams.page=1,this.category_manage_list()},currentChange:function(e){this.getParams.page=e,this.category_manage_list()}}},p=c,m=r("2877"),d=Object(m["a"])(p,a,i,!1,null,"3babaf64",null);t["default"]=d.exports},"7e633":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return c}));var a=r("b775"),i=r("99b1");function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="";o=t?i["a"].EquipCategoryUrl+t+"/":i["a"].EquipCategoryUrl;var n={url:o,method:e};return Object.assign(n,r),Object(a["a"])(n)}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={url:i["a"].EquipTypeGlobalUrl,method:e};return Object.assign(r,t),Object(a["a"])(r)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={url:i["a"].EquipProcessGlobalUrl,method:e};return Object.assign(r,t),Object(a["a"])(r)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o="";o=t?i["a"].EquipUrl+t+"/":i["a"].EquipUrl;var n={url:o,method:e};return Object.assign(n,r),Object(a["a"])(n)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={url:i["a"].EquipLevelGlobalUrl,method:e};return Object.assign(r,t),Object(a["a"])(r)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={url:i["a"].EquipCategoryUrl+"?all=1",method:e};return Object.assign(r,t),Object(a["a"])(r)}}}]);